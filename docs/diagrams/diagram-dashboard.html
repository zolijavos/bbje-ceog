<!DOCTYPE html>
<html lang="en" x-data="appData()" :class="{ 'dark': darkMode }">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CEO Gala 2026 - System Diagrams</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    :root { --gold:#D4A84B; --gold-light:#E5C87A; --gold-dark:#B8923D; --navy:#1A1F35; --navy-light:#2D3555; --charcoal:#2C2C2C; --cream:#FAF8F5; --warm-gray:#5C6370; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Open Sans',system-ui,sans-serif; background:var(--cream); color:var(--charcoal); line-height:1.6; }
    .dark body { background:var(--navy); color:#e5e5e5; }
    header { background:var(--navy); color:white; padding:1.25rem 2rem; border-bottom:3px solid var(--gold); display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem; }
    .header-title { font-family:'Playfair Display',Georgia,serif; font-size:1.5rem; font-weight:600; }
    .header-sub { font-size:0.75rem; color:var(--gold-light); text-transform:uppercase; letter-spacing:0.08em; margin-top:0.25rem; }
    .header-actions { display:flex; gap:0.5rem; flex-wrap:wrap; }
    .btn { padding:0.5rem 1rem; font-size:0.7rem; font-weight:600; text-transform:uppercase; letter-spacing:0.04em; border:none; cursor:pointer; transition:all 0.2s; font-family:'Open Sans',sans-serif; }
    .btn-gold { background:var(--gold); color:white; }
    .btn-gold:hover { background:var(--gold-dark); }
    .btn-ghost { background:transparent; color:white; border:1px solid rgba(255,255,255,0.3); }
    .btn-ghost:hover { background:rgba(255,255,255,0.1); }
    .btn-lang { background:var(--gold-dark); color:white; font-weight:700; min-width:42px; }
    input[type="file"] { display:none; }
    .container { max-width:1400px; margin:0 auto; padding:1.5rem; display:grid; grid-template-columns:260px 1fr; gap:1.5rem; }
    @media (max-width:900px) { .container { grid-template-columns:1fr; } .sidebar { display:none; } }
    .sidebar { position:sticky; top:1.5rem; height:fit-content; }
    .sidebar-panel { background:white; border:1px solid rgba(92,99,112,0.15); }
    .dark .sidebar-panel { background:var(--navy-light); border-color:rgba(255,255,255,0.1); }
    .sidebar-header { padding:1rem 1.25rem; border-bottom:1px solid rgba(92,99,112,0.1); font-family:'Playfair Display',Georgia,serif; font-size:0.85rem; font-weight:600; color:var(--navy); text-transform:uppercase; letter-spacing:0.06em; }
    .dark .sidebar-header { color:white; border-color:rgba(255,255,255,0.1); }
    .sidebar-nav { display:flex; flex-direction:column; gap:0.5rem; padding:0.75rem; }
    .sidebar-btn-base { display:flex; align-items:center; gap:0.75rem; padding:0.75rem 1rem; font-size:0.8rem; font-weight:500; text-align:left; border:none; cursor:pointer; transition:all 0.15s; font-family:'Open Sans',sans-serif; }
    .sidebar-btn { background:white; color:var(--navy); border:1px solid rgba(92,99,112,0.15); }
    .sidebar-btn:hover { background:var(--cream); border-color:var(--gold); }
    .sidebar-btn-active { background:var(--gold); color:white; border:1px solid var(--gold); }
    .dark .sidebar-btn { background:var(--navy); color:#ccc; border-color:rgba(255,255,255,0.1); }
    .dark .sidebar-btn:hover { background:var(--navy-light); }
    .sidebar-num { font-family:'Playfair Display',Georgia,serif; font-weight:600; opacity:0.5; }
    .sidebar-btn-active .sidebar-num { opacity:1; }
    .diagram-section { background:white; border:1px solid rgba(92,99,112,0.1); }
    .dark .diagram-section { background:var(--navy-light); border-color:rgba(255,255,255,0.1); }
    .section-header { display:flex; align-items:center; gap:1rem; padding:1.25rem 1.5rem; border-bottom:1px solid rgba(92,99,112,0.1); border-left:3px solid var(--gold); }
    .dark .section-header { border-bottom-color:rgba(255,255,255,0.1); }
    .section-num { font-family:'Playfair Display',Georgia,serif; font-size:1.25rem; font-weight:600; color:var(--gold); }
    .section-header h2 { font-family:'Playfair Display',Georgia,serif; font-size:1.25rem; font-weight:600; color:var(--navy); }
    .dark .section-header h2 { color:white; }
    .description-box { padding:1.25rem 1.5rem; background:linear-gradient(to right,rgba(212,168,75,0.08),rgba(212,168,75,0.02)); border-bottom:1px solid rgba(92,99,112,0.1); }
    .dark .description-box { background:linear-gradient(to right,rgba(212,168,75,0.12),rgba(212,168,75,0.04)); }
    .description-box h3 { font-size:0.65rem; font-weight:700; text-transform:uppercase; letter-spacing:0.1em; color:var(--gold-dark); margin-bottom:0.5rem; }
    .description-box p { font-size:0.85rem; color:var(--warm-gray); line-height:1.7; }
    .dark .description-box p { color:#b0b0b0; }
    .diagram-area { padding:1.5rem; background:var(--cream); overflow:auto; }
    .dark .diagram-area { background:rgba(0,0,0,0.15); }
    .diagram-area svg { display:block; margin:0 auto; max-width:100%; height:auto; }
    .dark .diagram-area svg { filter:invert(0.85) hue-rotate(180deg); }
    .notes-section { padding:1.25rem 1.5rem; border-top:1px solid rgba(92,99,112,0.1); }
    .dark .notes-section { border-color:rgba(255,255,255,0.1); }
    .notes-section label { display:block; font-size:0.7rem; font-weight:600; text-transform:uppercase; letter-spacing:0.08em; color:var(--warm-gray); margin-bottom:0.5rem; }
    .notes-section textarea { width:100%; padding:0.75rem; font-size:0.85rem; font-family:'Open Sans',sans-serif; border:1px solid rgba(92,99,112,0.2); background:white; color:var(--charcoal); resize:vertical; transition:border-color 0.2s; }
    .notes-section textarea:focus { outline:none; border-color:var(--gold); }
    .dark .notes-section textarea { background:var(--navy); color:#e5e5e5; border-color:rgba(255,255,255,0.15); }
    .notes-hint { display:block; font-size:0.65rem; color:var(--warm-gray); margin-top:0.35rem; }
    footer { background:var(--navy); color:rgba(255,255,255,0.5); padding:1rem 2rem; text-align:center; font-size:0.65rem; margin-top:2rem; }
    footer span { color:var(--gold); font-family:'Playfair Display',Georgia,serif; }
    ::-webkit-scrollbar { width:6px; height:6px; }
    ::-webkit-scrollbar-track { background:var(--cream); }
    ::-webkit-scrollbar-thumb { background:var(--warm-gray); }
    .dark ::-webkit-scrollbar-track { background:var(--navy); }
    @media print { .no-print { display:none !important; } .container { display:block; } .sidebar { display:none; } }
  </style>
</head>
<body>
  <header class="no-print">
    <div>
      <div class="header-title" x-text="t.pageTitle"></div>
      <div class="header-sub" x-text="t.pageSubtitle"></div>
    </div>
    <div class="header-actions">
      <button @click="toggleLang()" class="btn btn-lang" x-text="lang.toUpperCase()"></button>
      <button @click="darkMode = !darkMode" class="btn btn-ghost" x-text="darkMode ? t.btnLight : t.btnDark"></button>
      <button @click="exportNotes()" class="btn btn-ghost" x-text="t.btnExport"></button>
      <button @click="$refs.fileInput.click()" class="btn btn-ghost" x-text="t.btnImport"></button>
      <input type="file" x-ref="fileInput" @change="importNotes($event)" accept=".csv">
      <button onclick="window.print()" class="btn btn-gold" x-text="t.btnPrint"></button>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar no-print">
      <div class="sidebar-panel">
        <div class="sidebar-header" x-text="t.sidebarTitle"></div>
        <nav class="sidebar-nav">

          <button @click="activeTab = 'vip-registration'; scrollToTop()" :class="activeTab === 'vip-registration' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">01</span>
            <span x-text="lang === 'hu' ? 'VIP Regisztrációs Folyamat' : 'VIP Registration Flow'"></span>
          </button>

          <button @click="activeTab = 'paid-registration'; scrollToTop()" :class="activeTab === 'paid-registration' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">02</span>
            <span x-text="lang === 'hu' ? 'Fizetős Regisztrációs Folyamat' : 'Paid Registration Flow'"></span>
          </button>

          <button @click="activeTab = 'admin-dashboard'; scrollToTop()" :class="activeTab === 'admin-dashboard' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">03</span>
            <span x-text="lang === 'hu' ? 'Admin Dashboard Folyamat' : 'Admin Dashboard Flow'"></span>
          </button>

          <button @click="activeTab = 'checkin-staff'; scrollToTop()" :class="activeTab === 'checkin-staff' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">04</span>
            <span x-text="lang === 'hu' ? 'Check-in Staff Folyamat' : 'Check-in Staff Flow'"></span>
          </button>

          <button @click="activeTab = 'state-machine'; scrollToTop()" :class="activeTab === 'state-machine' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">05</span>
            <span x-text="lang === 'hu' ? 'Állapotgép Diagram' : 'State Machine Diagram'"></span>
          </button>

          <button @click="activeTab = 'payment-flow'; scrollToTop()" :class="activeTab === 'payment-flow' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">06</span>
            <span x-text="lang === 'hu' ? 'Fizetési Folyamat' : 'Payment Flow'"></span>
          </button>

          <button @click="activeTab = 'system-architecture'; scrollToTop()" :class="activeTab === 'system-architecture' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">07</span>
            <span x-text="lang === 'hu' ? 'Rendszer Architektúra' : 'System Architecture'"></span>
          </button>

          <button @click="activeTab = 'pwa-guest-app'; scrollToTop()" :class="activeTab === 'pwa-guest-app' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">08</span>
            <span x-text="lang === 'hu' ? 'PWA Vendég App Folyamat (Epic 6)' : 'PWA Guest App Flow (Epic 6)'"></span>
          </button>

          <button @click="activeTab = 'applicant-flow'; scrollToTop()" :class="activeTab === 'applicant-flow' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">09</span>
            <span x-text="lang === 'hu' ? 'Jelentkezési Folyamat (Epic 7)' : 'Applicant Flow (Epic 7)'"></span>
          </button>
        </nav>
      </div>
    </aside>
    <main>

        <section x-show="activeTab === 'vip-registration'" x-transition class="diagram-section" id="vip-registration">
          <div class="section-header">
            <span class="section-num">01</span>
            <h2 x-text="lang === 'hu' ? 'VIP Regisztrációs Folyamat' : 'VIP Registration Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a VIP vendégek regisztrációs folyamatát mutatja be a magic link validálásától a jegy kiállításáig. A VIP vendégek ingyenes részvételt kapnak és egyszerűsített folyamatot követnek: magic link kattintás, részvétel megerősítése (vagy elutasítása), bővített profil kitöltése (telefon, cég, pozíció, étkezési igények, ültetési preferenciák), GDPR és lemondási feltételek elfogadása. Megerősítés után a rendszer létrehozza az adatbázis rekordokat (Guest update, Registration, PWA kód, QR hash) és azonnal kiállítja a QR jegyet e-mailben.' : 'This diagram illustrates the VIP guest registration journey from magic link validation to ticket issuance. VIP guests receive complimentary attendance and follow a streamlined flow: click magic link, confirm attendance (or decline), fill out extended profile (phone, company, position, dietary requirements, seating preferences), accept GDPR and cancellation policy. Upon confirmation, the system creates database records (Guest update, Registration, PWA code, QR hash) and immediately issues the QR ticket via email.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 1520" width="100%" style="max-width:860px"><defs><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker></defs><rect x="0" y="0" width="860" height="1520" fill="#FAF8F5"/><text x="380" y="76" font-size="36" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VIP REGISTRATION FLOW</text><ellipse cx="380" cy="150" rx="60" ry="30" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="149" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><text x="380" y="165.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link</text><path d="M 380 180 L 380 220" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="280" y="240" width="200" height="60" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="380" y="267" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Landing Page</text><text x="380" y="281.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/register?code&amp;email</text><path d="M 380 300 L 380 340" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><polygon points="380,360 460,410 380,460 300,410" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="380" y="409" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="380" y="425.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link?</text><path d="M 300 410 L 180 410" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><text x="215" y="402" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">NO</text><rect x="40" y="380" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="407" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Error Page</text><text x="110" y="421.4" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Expired/Invalid</text><path d="M 380 460 L 380 500" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="405" y="482" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">YES</text><rect x="280" y="520" width="200" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="547" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Welcome Screen</text><text x="380" y="561.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Show guest info</text><text x="380" y="575.8" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm / Decline</text><path d="M 380 600 L 380 640" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><polygon points="380,660 460,710 380,760 300,710" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="380" y="709" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm or</text><text x="380" y="725.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Decline?</text><path d="M 300 710 L 180 710" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><text x="210" y="702" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DECLINE</text><rect x="40" y="680" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="707" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Declined Page</text><text x="110" y="721.4" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: declined</text><path d="M 110 740 L 110 780" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><ellipse cx="110" cy="830" rx="60" ry="30" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="834" font-size="14" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><path d="M 380 760 L 380 800" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="420" y="782" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CONFIRM</text><rect x="260" y="820" width="240" height="100" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="847" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VIP Confirmation Form</text><text x="380" y="861.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Phone, Company, Position</text><text x="380" y="875.8" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Dietary, Seating Prefs</text><text x="380" y="890.2" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GDPR + Cancellation Consent</text><path d="M 380 920 L 380 960" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="280" y="980" width="200" height="60" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="1007" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/registration</text><text x="380" y="1021.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/confirm</text><path d="M 380 1040 L 380 1080" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="260" y="1100" width="240" height="100" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="380" y="1126" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Database Transaction</text><text x="380" y="1139.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">1. Update Guest Profile</text><text x="380" y="1152.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">2. Create Registration</text><text x="380" y="1165.6" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">3. Generate PWA Code</text><text x="380" y="1178.8" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">4. Generate QR Hash</text><path d="M 380 1200 L 380 1240" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="280" y="1260" width="200" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="380" y="1287" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success Page</text><text x="380" y="1301.4" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: registered</text><path d="M 380 1320 L 380 1360" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><ellipse cx="380" cy="1410" rx="60" ry="30" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="380" y="1409" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><text x="380" y="1425.8" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket Issued</text><rect x="580" y="120" width="200" height="200" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="680" y="146" font-size="16" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LEGEND</text><ellipse cx="605" cy="175" rx="15" ry="10" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="1"/><text x="630" y="180" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Start/End</text><rect x="590" y="195" width="30" height="20" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="1"/><text x="630" y="210" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Process/Page</text><polygon points="605,225 620,237.5 605,250 590,237.5" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="1"/><text x="630" y="242" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Decision</text><rect x="590" y="260" width="30" height="20" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="1"/><text x="630" y="275" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Error/Decline</text><rect x="590" y="290" width="30" height="20" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="1"/><text x="630" y="305" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Success</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['vip-registration']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'paid-registration'" x-transition class="diagram-section" id="paid-registration">
          <div class="section-header">
            <span class="section-num">02</span>
            <h2 x-text="lang === 'hu' ? 'Fizetős Regisztrációs Folyamat' : 'Paid Registration Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a fizető vendégek regisztrációs folyamatát részletezi egyéni (20 000 Ft) és páros (40 000 Ft) jegy opciókkal. A folyamat magában foglalja: magic link validálás, jegytípus választás, számlázási adatok megadása (név, cím, adószám), partner adatok páros jegynél, fizetési mód választás (Stripe kártya vagy banki átutalás), és fizetés feldolgozás. Páros jegynél a partner saját magic linket kap a profil kitöltéséhez. Mindkét vendég automatikusan össze van kötve a közös asztal-hozzárendeléshez.' : 'This diagram details the paying guest registration flow supporting both single (20,000 HUF) and paired (40,000 HUF) ticket options. The flow includes: magic link validation, ticket type selection, billing information entry (name, address, tax number), partner details for paired tickets, payment method selection (Stripe card or bank transfer), and payment processing. For paired tickets, the partner receives their own magic link to complete their profile. Both guests are automatically linked for same-table seating assignment.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1510" width="100%" style="max-width:1200px"><defs><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-262626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#262626"/></marker><marker id="ah-C4A24D" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#C4A24D"/></marker><marker id="ah-6772e5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6772e5"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker></defs><rect x="0" y="0" width="1200" height="1510" fill="#FAF8F5"/><text x="640" y="72" font-size="32" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PAID REGISTRATION FLOW (Single &amp; Paired)</text><ellipse cx="540" cy="125" rx="60" ry="25" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="129" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><rect x="440" y="180" width="200" height="50" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="540" y="203" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link Validation</text><text x="540" y="216.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/register/paid</text><polygon points="540,260 620,300 540,340 460,300" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="296" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Type</text><text x="540" y="309.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paying_paired?</text><rect x="200" y="270" width="140" height="60" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="270" y="296" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single Ticket</text><text x="270" y="309.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Only Option</text><rect x="720" y="270" width="160" height="60" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="800" y="291" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 1: Select</text><text x="800" y="304.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single or Paired</text><text x="800" y="317.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><rect x="420" y="380" width="240" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="406" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 2: Profile Fields</text><text x="540" y="419.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Phone, Company, Position</text><text x="540" y="432.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Dietary, Seating Prefs</text><rect x="420" y="490" width="240" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="516" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 3: Billing Info</text><text x="540" y="529.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Name, Address, City</text><text x="540" y="542.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Postal, Tax Number</text><polygon points="540,600 620,640 540,680 460,640" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="637" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Paired</text><text x="540" y="651.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Selected?</text><rect x="720" y="600" width="180" height="80" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="810" y="626" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 4: Partner Details</text><text x="810" y="639.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Partner Name</text><text x="810" y="652.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Partner Email</text><rect x="440" y="720" width="200" height="60" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="746" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 5: Consents</text><text x="540" y="759.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GDPR + Cancellation</text><rect x="440" y="810" width="200" height="50" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="833" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/registration</text><text x="540" y="846.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/submit</text><rect x="400" y="890" width="280" height="100" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="540" y="910" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Database Transaction</text><text x="540" y="922" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">1. Update Guest + PWA Code</text><text x="540" y="934" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">2. Create Registration</text><text x="540" y="946" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">3. Create BillingInfo</text><text x="540" y="958" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">4. If Paired: Create Partner Guest</text><rect x="440" y="1020" width="200" height="50" stroke="#6772e5" fill="#eff0ff" opacity="1" stroke-width="2"/><text x="540" y="1043" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Redirect to</text><text x="540" y="1056.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><polygon points="540,1100 620,1140 540,1180 460,1140" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="1137" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="540" y="1151.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success?</text><rect x="200" y="1110" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="270" y="1136" font-size="11" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Cancel Page</text><text x="270" y="1149.2" font-size="11" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Can Retry</text><rect x="720" y="1110" width="160" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="800" y="1136" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Webhook</text><text x="800" y="1149.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">checkout.completed</text><rect x="720" y="1200" width="160" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="800" y="1226" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Update Status</text><text x="800" y="1239.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paid → approved</text><rect x="440" y="1290" width="200" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="540" y="1316" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success Page</text><text x="540" y="1329.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Ticket Generated</text><ellipse cx="540" cy="1405" rx="60" ry="25" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="540" y="1409" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><path d="M 540 150 L 540 180" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 230 L 540 260" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 460 300 L 340 300" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 620 300 L 720 300" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 270 330 L 420 330 L 420 390 L 540 390" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 800 330 L 640 330 L 640 390 L 540 390" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 460 L 540 490" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 570 L 540 600" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 620 640 L 720 640" stroke="#C4A24D" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-C4A24D)"/><path d="M 540 680 L 540 720" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 810 680 L 810 780 L 540 780" stroke="#C4A24D" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-C4A24D)"/><path d="M 540 780 L 540 810" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 860 L 540 890" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 990 L 540 1020" stroke="#6772e5" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6772e5)"/><path d="M 540 1070 L 540 1100" stroke="#6772e5" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6772e5)"/><path d="M 460 1140 L 340 1140" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><path d="M 620 1140 L 720 1140" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 800 1170 L 800 1200" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 720 1230 L 640 1230 L 640 1310" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 540 1350 L 540 1380" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="370" y="290" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paying_single</text><text x="630" y="290" font-size="10" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paying_paired</text><text x="640" y="630" font-size="10" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED</text><text x="550" y="695" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">SINGLE</text><text x="370" y="1130" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CANCEL</text><text x="640" y="1130" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">SUCCESS</text><rect x="40" y="420" width="180" height="120" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="130" y="444" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PRICING</text><text x="55" y="472" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Single: 20,000 HUF</text><text x="55" y="502" font-size="12" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paired: 40,000 HUF</text><text x="55" y="525" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">(2 persons, 1 ticket)</text><rect x="920" y="600" width="200" height="100" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="1"/><text x="1020" y="622" font-size="12" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PAIRED LOGIC</text><text x="930" y="645" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Create partner Guest</text><text x="930" y="657" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Link via paired_with_id</text><text x="930" y="669" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Both assigned to</text><text x="930" y="681" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">  same table later</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['paid-registration']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'admin-dashboard'" x-transition class="diagram-section" id="admin-dashboard">
          <div class="section-header">
            <span class="section-num">03</span>
            <h2 x-text="lang === 'hu' ? 'Admin Dashboard Folyamat' : 'Admin Dashboard Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram az adminisztrátor munkamenetét mutatja be a dashboard felületen. Az adminisztrátorok biztonságos hitelesítő adatokkal (bcrypt-hashelt jelszavak) jelentkeznek be, és átfogó vendégkezelési eszközökhöz férnek hozzá. A fő funkciók közé tartozik a vendéglista CSV importálása, egyéni vendégadatok kezelése, banki átutalások manuális jóváhagyása, ültetési rend konfigurálása interaktív drag-and-drop felületen, valamint valós idejű check-in statisztikák monitorozása. A dashboard betekintést nyújt az e-mail kézbesítési naplókba is a kommunikációs problémák elhárításához.' : 'This diagram maps the administrator\'s workflow through the dashboard interface. Administrators authenticate using secure credentials (bcrypt-hashed passwords) and gain access to comprehensive guest management tools. Key capabilities include importing guest lists via CSV, managing individual guest records, manually approving bank transfer payments, configuring seating arrangements through an interactive drag-and-drop interface, and monitoring real-time check-in statistics. The dashboard also provides visibility into email delivery logs for troubleshooting communication issues.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 620" width="100%" style="max-width:860px"><defs></defs><rect x="0" y="0" width="860" height="620" fill="#FAF8F5"/><text x="410" y="72" font-size="32" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - Admin Dashboard Structure</text><text x="410" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Site Map • 7 Core Modules</text><rect x="310" y="125" width="200" height="50" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="410" y="156" font-size="16" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Dashboard</text><path d="M 410 175 L 410 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 125 200 L 695 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 125 200 L 125 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 315 200 L 315 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 505 200 L 505 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 695 200 L 695 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><rect x="40" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="40" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="65" cy="235" rx="5" ry="5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="65" cy="246" rx="9" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="83" cy="235" rx="5" ry="5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="83" cy="246" rx="9" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><text x="60" y="274" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Guest List</text><text x="60" y="296" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• View &amp; filter</text><text x="60" y="309.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Edit details</text><text x="60" y="322.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Send magic links</text><text x="60" y="335.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Approve payments</text><rect x="230" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="230" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="250" y="238" width="20" height="14" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><rect x="250" y="228" width="20" height="10" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><path d="M 253 252 L 253 258" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 267 252 L 267 258" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="250" y="279" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Table Seating</text><text x="250" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Drag-and-drop</text><text x="250" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Assign guests</text><text x="250" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Visual floor plan</text><text x="250" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Export seating</text><rect x="420" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="420" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="440" y="242" width="6" height="16" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="450" y="234" width="6" height="24" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="460" y="228" width="6" height="30" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="440" y="279" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Statistics</text><text x="440" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Registration stats</text><text x="440" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Payment status</text><text x="440" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Check-in counts</text><text x="440" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Real-time data</text><rect x="610" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="610" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><path d="M 640 255 L 640 233" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><path d="M 640 233 L 632 241" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><path d="M 640 233 L 648 241" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><text x="630" y="279" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CSV Import</text><text x="630" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Upload CSV files</text><text x="630" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Preview &amp; validate</text><text x="630" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Map columns</text><text x="630" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Bulk import</text><path d="M 220 380 L 600 380" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 220 380 L 220 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 410 360 L 410 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 600 380 L 600 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><rect x="135" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="135" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="155" y="415" width="24" height="16" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><path d="M 155 415 L 167 423" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 179 415 L 167 423" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="155" y="454" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Email Templates</text><text x="155" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Magic link template</text><text x="155" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Ticket delivery</text><text x="155" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Confirmations</text><text x="155" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Preview &amp; test</text><rect x="325" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="325" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="356" cy="421" rx="11" ry="11" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><path d="M 351 422 L 356 427" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 356 427 L 364 417" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="345" y="454" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Check-in Log</text><text x="345" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Real-time feed</text><text x="345" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Filter by status</text><text x="345" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Override history</text><text x="345" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Export data</text><rect x="515" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="515" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="546" cy="421" rx="11" ry="11" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="547" y="427" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">?</text><text x="535" y="454" font-size="16" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Help &amp; Guide</text><text x="535" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• User guide</text><text x="535" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• FAQ section</text><text x="535" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Keyboard shortcuts</text><text x="535" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Contact support</text><text x="690" y="57" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">v1.0 MVP</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['admin-dashboard']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'checkin-staff'" x-transition class="diagram-section" id="checkin-staff">
          <div class="section-header">
            <span class="section-num">04</span>
            <h2 x-text="lang === 'hu' ? 'Check-in Staff Folyamat' : 'Check-in Staff Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a mobil check-in alkalmazás munkafolyamatát részletezi, amelyet az esemény személyzete használ a gála napján. A vendég QR kódjának beolvasásakor a rendszer validálja a JWT tokent és színkódolt eredménykártyákat jelenít meg: a zöld érvényes, check-in-re kész jegyet jelöl, a sárga duplikált beolvasásra figyelmeztet (az eredeti check-in időpontját és a személyzet nevét mutatva), a piros pedig érvénytelen vagy lejárt kódot jelez. A rendszer adatbázis megszorításokkal akadályozza meg a duplikált check-in-eket, miközben jogosult adminisztrátoroknak felülbírálási lehetőséget biztosít kivételes helyzetekben.' : 'This diagram details the mobile check-in application workflow used by event staff on the day of the gala. When scanning a guest\'s QR code, the system validates the JWT token and displays color-coded result cards: green indicates a valid ticket ready for check-in, yellow warns of a duplicate scan (showing original check-in time and staff member), and red signals an invalid or expired code. The system prevents duplicate check-ins through database constraints while providing authorized administrators with override capabilities for exceptional situations.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1285 1005" width="100%" style="max-width:1285px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker></defs><rect x="0" y="0" width="1285" height="1005" fill="#FAF8F5"/><text x="590" y="72" font-size="32" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - Check-in Staff Flow</text><text x="590" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Mobile QR Scanner Workflow</text><ellipse cx="590" cy="145" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="149" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><rect x="480" y="210" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="480" y="210" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="241" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Scan QR Code</text><path d="M 590 175 L 590 205" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="480" y="300" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="480" y="300" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="331" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Validate JWT Token</text><path d="M 590 270 L 590 295" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="590,390 680,435 590,480 500,435" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="590" y="432" font-size="12" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><text x="590" y="446.4" font-size="12" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status?</text><path d="M 590 360 L 590 385" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="240" y="437" font-size="12" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="590" y="507" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Duplicate</text><text x="955" y="437" font-size="12" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Invalid</text><rect x="40" y="520" width="240" height="100" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="160" y="547" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GREEN CARD</text><text x="160" y="561.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="160" y="575.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid Ticket</text><text x="160" y="590.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Name &amp; Segment</text><path d="M 500 435 L 280 520" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="470" y="540" width="240" height="100" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="590" y="567" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">YELLOW CARD</text><text x="590" y="581.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="590" y="595.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Already Checked In</text><text x="590" y="610.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Original Time &amp; Staff</text><path d="M 590 485 L 590 535" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="900" y="520" width="240" height="100" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="1020" y="547" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">RED CARD</text><text x="1020" y="561.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="1020" y="575.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Invalid/Expired QR</text><text x="1020" y="590.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Error Message</text><path d="M 680 435 L 900 520" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><rect x="80" y="660" width="160" height="45" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="160" y="686" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Check In</text><path d="M 160 625 L 160 655" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="510" y="680" width="160" height="45" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><rect x="510" y="680" width="5" height="45" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="590" y="706" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Override</text><path d="M 590 645 L 590 675" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="940" y="660" width="160" height="45" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><rect x="940" y="660" width="5" height="45" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="1020" y="686" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Scan Again</text><path d="M 1020 625 L 1020 655" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><rect x="270" y="780" width="220" height="55" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="780" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="380" y="811" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Record Check-in</text><path d="M 160 710 L 310 775" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 520 730 L 420 775" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="270" y="870" width="220" height="55" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="870" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="380" y="901" font-size="14" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success!</text><path d="M 380 840 L 380 865" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><path d="M 1105 682 L 1205 682" stroke="#e03131" fill="none" opacity="1" stroke-width="2" /><text x="1120" y="670" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">→ Back to Scan</text><path d="M 270 897 L 170 897" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" /><text x="80" y="900" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">← Next Guest</text><text x="770" y="57" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">v1.0</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['checkin-staff']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'state-machine'" x-transition class="diagram-section" id="state-machine">
          <div class="section-header">
            <span class="section-num">05</span>
            <h2 x-text="lang === 'hu' ? 'Állapotgép Diagram' : 'State Machine Diagram'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram átfogó képet nyújt a rendszeren belüli összes entitás állapotátmenetéről. A vendég státusza a meghívottól a regisztrálton, fizetésre vár, fizetett, jegy kiállítva állapotokon át halad a bejelentkezett állapotig. A partner vendégek hasonló, de egyszerűsített utat követnek. A fizetési állapotok nyomon követik a tranzakció életciklusát, beleértve a függőben lévő, feldolgozás alatt, befejezett, sikertelen és visszatérített kimeneteleket. Tartalmazza az Epic 7 jelentkező állapotait: jelentkezés → jóváhagyásra vár → elfogadva/elutasítva 72 órás magic link lejárattal.' : 'This diagram provides a comprehensive view of all entity state transitions within the system. Guest status progresses from invited through registered, awaiting payment, paid, ticket issued, and finally checked in. Partner guests follow a similar but simplified path. Payment states track the transaction lifecycle including pending, processing, completed, failed, and refunded outcomes. Table assignments transition between available, partially filled, and full capacity. Includes Epic 7 applicant states: apply → pending_approval → approved/rejected with 72-hour magic link expiry.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1136 876" width="100%" style="max-width:1136px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-1971c2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#1971c2"/></marker></defs><rect x="0" y="0" width="1136" height="876" fill="#FAF8F5"/><text x="580" y="68" font-size="28" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - State Machine Diagram</text><text x="580" y="89" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Including Partner + Applicant Guest States</text><text x="40" y="126" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY GUEST STATUS</text><ellipse cx="90" cy="175" rx="50" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="90" y="178" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">invited</text><path d="M 140 175 L 200 175" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="145" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="255" cy="175" rx="55" ry="25" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="255" y="178" font-size="13" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">registered</text><path d="M 310 175 L 370 175" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="312" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">VIP/pay</text><ellipse cx="425" cy="175" rx="55" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="425" y="178" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">approved</text><path d="M 480 175 L 540 175" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="485" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">issue QR</text><ellipse cx="600" cy="175" rx="60" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="600" y="178" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ticket_issued</text><ellipse cx="250" cy="245" rx="50" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="250" y="248" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">declined</text><path d="M 90 200 L 90 225 L 200 225" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="110" y="225" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">decline</text><text x="40" y="306" font-size="16" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PARTNER GUEST STATUS (Paired Tickets)</text><ellipse cx="90" cy="355" rx="50" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="90" y="358" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">linked</text><path d="M 140 355 L 190 355" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="138" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">send link</text><ellipse cx="250" cy="355" rx="60" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="250" y="357" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending_form</text><path d="M 310 355 L 360 355" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="313" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="425" cy="355" rx="65" ry="25" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="425" y="357" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">form_submitted</text><path d="M 490 355 L 540 355" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="488" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">wait pay</text><ellipse cx="605" cy="355" rx="65" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="605" y="357" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">waiting_payment</text><path d="M 670 355 L 720 355" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="668" y="345" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid</text><ellipse cx="780" cy="355" rx="60" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="780" y="357" font-size="12" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ticket_issued</text><path d="M 255 200 L 255 330" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="263" y="269" font-size="9" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY creates</text><text x="263" y="279.8" font-size="9" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paired ticket</text><path d="M 600 200 L 600 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="608" y="259" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY payment</text><text x="608" y="269.8" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">unlocks PARTNER</text><text x="40" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAYMENT STATUS</text><ellipse cx="90" cy="475" rx="50" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="90" y="478" font-size="13" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending</text><path d="M 140 475 L 220 475" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="150" y="464" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Stripe/admin</text><ellipse cx="260" cy="475" rx="40" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="260" y="478" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paid</text><ellipse cx="90" cy="555" rx="50" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="90" y="558" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">failed</text><path d="M 90 500 L 90 530" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="98" y="517" font-size="9" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">error</text><ellipse cx="270" cy="555" rx="50" ry="25" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="270" y="558" font-size="13" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">refunded</text><path d="M 260 500 L 260 530" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="268" y="517" font-size="9" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">refund</text><rect x="40" y="595" width="290" height="50" stroke="#f08c00" fill="none" opacity="1" stroke-width="1"/><text x="50" y="613" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED TICKET: Primary may have</text><text x="50" y="625" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1 or 2 payments (different methods)</text><text x="380" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">TICKET TYPES</text><rect x="380" y="450" width="6" height="35" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="386" y="450" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="472" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">vip_free</text><text x="505" y="470" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Free, instant QR</text><rect x="380" y="490" width="6" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="386" y="490" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="512" font-size="12" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid_single</text><text x="505" y="510" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1 guest, payment</text><rect x="380" y="530" width="6" height="35" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="386" y="530" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="552" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid_paired</text><text x="505" y="550" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">2 guests, +partner</text><rect x="380" y="570" width="6" height="35" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="386" y="570" width="110" height="35" stroke="#f08c00" fill="none" opacity="1" stroke-width="1"/><text x="398" y="592" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">partner</text><text x="505" y="590" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Linked to primary</text><text x="660" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">TABLE STATUS</text><rect x="660" y="450" width="90" height="40" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="705" y="473" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">available</text><rect x="760" y="450" width="60" height="40" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="790" y="473" font-size="11" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">full</text><rect x="830" y="450" width="80" height="40" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="870" y="473" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">reserved</text><text x="660" y="510" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED: Primary + Partner assigned</text><text x="660" y="522" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">to same table (2 seats together)</text><text x="660" y="566" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CHECK-IN EVENT</text><ellipse cx="715" cy="607.5" rx="55" ry="22.5" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="715" y="609" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Not checked</text><path d="M 770 607 L 820 607" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="775" y="597" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">QR scan</text><ellipse cx="870" cy="607.5" rx="50" ry="22.5" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="870" y="609" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Checked in</text><text x="660" y="647" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Primary &amp; Partner checked in separately</text><text x="660" y="657.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">(each has own QR code)</text><text x="680" y="126" font-size="16" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICANT STATUS (Epic 7)</text><ellipse cx="720" cy="175" rx="40" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="720" y="178" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">apply</text><path d="M 760 175 L 800 175" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><text x="762" y="164" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="865" cy="175" rx="65" ry="25" stroke="#1971c2" fill="none" opacity="1" stroke-width="2"/><text x="865" y="176" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending_approval</text><path d="M 865 200 L 865 225" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="873" y="214" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">approve</text><ellipse cx="865" cy="250" rx="65" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="865" y="253" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">approved</text><text x="800" y="289" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">→ magic link sent</text><text x="800" y="299.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">→ 72h expiry</text><path d="M 930 175 L 960 175" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="933" y="164" font-size="9" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">reject</text><ellipse cx="1005" cy="175" rx="45" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="1005" y="178" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">rejected</text><rect x="40" y="680" width="6" height="115" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="680" width="1010" height="115" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="60" y="700" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">COMPLETE GUEST JOURNEYS</text><text x="60" y="721" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY: invited → registered → (VIP: approved | Paying: pending → paid) → approved → ticket_issued → checked_in</text><text x="60" y="746" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PARTNER: linked → pending_form → form_submitted → waiting_payment → (primary pays) → ticket_issued → checked_in</text><text x="60" y="771" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICANT: apply → pending_approval → (admin: approve | reject) → approved → magic_link (72h) → registered → ... (as PRIMARY)</text><text x="60" y="791" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Partner depends on Primary payment • Applicant becomes Primary after admin approval</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['state-machine']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'payment-flow'" x-transition class="diagram-section" id="payment-flow">
          <div class="section-header">
            <span class="section-num">06</span>
            <h2 x-text="lang === 'hu' ? 'Fizetési Folyamat' : 'Payment Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a vendégek számára elérhető kettős fizetési feldolgozási útvonalakat vázolja fel. Az elsődleges útvonal Stripe Checkout Session-öket használ azonnali kártyás fizetésekhez, webhook kezelőkkel validálva a tranzakciós aláírásokat és valós időben frissítve a vendég státuszát. A másodlagos útvonal banki átutalásokat kezel, megjelenítve a számlainformációkat a vendégeknek és adminisztrátori manuális jóváhagyást igényelve az összeg beérkezése után. Mindkét útvonal a jegygenerálásnál találkozik, ahol a rendszer JWT-kódolt QR kódokat hoz létre és automatikus e-mail kézbesítést indít.' : 'This diagram outlines the dual payment processing paths available to guests. The primary path utilizes Stripe Checkout Sessions for immediate card payments, with webhook handlers validating transaction signatures and updating guest status in real-time. The secondary path accommodates bank transfers, displaying account details to guests and requiring manual administrator approval once funds are received. Both paths converge at ticket generation, where the system creates JWT-encoded QR codes and triggers automated email delivery.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1160 995" width="100%" style="max-width:1160px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker></defs><rect x="0" y="0" width="1160" height="995" fill="#FAF8F5"/><text x="580" y="64" font-size="24" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - Payment Flow</text><text x="580" y="89" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single &amp; Paired Ticket Processing</text><ellipse cx="580" cy="132.5" rx="60" ry="22.5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="580" y="136" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><path d="M 580 155 L 580 185" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="580,185 660,225 580,265 500,225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="580" y="224" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><text x="580" y="238.4" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type?</text><path d="M 500 225 L 280 275" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="320" y="236" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Single Ticket</text><path d="M 660 225 L 880 275" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="760" y="236" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paired Ticket</text><text x="205" y="294" font-size="14" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">─── SINGLE TICKET FLOW ───</text><polygon points="280,310 355,345 280,380 205,345" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="280" y="342" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="280" y="354" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><path d="M 205 345 L 140 380" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="125" y="349" font-size="9" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card</text><path d="M 355 345 L 420 380" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="385" y="349" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank</text><rect x="70" y="380" width="5" height="45" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="75" y="380" width="130" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="140" y="403" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><rect x="355" y="380" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="360" y="380" width="130" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="425" y="403" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank Transfer</text><path d="M 140 425 L 230 460" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 425 425 L 325 460" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="180" y="460" width="5" height="45" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="185" y="460" width="190" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="280" y="480" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Process Payment</text><text x="280" y="492" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(1 Transaction)</text><path d="M 280 505 L 280 535" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="180" y="535" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="185" y="535" width="190" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="280" y="558" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Generate QR + Email</text><text x="880" y="294" font-size="14" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">─── PAIRED TICKET FLOW ───</text><text x="780" y="325" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SELECT FOR OWN TICKET</text><polygon points="780,335 855,365 780,395 705,365" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="780" y="362" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="780" y="374" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><rect x="635" y="405" width="5" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="640" y="405" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="677.5" y="425" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card</text><rect x="845" y="405" width="5" height="35" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="850" y="405" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="887.5" y="425" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank</text><path d="M 720 375 L 677 405" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><path d="M 840 375 L 887 405" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="780" y="425" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OR</text><path d="M 780 440 L 780 465" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="780" y="480" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SELECT FOR PARTNER TICKET</text><polygon points="780,490 855,520 780,550 705,520" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="780" y="517" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="780" y="529" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><rect x="635" y="560" width="5" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="640" y="560" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="677.5" y="580" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card</text><rect x="845" y="560" width="5" height="35" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="850" y="560" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="887.5" y="580" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank</text><path d="M 720 530 L 677 560" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><path d="M 840 530 L 887 560" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="780" y="580" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OR</text><path d="M 780 595 L 780 620" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="675" y="620" width="5" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="680" y="620" width="200" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="642" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Process Payments</text><text x="780" y="654" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(1 or 2 Transactions</text><text x="780" y="666" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">based on method mix)</text><rect x="900" y="615" width="180" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="910" y="629" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Same method = 1 tx</text><text x="910" y="639.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card+Card → 1 Stripe</text><text x="910" y="650.6" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank+Bank → 1 transfer</text><text x="910" y="661.4" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start"></text><text x="910" y="672.2" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Mixed = 2 tx</text><path d="M 780 685 L 780 710" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="675" y="710" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="680" y="710" width="200" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="730" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PRIMARY: QR + Email</text><text x="780" y="742" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(immediately)</text><path d="M 780 755 L 780 780" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="675" y="780" width="5" height="45" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="680" y="780" width="200" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="800" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PARTNER: QR + Email</text><text x="780" y="812" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(to partner's email)</text><path d="M 280 580 L 480 880" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 780 825 L 480 880" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><ellipse cx="480" cy="892.5" rx="60" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="480" y="897" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><rect x="40" y="630" width="200" height="180" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="140" y="652" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LEGEND</text><ellipse cx="61" cy="676" rx="6" ry="6" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><text x="75" y="678" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card (Stripe)</text><ellipse cx="61" cy="696" rx="6" ry="6" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="75" y="698" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank Transfer</text><ellipse cx="61" cy="716" rx="6" ry="6" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="75" y="718" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Partner Flow</text><ellipse cx="61" cy="736" rx="6" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="75" y="738" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Decision/Process</text><text x="50" y="769" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Primary guest can select</text><text x="50" y="779.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DIFFERENT payment methods</text><text x="50" y="790.6" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">for own + partner tickets</text><rect x="900" y="770" width="180" height="60" stroke="#c9a227" fill="none" opacity="1" stroke-width="1"/><text x="990" y="789" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Both PRIMARY + PARTNER</text><text x="990" y="799.8" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">assigned to SAME TABLE</text><text x="990" y="810.6" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(automatically linked)</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['payment-flow']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'system-architecture'" x-transition class="diagram-section" id="system-architecture">
          <div class="section-header">
            <span class="section-num">07</span>
            <h2 x-text="lang === 'hu' ? 'Rendszer Architektúra' : 'System Architecture'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a technikai architektúrát mutatja be négy különálló rétegben. A kliens réteg magában foglalja a vendég böngészőt, admin dashboardot, check-in staff mobilt, email klienst, Stripe checkoutot és PWA vendég appot. Az alkalmazás réteg középpontjában a Next.js 14+ áll App Router-rel, React komponensekkel a regisztráció, admin, check-in, PWA és apply route-okhoz. Az üzleti logika a lib/services-ben található. Az adatréteg Prisma ORM-et használ MySQL 8.0-val (11 modell). Külső szolgáltatások: Stripe API, SMTP/Nodemailer, QR könyvtárak és Firebase FCM push értesítésekhez.' : 'This diagram presents the technical architecture across four distinct layers. The client layer comprises guest browser, admin dashboard, check-in staff mobile, email client, Stripe checkout, and PWA guest app. The application layer centers on Next.js 14+ with App Router and includes React components for registration, admin, check-in, PWA and apply routes. Business logic resides in lib/services. The data layer utilizes Prisma ORM with MySQL 8.0 (11 models). External services include Stripe API, SMTP/Nodemailer, QR libraries, and Firebase FCM for push notifications.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1060 730" width="100%" style="max-width:1060px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker></defs><rect x="0" y="0" width="1060" height="730" fill="#FAF8F5"/><text x="530" y="64" font-size="24" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - System Architecture</text><text x="40" y="104" font-size="14" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CLIENT LAYER</text><rect x="40" y="110" width="940" height="2" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="40" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="113" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Browser</text><text x="113" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Registration</text><text x="113" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment Status</text><rect x="200" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="206" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="273" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Dashboard</text><text x="273" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Management</text><text x="273" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Seating, Reports</text><rect x="360" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="366" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="433" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Check-in Staff</text><text x="433" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Mobile PWA</text><text x="433" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Scanner</text><rect x="520" y="125" width="6" height="65" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="526" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="593" y="146" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email Client</text><text x="593" y="159.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Links</text><text x="593" y="172.4" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">E-Tickets</text><rect x="680" y="125" width="6" height="65" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="686" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="753" y="146" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><text x="753" y="159.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Hosted Page</text><text x="753" y="172.4" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card Payment</text><rect x="840" y="125" width="6" height="65" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><rect x="846" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="913" y="146" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PWA Guest App</text><text x="913" y="159.2" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Service Worker</text><text x="913" y="172.4" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Offline QR/Push</text><path d="M 113 190 L 113 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 273 190 L 273 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 433 190 L 433 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="40" y="249" font-size="14" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICATION LAYER (Next.js 14+)</text><rect x="40" y="255" width="940" height="2" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="40" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="46" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="55" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">React Components</text><text x="55" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">app/</text><text x="55" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── (auth)/register</text><text x="55" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── admin/</text><text x="55" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── checkin/</text><text x="55" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── pwa/ (Epic 6)</text><text x="55" y="365" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">└── apply/ (Epic 7)</text><rect x="240" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="246" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="255" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">API Route Handlers</text><text x="255" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">app/api/</text><text x="255" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── registration/</text><text x="255" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── stripe/webhook</text><text x="255" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── checkin/</text><text x="255" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">└── admin/</text><rect x="440" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="446" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="455" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Business Logic</text><text x="455" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">lib/services/</text><text x="455" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── registration.ts</text><text x="455" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── payment.ts</text><text x="455" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── checkin.ts</text><text x="455" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">└── seating.ts</text><rect x="640" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="646" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="655" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Utilities &amp; Auth</text><text x="655" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">lib/</text><text x="655" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── auth/magic-link</text><text x="655" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">├── db/prisma</text><text x="655" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">└── utils/qr-code</text><text x="655" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start"></text><text x="655" y="365" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">middleware.ts</text><path d="M 220 330 L 440 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-2f9e44)"/><path d="M 420 330 L 440 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-2f9e44)"/><text x="40" y="424" font-size="14" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DATA LAYER</text><rect x="40" y="430" width="380" height="2" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="40" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="445" width="134" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="113" y="466" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Prisma ORM</text><text x="113" y="479.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type-safe queries</text><text x="113" y="492.4" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Migrations</text><rect x="200" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="206" y="445" width="214" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="313" y="460" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">MySQL 8.0 (Docker)</text><text x="313" y="472" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">11 Prisma Models</text><text x="313" y="484" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">guests, registrations, payments, checkins</text><text x="313" y="496" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">tables, users, billing_info, email_*</text><path d="M 180 482 L 200 482" stroke="#c9a227" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-c9a227)"/><text x="440" y="424" font-size="14" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">EXTERNAL SERVICES</text><rect x="440" y="430" width="540" height="2" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="440" y="445" width="6" height="75" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="446" y="445" width="114" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="503" y="466" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe API</text><text x="503" y="479.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Checkout</text><text x="503" y="492.4" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Webhooks</text><rect x="580" y="445" width="6" height="75" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="586" y="445" width="114" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="643" y="466" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SMTP</text><text x="643" y="479.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Nodemailer</text><text x="643" y="492.4" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Links</text><rect x="720" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="726" y="445" width="94" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="773" y="466" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Libs</text><text x="773" y="479.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">qrcode</text><text x="773" y="492.4" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">html5-qrcode</text><rect x="840" y="445" width="6" height="75" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><rect x="846" y="445" width="134" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="913" y="466" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Firebase FCM</text><text x="913" y="479.2" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Push Notifications</text><text x="913" y="492.4" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(Epic 6)</text><path d="M 533 390 L 113 445" stroke="#c9a227" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-c9a227)"/><path d="M 533 390 L 533 445" stroke="#6741d9" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-6741d9)"/><text x="40" y="554" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">INFRASTRUCTURE</text><rect x="40" y="560" width="940" height="2" stroke="#525252" fill="#525252" opacity="1" stroke-width="2"/><rect x="40" y="575" width="140" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="110" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Vercel (Next.js)</text><rect x="200" y="575" width="140" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="270" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Docker (MySQL dev)</text><rect x="360" y="575" width="150" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="435" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PlanetScale (MySQL)</text><rect x="530" y="575" width="100" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="580" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">HTTPS (auto)</text><rect x="650" y="575" width="170" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="735" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Environment (.env.local)</text><text x="510" y="641" font-size="11" fill="#525252" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Tech Stack: Next.js 14+ | TypeScript | Prisma ORM | MySQL 8.0 | Stripe | Nodemailer | Firebase FCM | Tailwind CSS | PWA</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['system-architecture']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'pwa-guest-app'" x-transition class="diagram-section" id="pwa-guest-app">
          <div class="section-header">
            <span class="section-num">08</span>
            <h2 x-text="lang === 'hu' ? 'PWA Vendég App Folyamat (Epic 6)' : 'PWA Guest App Flow (Epic 6)'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a regisztrált vendégek számára készült Progressive Web App folyamatát mutatja be. A vendégek egyedi kódjukkal (CEOG-XXXXXX formátum) lépnek be, amit e-mailben kaptak. Az app funkcói: dashboard esemény infóval és gyors műveletekkel, profil nézet/szerkesztés személyes adatokhoz, offline-képes QR jegy megjelenítés service worker cache-eléssel, és asztal-hozzárendelés információ. A PWA támogatja a push értesítéseket Firebase FCM-en keresztül és "Powered by MyForge Labs" brandinget jelenít meg. Offline működik a kritikus jegy megjelenítés funkcióhoz.' : 'This diagram shows the Progressive Web App flow for registered guests. Guests authenticate using their unique code (CEOG-XXXXXX format) received via email. The app provides: dashboard with event info and quick actions, profile view/edit for personal details, offline-capable QR ticket display via service worker caching, and table assignment information. The PWA supports push notifications via Firebase FCM and displays "Powered by MyForge Labs" branding. Works offline for critical ticket display functionality.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1160 960" width="100%" style="max-width:1160px"><defs><marker id="ah-1971c2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#1971c2"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-e67700" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e67700"/></marker></defs><rect x="0" y="0" width="1160" height="960" fill="#FAF8F5"/><text x="630" y="72" font-size="32" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - PWA Guest App Flow</text><text x="630" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Epic 6 - Mobile PWA with Offline QR &amp; Push Notifications</text><ellipse cx="630" cy="145" rx="50" ry="25" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="630" y="149" font-size="14" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><rect x="520" y="210" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="520" y="210" width="5" height="55" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="630" y="232" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Open PWA</text><text x="630" y="246.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa URL or home screen</text><path d="M 630 175 L 630 205" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><polygon points="630,300 705,340 630,380 555,340" stroke="#1971c2" fill="none" opacity="1" stroke-width="2"/><text x="630" y="337" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Cached</text><text x="630" y="351.4" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Session?</text><path d="M 630 270 L 630 295" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="260" y="312" width="200" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="260" y="312" width="5" height="55" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="362.5" y="334" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Enter Auth Code</text><text x="362.5" y="348.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEOG-XXXXXX</text><path d="M 550 340 L 465 340" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><text x="505" y="331" font-size="11" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">NO</text><polygon points="360,410 435,450 360,490 285,450" stroke="#1971c2" fill="none" opacity="1" stroke-width="2"/><text x="360" y="447" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="360" y="461.4" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Code?</text><path d="M 360 372 L 360 405" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="60" y="422" width="160" height="55" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="140" y="444" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Invalid Code</text><text x="140" y="458.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Show Error</text><path d="M 280 450 L 225 450" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="250" y="440" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">INVALID</text><path d="M 140 415 L 140 345 L 250 345 L 250 410" stroke="#e03131" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-e03131)"/><text x="185" y="340" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Retry</text><rect x="520" y="420" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="520" y="420" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="630" y="442" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Fetch Guest Data</text><text x="630" y="456.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">&amp; QR Ticket</text><path d="M 440 450 L 515 450" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="475" y="440" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VALID</text><path d="M 705 340 L 785 340 L 785 440 L 640 440" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="735" y="331" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">YES</text><rect x="520" y="515" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="520" y="515" width="5" height="55" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="630" y="537" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Service Worker</text><text x="630" y="551.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Cache Data for Offline</text><path d="M 630 480 L 630 510" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="520" y="610" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="520" y="610" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="630" y="632" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Display QR Ticket</text><text x="630" y="646.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(Works Offline)</text><path d="M 630 575 L 630 605" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><polygon points="630,700 705,740 630,780 555,740" stroke="#1971c2" fill="none" opacity="1" stroke-width="2"/><text x="630" y="737" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Push</text><text x="630" y="751.4" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Permission?</text><path d="M 630 670 L 630 695" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="780" y="713" width="200" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="780" y="713" width="5" height="55" stroke="#e67700" fill="#e67700" opacity="1" stroke-width="2"/><text x="882.5" y="735" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Subscribe to FCM</text><text x="882.5" y="749.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Save push_token</text><path d="M 710 740 L 775 740" stroke="#e67700" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e67700)"/><text x="750" y="730" font-size="10" fill="#e67700" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GRANTED</text><ellipse cx="630" cy="855" rx="50" ry="25" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="630" y="859" font-size="14" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ready</text><path d="M 630 785 L 630 825" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="620" y="800" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DENIED</text><path d="M 880 773 L 880 855 L 680 855" stroke="#e67700" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e67700)"/><text x="40" y="614" font-size="14" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">LEGEND</text><rect x="40" y="625" width="180" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="50" y="646" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">🔵 PWA/Auth Flow</text><text x="50" y="659.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">🟢 Success Path</text><text x="50" y="672.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">🔴 Error Path</text><text x="50" y="685.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">🟠 Firebase FCM</text><text x="50" y="698.8" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start"></text><text x="50" y="712" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Code: CEOG-XXXXXX</text><text x="50" y="725.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">(6 uppercase letters)</text><text x="40" y="801" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">OFFLINE CAPABLE:</text><text x="40" y="814.2" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• QR Ticket Display</text><text x="40" y="827.4" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Guest Profile</text><text x="40" y="840.6" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Event Info</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['pwa-guest-app']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'applicant-flow'" x-transition class="diagram-section" id="applicant-flow">
          <div class="section-header">
            <span class="section-num">09</span>
            <h2 x-text="lang === 'hu' ? 'Jelentkezési Folyamat (Epic 7)' : 'Applicant Flow (Epic 7)'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram az Epic 7-ben bevezetett nem-meghívott vendég jelentkezési folyamatot részletezi. A jelentkezők meglátogatják a nyilvános /apply oldalt, kitöltik a jelentkezési űrlapot (név, email, telefon, cég, pozíció), és beküldik. Az admin értesítést kap és a dashboardon ellenőrzi a jelentkezéseket. Az admin ELFOGADHATJA (guest_type = paying, 72 órás magic link küldés) vagy ELUTASÍTHATJA (elutasítási indok megadása, elutasító email küldés). Az elfogadott jelentkezők a standard fizetős regisztrációs folyamattal folytatják. A swimlane design egyértelműen elkülöníti a Jelentkező és Admin sávokat.' : 'This diagram details the non-invited guest application workflow introduced in Epic 7. Applicants visit the public /apply page, fill out the application form (name, email, phone, company, position), and submit. Admin receives notification and reviews applications in the dashboard. Admin can APPROVE (sets guest_type to paying, sends 72-hour magic link) or REJECT (enters rejection_reason, sends rejection email). Approved applicants continue through the standard paid registration flow. Swimlane design shows Applicant and Admin lanes clearly separated.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1070 855" width="100%" style="max-width:1070px"><defs><marker id="ah-1971c2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#1971c2"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker></defs><rect x="0" y="0" width="1070" height="855" fill="#FAF8F5"/><text x="630" y="72" font-size="32" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - Applicant Flow</text><text x="630" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Epic 7 - Non-invited Guest Application &amp; Admin Approval</text><ellipse cx="380" cy="155" rx="50" ry="25" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="380" y="159" font-size="14" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><rect x="270" y="220" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="220" width="5" height="55" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="380" y="242" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Visit /apply</text><text x="380" y="256.4" font-size="12" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(Public Page)</text><path d="M 380 185 L 380 215" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="270" y="315" width="220" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="315" width="5" height="75" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="380" y="336" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Fill Application Form</text><text x="380" y="349.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">name, email, phone</text><text x="380" y="362.4" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">company, position</text><path d="M 380 280 L 380 310" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="270" y="430" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="430" width="5" height="55" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="380" y="451" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Submit Application</text><text x="380" y="464.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status: pending_approval</text><path d="M 380 395 L 380 425" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><rect x="270" y="525" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="525" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="380" y="546" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Show Confirmation</text><text x="380" y="559.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">&quot;Application Received&quot;</text><path d="M 380 490 L 380 520" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><ellipse cx="380" cy="645" rx="50" ry="25" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><text x="380" y="646" font-size="11" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Wait for</text><text x="380" y="659.2" font-size="11" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin</text><path d="M 380 585 L 380 615" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><path d="M 540 120 L 540 720" stroke="#525252" fill="none" opacity="1" stroke-width="2" /><text x="370" y="117" font-size="12" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">APPLICANT (Guest)</text><text x="780" y="117" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ADMIN (Dashboard)</text><ellipse cx="780" cy="245" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="780" y="246" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">New</text><text x="780" y="259.2" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Application</text><path d="M 495 457 L 725 257" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="600" y="340" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Notification</text><rect x="670" y="310" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="670" y="310" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="780" y="331" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Review Application</text><text x="780" y="344.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">in Admin Dashboard</text><path d="M 780 275 L 780 305" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="780,405 855,445 780,485 705,445" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="780" y="442" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin</text><text x="780" y="456.4" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Decision?</text><path d="M 780 370 L 780 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="570" y="530" width="200" height="55" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><rect x="570" y="530" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="672.5" y="551" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">APPROVE</text><text x="672.5" y="564.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Set guest_type = paying</text><path d="M 705 450 L 655 525" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="650" y="490" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">APPROVE</text><rect x="790" y="530" width="200" height="55" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><rect x="790" y="530" width="5" height="55" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="892.5" y="551" font-size="11" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">REJECT</text><text x="892.5" y="564.2" font-size="11" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Enter rejection_reason</text><path d="M 855 450 L 905 525" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="885" y="490" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">REJECT</text><rect x="570" y="625" width="200" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="570" y="625" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="672.5" y="646" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Magic Link</text><text x="672.5" y="659.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(72h expiry)</text><path d="M 670 590 L 670 620" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="790" y="625" width="200" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="790" y="625" width="5" height="55" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="892.5" y="646" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Rejection</text><text x="892.5" y="659.2" font-size="11" fill="#e5e5e5" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email with Reason</text><path d="M 890 590 L 890 620" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><rect x="570" y="720" width="200" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="672.5" y="741" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Registration Flow</text><text x="672.5" y="754.2" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(See 01-guest-reg...)</text><path d="M 670 685 L 670 715" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><ellipse cx="890" cy="745" rx="50" ry="25" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="890" y="747" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Rejected</text><path d="M 890 685 L 890 715" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="40" y="144" font-size="14" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">STATUS FLOW</text><rect x="40" y="155" width="180" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="50" y="176" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">guest_type: applicant</text><text x="50" y="189.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">↓</text><text x="50" y="202.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">pending_approval</text><text x="50" y="215.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">↓</text><text x="50" y="228.8" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">approved → invited</text><text x="50" y="242" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">OR rejected</text><text x="40" y="314" font-size="14" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">NOTES</text><rect x="40" y="325" width="180" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="50" y="345" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• /apply is public URL</text><text x="50" y="357" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• No magic link needed</text><text x="50" y="369" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• 72h link expiry</text><text x="50" y="381" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• Admin notified on</text><text x="50" y="393" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">  new applications</text><text x="50" y="405" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">• rejection_reason</text><text x="50" y="417" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">  saved in DB</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['applicant-flow']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>
    </main>
  </div>

  <footer class="no-print">
    <span>CEO Gala 2026</span> &nbsp;|&nbsp; <span x-text="t.footerText"></span> &nbsp;|&nbsp; <span x-text="t.footerGenerated"></span>: Dec 5, 2025
  </footer>

  <script>
    const texts = {"en":{"pageTitle":"CEO Gala 2026","pageSubtitle":"System Architecture Documentation","sidebarTitle":"Diagrams","overview":"Overview","notes":"Notes","notesPlaceholder":"Add your notes about this diagram...","notesHint":"Notes are saved automatically in your browser","btnDark":"Dark","btnLight":"Light","btnExport":"Export CSV","btnImport":"Import CSV","btnPrint":"Print","footerText":"Event Registration System","footerGenerated":"Generated","importSuccess":"Notes imported successfully!","importError":"Import error"},"hu":{"pageTitle":"CEO Gala 2026","pageSubtitle":"Rendszer Architektúra Dokumentáció","sidebarTitle":"Diagramok","overview":"Áttekintés","notes":"Megjegyzések","notesPlaceholder":"Írja ide a megjegyzéseit erről a diagramról...","notesHint":"A megjegyzések automatikusan mentődnek a böngészőben","btnDark":"Sötét","btnLight":"Világos","btnExport":"CSV Export","btnImport":"CSV Import","btnPrint":"Nyomtatás","footerText":"Esemény Regisztrációs Rendszer","footerGenerated":"Generálva","importSuccess":"Megjegyzések sikeresen importálva!","importError":"Importálási hiba"}};
    function appData() {
      return {
        darkMode: false,
        lang: 'en',
        activeTab: 'vip-registration',
        notes: JSON.parse(localStorage.getItem('ceogala-diagram-notes') || '{}'),
        get t() { return texts[this.lang]; },
        init() {
          const dm = localStorage.getItem('ceogala-darkMode');
          if (dm) this.darkMode = dm === 'true';
          const lg = localStorage.getItem('ceogala-lang');
          if (lg) this.lang = lg;
          this.$watch('darkMode', v => localStorage.setItem('ceogala-darkMode', v));
          this.$watch('lang', v => localStorage.setItem('ceogala-lang', v));
        },
        toggleLang() { this.lang = this.lang === 'en' ? 'hu' : 'en'; },
        saveNotes() { localStorage.setItem('ceogala-diagram-notes', JSON.stringify(this.notes)); },
        scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); },
        exportNotes() {
          const rows = [['Diagram ID', 'Title', 'Notes']];
          const titles = {'vip-registration':this.lang==='hu'?'VIP Regisztrációs Folyamat':'VIP Registration Flow','paid-registration':this.lang==='hu'?'Fizetős Regisztrációs Folyamat':'Paid Registration Flow','admin-dashboard':this.lang==='hu'?'Admin Dashboard Folyamat':'Admin Dashboard Flow','checkin-staff':this.lang==='hu'?'Check-in Staff Folyamat':'Check-in Staff Flow','state-machine':this.lang==='hu'?'Állapotgép Diagram':'State Machine Diagram','payment-flow':this.lang==='hu'?'Fizetési Folyamat':'Payment Flow','system-architecture':this.lang==='hu'?'Rendszer Architektúra':'System Architecture','pwa-guest-app':this.lang==='hu'?'PWA Vendég App Folyamat (Epic 6)':'PWA Guest App Flow (Epic 6)','applicant-flow':this.lang==='hu'?'Jelentkezési Folyamat (Epic 7)':'Applicant Flow (Epic 7)'};
          Object.entries(this.notes).forEach(([id, note]) => {
            if (note && note.trim()) rows.push([id, titles[id] || id, note.replace(/"/g, '""')]);
          });
          const csv = rows.map(r => r.map(c => `"${c}"`).join(',')).join('\n');
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = 'ceogala-diagram-notes.csv';
          link.click();
        },
        importNotes(event) {
          const file = event.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const lines = e.target.result.split('\n');
              for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                const match = line.match(/^"([^"]+)","[^"]*","(.*)"$/);
                if (match) this.notes[match[1]] = match[2].replace(/""/g, '"');
              }
              this.saveNotes();
              alert(this.t.importSuccess);
            } catch (err) { alert(this.t.importError + ': ' + err.message); }
          };
          reader.readAsText(file);
          event.target.value = '';
        }
      };
    }
  </script>
</body>
</html>