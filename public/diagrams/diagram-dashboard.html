<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CEO Gala 2026 - System Diagrams</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.14.3/dist/cdn.min.js"></script>
  <style>
    :root { --gold:#D4A84B; --gold-light:#E5C87A; --gold-dark:#B8923D; --navy:#1A1F35; --navy-light:#2D3555; --charcoal:#2C2C2C; --cream:#FAF8F5; --warm-gray:#5C6370; }
    [x-cloak] { display: none !important; }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Open Sans',system-ui,sans-serif; background:var(--cream); color:var(--charcoal); line-height:1.6; }
    body.dark { background:var(--navy) !important; color:#e5e5e5 !important; }
    body.dark .container { background:transparent; }
    body.dark main { background:transparent; }
    header { background:var(--navy); color:white; padding:1.25rem 2rem; border-bottom:3px solid var(--gold); display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:1rem; }
    .header-title { font-family:'Playfair Display',Georgia,serif; font-size:1.5rem; font-weight:600; }
    .header-sub { font-size:0.75rem; color:var(--gold-light); text-transform:uppercase; letter-spacing:0.08em; margin-top:0.25rem; }
    .header-actions { display:flex; gap:0.5rem; flex-wrap:wrap; }
    .btn { padding:0.5rem 1rem; font-size:0.7rem; font-weight:600; text-transform:uppercase; letter-spacing:0.04em; border:none; cursor:pointer; transition:all 0.2s; font-family:'Open Sans',sans-serif; }
    .btn-gold { background:var(--gold); color:white; }
    .btn-gold:hover { background:var(--gold-dark); }
    .btn-ghost { background:transparent; color:white; border:1px solid rgba(255,255,255,0.3); }
    .btn-ghost:hover { background:rgba(255,255,255,0.1); }
    .btn-lang { background:var(--gold-dark); color:white; font-weight:700; min-width:42px; }
    input[type="file"] { display:none; }
    .container { max-width:1400px; margin:0 auto; padding:1.5rem; display:grid; grid-template-columns:260px 1fr; gap:1.5rem; }
    @media (max-width:900px) { .container { grid-template-columns:1fr; } .sidebar { display:none; } }
    .sidebar { position:sticky; top:1.5rem; height:fit-content; }
    .sidebar-panel { background:white; border:1px solid rgba(92,99,112,0.15); }
    .dark .sidebar-panel { background:var(--navy-light); border-color:rgba(255,255,255,0.1); }
    .sidebar-header { padding:1rem 1.25rem; border-bottom:1px solid rgba(92,99,112,0.1); font-family:'Playfair Display',Georgia,serif; font-size:0.85rem; font-weight:600; color:var(--navy); text-transform:uppercase; letter-spacing:0.06em; }
    .dark .sidebar-header { color:white; border-color:rgba(255,255,255,0.1); }
    .sidebar-nav { display:flex; flex-direction:column; gap:0.5rem; padding:0.75rem; }
    .sidebar-btn-base { display:flex; align-items:center; gap:0.75rem; padding:0.75rem 1rem; font-size:0.8rem; font-weight:500; text-align:left; border:none; cursor:pointer; transition:all 0.15s; font-family:'Open Sans',sans-serif; }
    .sidebar-btn { background:white; color:var(--navy); border:1px solid rgba(92,99,112,0.15); }
    .sidebar-btn:hover { background:var(--cream); border-color:var(--gold); }
    .sidebar-btn-active { background:var(--gold); color:white; border:1px solid var(--gold); }
    .dark .sidebar-btn { background:var(--navy); color:#ccc; border-color:rgba(255,255,255,0.1); }
    .dark .sidebar-btn:hover { background:var(--navy-light); }
    .sidebar-num { font-family:'Playfair Display',Georgia,serif; font-weight:600; opacity:0.5; }
    .sidebar-btn-active .sidebar-num { opacity:1; }
    .diagram-section { background:white; border:1px solid rgba(92,99,112,0.1); }
    .dark .diagram-section { background:var(--navy-light); border-color:rgba(255,255,255,0.1); }
    .section-header { display:flex; align-items:center; gap:1rem; padding:1.25rem 1.5rem; border-bottom:1px solid rgba(92,99,112,0.1); border-left:3px solid var(--gold); }
    .dark .section-header { border-bottom-color:rgba(255,255,255,0.1); }
    .section-num { font-family:'Playfair Display',Georgia,serif; font-size:1.25rem; font-weight:600; color:var(--gold); }
    .section-header h2 { font-family:'Playfair Display',Georgia,serif; font-size:1.25rem; font-weight:600; color:var(--navy); }
    .dark .section-header h2 { color:white; }
    .description-box { padding:1.25rem 1.5rem; background:linear-gradient(to right,rgba(212,168,75,0.08),rgba(212,168,75,0.02)); border-bottom:1px solid rgba(92,99,112,0.1); }
    .dark .description-box { background:linear-gradient(to right,rgba(212,168,75,0.12),rgba(212,168,75,0.04)); }
    .description-box h3 { font-size:0.65rem; font-weight:700; text-transform:uppercase; letter-spacing:0.1em; color:var(--gold-dark); margin-bottom:0.5rem; }
    .description-box p { font-size:0.85rem; color:var(--warm-gray); line-height:1.7; }
    .dark .description-box p { color:#b0b0b0; }
    .diagram-area { padding:1.5rem; background:var(--cream); overflow:auto; }
    .dark .diagram-area { background:rgba(0,0,0,0.15); }
    .diagram-area svg { display:block; margin:0 auto; max-width:100%; height:auto; }
    .dark .diagram-area svg { filter:invert(0.88) hue-rotate(180deg); }
    .notes-section { padding:1.25rem 1.5rem; border-top:1px solid rgba(92,99,112,0.1); }
    .dark .notes-section { border-color:rgba(255,255,255,0.1); }
    .notes-section label { display:block; font-size:0.7rem; font-weight:600; text-transform:uppercase; letter-spacing:0.08em; color:var(--warm-gray); margin-bottom:0.5rem; }
    .notes-section textarea { width:100%; padding:0.75rem; font-size:0.85rem; font-family:'Open Sans',sans-serif; border:1px solid rgba(92,99,112,0.2); background:white; color:var(--charcoal); resize:vertical; transition:border-color 0.2s; }
    .notes-section textarea:focus { outline:none; border-color:var(--gold); }
    .dark .notes-section textarea { background:var(--navy); color:#e5e5e5; border-color:rgba(255,255,255,0.15); }
    .notes-hint { display:block; font-size:0.65rem; color:var(--warm-gray); margin-top:0.35rem; }
    footer { background:var(--navy); color:rgba(255,255,255,0.5); padding:1rem 2rem; text-align:center; font-size:0.65rem; margin-top:2rem; }
    footer span { color:var(--gold); font-family:'Playfair Display',Georgia,serif; }
    /* Dark mode header and footer */
    .dark header { background:var(--charcoal); border-bottom-color:var(--gold-dark); }
    .dark footer { background:var(--charcoal); }
    ::-webkit-scrollbar { width:6px; height:6px; }
    ::-webkit-scrollbar-track { background:var(--cream); }
    ::-webkit-scrollbar-thumb { background:var(--warm-gray); }
    .dark ::-webkit-scrollbar-track { background:var(--navy); }
    /* Test case dark mode styles */
    .tc-box { transition: all 0.2s; }
    .tc-box-cyan { background:#e0f7f7 !important; border:1px solid #00A0A0 !important; }
    .dark .tc-box-cyan { background:rgba(0,160,160,0.15) !important; border-color:rgba(0,160,160,0.5) !important; }
    .tc-box-purple { background:#f3e8ff !important; border:1px solid #6741d9 !important; }
    .dark .tc-box-purple { background:rgba(103,65,217,0.15) !important; border-color:rgba(103,65,217,0.5) !important; }
    .tc-box-orange { background:#fff3e0 !important; border:1px solid #f08c00 !important; }
    .dark .tc-box-orange { background:rgba(240,140,0,0.15) !important; border-color:rgba(240,140,0,0.5) !important; }
    .tc-box-green { background:#ecfdf5 !important; border:1px solid #2f9e44 !important; }
    .dark .tc-box-green { background:rgba(47,158,68,0.15) !important; border-color:rgba(47,158,68,0.5) !important; }
    .tc-box-white { background:white !important; border:1px solid rgba(92,99,112,0.2) !important; }
    .dark .tc-box-white { background:rgba(255,255,255,0.05) !important; border-color:rgba(255,255,255,0.15) !important; }
    .tc-title-cyan { color:#00A0A0 !important; }
    .dark .tc-title-cyan { color:#4DD0D0 !important; }
    .tc-title-purple { color:#6741d9 !important; }
    .dark .tc-title-purple { color:#a78bfa !important; }
    .tc-title-orange { color:#f08c00 !important; }
    .dark .tc-title-orange { color:#fbbf24 !important; }
    .tc-title-green { color:#2f9e44 !important; }
    .dark .tc-title-green { color:#4ade80 !important; }
    /* Generic text styles for dark mode - applied to all test case content */
    .tc-box td, .tc-box span, .tc-box div, .tc-box p, .tc-box label { transition: color 0.2s; }
    .dark .tc-box td, .dark .tc-box span, .dark .tc-box div, .dark .tc-box p { color:#d4d4d4 !important; }
    .dark .tc-box td[style*="color:#737373"], .dark .tc-box span[style*="color:#737373"] { color:#a3a3a3 !important; }
    .dark .tc-box code, .dark .tc-box code[style*="background:#f5f5f5"] { background:rgba(255,255,255,0.12) !important; color:#f0f0f0 !important; }
    .dark .tc-box tr[style*="border-bottom:1px solid #eee"] { border-bottom-color:rgba(255,255,255,0.1) !important; }
    .dark .tc-box h4, .dark .tc-box strong { color:#e5e5e5 !important; }
    .dark .tc-box label { color:#d4d4d4 !important; }
    /* Acceptance criteria white box in dark mode */
    .dark .diagram-area > div[style*="background:white"] { background:rgba(255,255,255,0.05) !important; border-color:rgba(255,255,255,0.15) !important; }
    .dark .diagram-area > div[style*="background:white"] h4 { color:#e5e5e5 !important; }
    .dark .diagram-area > div[style*="background:white"] span { color:#d4d4d4 !important; }
    /* Color code cards for check-in - green, yellow/orange, red */
    .dark div[style*="background:#dcfce7"], .dark div[style*="background:#ecfdf5"] { background:rgba(34,197,94,0.15) !important; border-color:rgba(47,158,68,0.5) !important; }
    .dark div[style*="background:#fef9c3"], .dark div[style*="background:#fff3e0"] { background:rgba(240,140,0,0.15) !important; border-color:rgba(240,140,0,0.5) !important; }
    .dark div[style*="background:#fee2e2"], .dark div[style*="background:#fef2f2"] { background:rgba(220,38,38,0.15) !important; border-color:rgba(220,38,38,0.5) !important; }
    .dark div[style*="background:#dcfce7"] div, .dark div[style*="background:#ecfdf5"] div,
    .dark div[style*="background:#fef9c3"] div, .dark div[style*="background:#fff3e0"] div,
    .dark div[style*="background:#fee2e2"] div, .dark div[style*="background:#fef2f2"] div { color:#d4d4d4 !important; }
    .dark div[style*="background:#ecfdf5"] strong, .dark div[style*="background:#fff3e0"] strong, .dark div[style*="background:#fef2f2"] strong { color:inherit !important; }
    /* Font sizes for test case descriptions */
    .dark p[style*="color:#737373"], .dark div[style*="color:#737373"] { color:#a3a3a3 !important; }
    /* Section header colors in dark mode - keep specific colors for visual distinction */
    .dark .section-header[style*="border-left-color:#2f9e44"] .section-num { color:#4ade80 !important; }
    .dark .section-header[style*="border-left-color:#6741d9"] .section-num { color:#a78bfa !important; }
    .dark .section-header[style*="border-left-color:#f08c00"] .section-num { color:#fbbf24 !important; }
    .dark .section-header[style*="border-left-color:#00A0A0"] .section-num { color:#4DD0D0 !important; }
    @media print { .no-print { display:none !important; } .container { display:block; } .sidebar { display:none; } }
  </style>
</head>
<body x-data="appData()">
  <header class="no-print">
    <div>
      <div class="header-title" x-text="t.pageTitle"></div>
      <div class="header-sub" x-text="t.pageSubtitle"></div>
    </div>
    <div class="header-actions">
      <button @click="darkMode = !darkMode" class="btn btn-ghost" x-text="darkMode ? 'â˜€ï¸' : 'ðŸŒ™'" style="font-size:1rem;min-width:36px;"></button>
      <button @click="lang = lang === 'hu' ? 'en' : 'hu'" class="btn btn-lang" x-text="lang === 'hu' ? 'EN' : 'HU'"></button>
      <button @click="exportNotes()" class="btn btn-ghost" x-text="t.btnExport"></button>
      <button @click="$refs.fileInput.click()" class="btn btn-ghost" x-text="t.btnImport"></button>
      <input type="file" x-ref="fileInput" @change="importNotes($event)" accept=".csv">
      <button onclick="window.print()" class="btn btn-gold" x-text="t.btnPrint"></button>
      <button @click="history.back()" class="btn btn-ghost" x-text="t.backButton"></button>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar no-print">
      <div class="sidebar-panel">
        <div class="sidebar-header" x-text="t.sidebarTitle"></div>
        <nav class="sidebar-nav">

          <button @click="activeTab = 'guest-registration'; scrollToTop()" :class="activeTab === 'guest-registration' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">01</span>
            <span x-text="lang === 'hu' ? 'VendÃ©g RegisztrÃ¡ciÃ³s Folyamat' : 'Guest Registration Flow'"></span>
          </button>

          <button @click="activeTab = 'vip-registration'; scrollToTop()" :class="activeTab === 'vip-registration' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">02</span>
            <span x-text="lang === 'hu' ? 'VIP RegisztrÃ¡ciÃ³s Folyamat' : 'VIP Registration Flow'"></span>
          </button>

          <button @click="activeTab = 'admin-dashboard'; scrollToTop()" :class="activeTab === 'admin-dashboard' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">03</span>
            <span x-text="lang === 'hu' ? 'Admin Dashboard Folyamat' : 'Admin Dashboard Flow'"></span>
          </button>

          <button @click="activeTab = 'paid-registration'; scrollToTop()" :class="activeTab === 'paid-registration' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">04</span>
            <span x-text="lang === 'hu' ? 'FizetÅ‘s RegisztrÃ¡ciÃ³s Folyamat' : 'Paid Registration Flow'"></span>
          </button>

          <button @click="activeTab = 'checkin-staff'; scrollToTop()" :class="activeTab === 'checkin-staff' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">05</span>
            <span x-text="lang === 'hu' ? 'Check-in Staff Folyamat' : 'Check-in Staff Flow'"></span>
          </button>

          <button @click="activeTab = 'pwa-app'; scrollToTop()" :class="activeTab === 'pwa-app' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">06</span>
            <span x-text="lang === 'hu' ? 'PWA AlkalmazÃ¡s Folyamat' : 'PWA App Flow'"></span>
          </button>

          <button @click="activeTab = 'application'; scrollToTop()" :class="activeTab === 'application' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">07</span>
            <span x-text="lang === 'hu' ? 'JelentkezÃ©si Folyamat' : 'Application Flow'"></span>
          </button>

          <button @click="activeTab = 'state-machine'; scrollToTop()" :class="activeTab === 'state-machine' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">08</span>
            <span x-text="lang === 'hu' ? 'ÃllapotgÃ©p Diagram' : 'State Machine Diagram'"></span>
          </button>

          <button @click="activeTab = 'payment-flow'; scrollToTop()" :class="activeTab === 'payment-flow' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">09</span>
            <span x-text="lang === 'hu' ? 'FizetÃ©si Folyamat' : 'Payment Flow'"></span>
          </button>

          <button @click="activeTab = 'system-architecture'; scrollToTop()" :class="activeTab === 'system-architecture' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">10</span>
            <span x-text="lang === 'hu' ? 'Rendszer ArchitektÃºra' : 'System Architecture'"></span>
          </button>

          <button @click="activeTab = 'email-logs'; scrollToTop()" :class="activeTab === 'email-logs' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">11</span>
            <span x-text="lang === 'hu' ? 'Email NaplÃ³ Admin Folyamat' : 'Email Logs Admin Flow'"></span>
          </button>

          <button @click="activeTab = 'user-management'; scrollToTop()" :class="activeTab === 'user-management' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">12</span>
            <span x-text="lang === 'hu' ? 'FelhasznÃ¡lÃ³ KezelÃ©s Folyamat' : 'User Management Flow'"></span>
          </button>

          <button @click="activeTab = 'payment-refund'; scrollToTop()" :class="activeTab === 'payment-refund' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">13</span>
            <span x-text="lang === 'hu' ? 'VisszatÃ©rÃ­tÃ©si Folyamat' : 'Payment Refund Flow'"></span>
          </button>

          <button @click="activeTab = 'paired-registration-e2e'; scrollToTop()" :class="activeTab === 'paired-registration-e2e' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">14</span>
            <span x-text="lang === 'hu' ? 'PÃ¡ros RegisztrÃ¡ciÃ³ E2E' : 'Paired Registration E2E'"></span>
          </button>

          <button @click="activeTab = 'guest-import-invitation'; scrollToTop()" :class="activeTab === 'guest-import-invitation' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">15</span>
            <span x-text="lang === 'hu' ? 'VendÃ©g Import + MeghÃ­vÃ³' : 'Guest Import + Invitation'"></span>
          </button>

          <button @click="activeTab = 'admin-staff-roles'; scrollToTop()" :class="activeTab === 'admin-staff-roles' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">16</span>
            <span x-text="lang === 'hu' ? 'Admin vs Staff SzerepkÃ¶rÃ¶k' : 'Admin vs Staff Roles'"></span>
          </button>

          <button @click="activeTab = 'checkin-override'; scrollToTop()" :class="activeTab === 'checkin-override' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">17</span>
            <span x-text="lang === 'hu' ? 'Check-in Override Folyamat' : 'Check-in Override Flow'"></span>
          </button>

          <button @click="activeTab = 'email-rate-limit'; scrollToTop()" :class="activeTab === 'email-rate-limit' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">18</span>
            <span x-text="lang === 'hu' ? 'Email Rate Limiting' : 'Email Rate Limiting'"></span>
          </button>

          <button @click="activeTab = 'component-architecture'; scrollToTop()" :class="activeTab === 'component-architecture' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">19</span>
            <span x-text="lang === 'hu' ? 'Komponens ArchitektÃºra' : 'Component Architecture'"></span>
          </button>

          <!-- Functional Tests Category -->
          <div style="margin-top:1rem;padding-top:0.75rem;border-top:1px solid rgba(92,99,112,0.15);">
            <div style="font-size:0.7rem;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--gold);padding:0.5rem 1rem;" x-text="lang === 'hu' ? 'FunkcionÃ¡lis Tesztek' : 'Functional Tests'"></div>
          </div>

          <button @click="activeTab = 'test-overview'; scrollToTop()" :class="activeTab === 'test-overview' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T0</span>
            <span x-text="lang === 'hu' ? 'Teszt ÃttekintÃ©s' : 'Test Overview'"></span>
          </button>

          <button @click="activeTab = 'tc-01-vip'; scrollToTop()" :class="activeTab === 'tc-01-vip' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T1</span>
            <span x-text="lang === 'hu' ? 'VIP RegisztrÃ¡ciÃ³' : 'VIP Registration'"></span>
          </button>

          <button @click="activeTab = 'tc-02-paying'; scrollToTop()" :class="activeTab === 'tc-02-paying' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T2</span>
            <span x-text="lang === 'hu' ? 'FizetÅ‘ RegisztrÃ¡ciÃ³' : 'Paying Registration'"></span>
          </button>

          <button @click="activeTab = 'tc-03-paired'; scrollToTop()" :class="activeTab === 'tc-03-paired' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T3</span>
            <span x-text="lang === 'hu' ? 'PÃ¡ros Jegy' : 'Paired Ticket'"></span>
          </button>

          <button @click="activeTab = 'tc-04-applicant'; scrollToTop()" :class="activeTab === 'tc-04-applicant' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T4</span>
            <span x-text="lang === 'hu' ? 'JelentkezÅ‘ JÃ³vÃ¡hagyÃ¡s' : 'Applicant Approval'"></span>
          </button>

          <button @click="activeTab = 'tc-05-bank'; scrollToTop()" :class="activeTab === 'tc-05-bank' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T5</span>
            <span x-text="lang === 'hu' ? 'ÃtutalÃ¡s JÃ³vÃ¡hagyÃ¡s' : 'Bank Transfer Approval'"></span>
          </button>

          <button @click="activeTab = 'tc-06-pwa'; scrollToTop()" :class="activeTab === 'tc-06-pwa' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T6</span>
            <span x-text="lang === 'hu' ? 'PWA BejelentkezÃ©s' : 'PWA Login'"></span>
          </button>

          <button @click="activeTab = 'tc-07-qr'; scrollToTop()" :class="activeTab === 'tc-07-qr' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T7</span>
            <span x-text="lang === 'hu' ? 'QR Jegy' : 'QR Ticket'"></span>
          </button>

          <button @click="activeTab = 'tc-08-checkin'; scrollToTop()" :class="activeTab === 'tc-08-checkin' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T8</span>
            <span x-text="lang === 'hu' ? 'Check-in' : 'Check-in'"></span>
          </button>

          <button @click="activeTab = 'tc-09-seating'; scrollToTop()" :class="activeTab === 'tc-09-seating' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T9</span>
            <span x-text="lang === 'hu' ? 'ÃœltetÃ©si Rend' : 'Seating Management'"></span>
          </button>

          <button @click="activeTab = 'tc-10-email'; scrollToTop()" :class="activeTab === 'tc-10-email' ? 'sidebar-btn-active' : 'sidebar-btn'" class="sidebar-btn-base">
            <span class="sidebar-num">T10</span>
            <span x-text="lang === 'hu' ? 'Email KÃ¼ldÃ©s' : 'Email Sending'"></span>
          </button>
        </nav>
      </div>
    </aside>
    <main>

        <section x-show="activeTab === 'guest-registration'" x-transition class="diagram-section" id="guest-registration">
          <div class="section-header">
            <span class="section-num">01</span>
            <h2 x-text="lang === 'hu' ? 'VendÃ©g RegisztrÃ¡ciÃ³s Folyamat' : 'Guest Registration Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ez a diagram a teljes vendÃ©g regisztrÃ¡ciÃ³s folyamatot mutatja be a CSV import-tÃ³l a jegy kiÃ¡llÃ­tÃ¡sÃ¡ig. HÃ¡rom fÅ‘ Ãºtvonalat kÃ¼lÃ¶nbÃ¶ztet meg: (1) VIP vendÃ©gek - ingyenes rÃ©szvÃ©tel, azonnali QR generÃ¡lÃ¡s a megerÅ‘sÃ­tÃ©s utÃ¡n; (2) EgyÃ©ni fizetÅ‘ vendÃ©gek - 100.000 Ft, szÃ¡mlÃ¡zÃ¡si adatok Ã©s fizetÃ©s szÃ¼ksÃ©ges; (3) PÃ¡ros jegyek - 150.000 Ft, a primary vendÃ©g megadja a partner email cÃ­mÃ©t, majd mindketten kapnak meghÃ­vÃ³t. A diagram alsÃ³ rÃ©sze a pÃ¡ros jegy speciÃ¡lis folyamatÃ¡t mutatja: a primary vendÃ©g vÃ¡laszt fizetÃ©si mÃ³dot (akÃ¡r kÃ¼lÃ¶nbÃ¶zÅ‘t a sajÃ¡t Ã©s partner jegyÃ©hez), a partner addig vÃ¡rakozik, majd fizetÃ©s utÃ¡n mindketten megkapjÃ¡k QR jegyÃ¼ket ugyanahhoz az asztalhoz rendelve.' : 'This diagram illustrates the complete guest registration flow from CSV import to ticket issuance. Three main paths are distinguished: (1) VIP guests - complimentary attendance with instant QR generation after confirmation; (2) Single paying guests - 100,000 Ft requiring billing data and payment; (3) Paired tickets - 150,000 Ft where primary guest provides partner email, then both receive invitations. The bottom section shows the paired ticket special flow: primary guest selects payment methods (can be different for own and partner ticket), partner waits, then after payment both receive QR tickets assigned to the same table.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1210 744" width="100%" style="max-width:1210px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-737373" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker></defs><rect x="0" y="0" width="1210" height="744" fill="#FAF8F5"/><text x="660" y="64" font-size="24" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - Guest Registration Flow</text><text x="660" y="89" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VIP, Single Paying &amp; Paired Ticket Flows</text><ellipse cx="100" cy="142.5" rx="60" ry="22.5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="100" y="145" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CSV Import</text><path d="M 160 142 L 200 142" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="200" y="115" width="6" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="206" y="115" width="134" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="273" y="141" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Magic Link</text><text x="273" y="154.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">to Primary Guest</text><path d="M 340 142 L 380 142" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="445,102 510,142 445,182 380,142" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="445" y="141" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest</text><text x="445" y="154.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type?</text><text x="515" y="115" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">VIP</text><path d="M 510 130 L 560 130" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="560" y="105" width="6" height="50" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="566" y="105" width="124" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="628" y="131" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm Attendance</text><path d="M 690 130 L 730 130" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="730" y="105" width="6" height="50" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="736" y="105" width="104" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="788" y="131" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Generate QR</text><path d="M 840 130 L 880 130" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="880" y="105" width="6" height="50" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="886" y="105" width="104" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="938" y="131" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Ticket</text><path d="M 990 130 L 1030 130" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><ellipse cx="1070" cy="129.5" rx="40" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="1070" y="133" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><text x="415" y="195" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paying</text><path d="M 445 182 L 445 220" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><polygon points="445,220 510,255 445,290 380,255" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="445" y="253" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><text x="445" y="266.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type?</text><text x="515" y="248" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Single</text><path d="M 510 255 L 560 255" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><rect x="560" y="230" width="6" height="50" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="566" y="230" width="124" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="628" y="256" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Billing Details</text><path d="M 690 255 L 730 255" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><rect x="730" y="230" width="6" height="50" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="736" y="230" width="124" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="798" y="249" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Select Payment</text><text x="798" y="262.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(Card/Bank)</text><path d="M 860 255 L 900 255" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="865" y="247" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Pay</text><rect x="900" y="230" width="6" height="50" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="906" y="230" width="104" height="50" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="958" y="249" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR + Email</text><text x="958" y="262.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">to Primary</text><path d="M 1010 255 L 1050 255" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><ellipse cx="1090" cy="254.5" rx="40" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="1090" y="258" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><text x="40" y="346" font-size="16" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED TICKET FLOW (Primary + Partner)</text><rect x="40" y="355" width="1090" height="2" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><text x="360" y="305" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paired</text><path d="M 380 255 L 300 255 L 300 375" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="40" y="387" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY GUEST</text><rect x="40" y="395" width="1090" height="1" stroke="#525252" fill="#525252" opacity="1" stroke-width="2"/><rect x="40" y="410" width="6" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="410" width="124" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="108" y="431" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Enter Billing</text><text x="108" y="444.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">&amp; Partner Email</text><path d="M 170 437 L 200 437" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="200" y="410" width="6" height="55" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="206" y="410" width="144" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="278" y="431" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Select Payment</text><text x="278" y="444.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">for OWN ticket</text><path d="M 350 437 L 380 437" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><rect x="380" y="410" width="6" height="55" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="386" y="410" width="144" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="458" y="431" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Select Payment</text><text x="458" y="444.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">for PARTNER ticket</text><path d="M 530 437 L 560 437" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><rect x="560" y="410" width="6" height="55" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="566" y="410" width="144" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="638" y="431" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Process Payments</text><text x="638" y="444.2" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(1 or 2 transactions)</text><path d="M 710 437 L 740 437" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="740" y="410" width="6" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="746" y="410" width="114" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="803" y="431" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Generate QR</text><text x="803" y="444.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Email</text><path d="M 860 437 L 890 437" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><ellipse cx="930" cy="437.5" rx="40" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="930" y="441" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><text x="40" y="502" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PARTNER</text><rect x="40" y="510" width="1090" height="1" stroke="#525252" fill="#525252" opacity="1" stroke-width="2"/><path d="M 108 465 L 108 525" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="115" y="499" font-size="9" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">triggers</text><rect x="40" y="525" width="6" height="55" stroke="#737373" fill="#737373" opacity="1" stroke-width="2"/><rect x="46" y="525" width="124" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="108" y="546" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Receive Own</text><text x="108" y="559.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link</text><path d="M 170 552 L 200 552" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><rect x="200" y="525" width="6" height="55" stroke="#737373" fill="#737373" opacity="1" stroke-width="2"/><rect x="206" y="525" width="144" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="278" y="546" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Fill Own Form</text><text x="278" y="559.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(profile, dietary)</text><path d="M 350 552 L 510 552" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><text x="390" y="544" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">waits for payment</text><path d="M 638 465 L 638 520" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="645" y="494" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">unlocks</text><rect x="510" y="525" width="6" height="55" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="516" y="525" width="144" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="588" y="546" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status: Waiting</text><text x="588" y="559.2" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">for Payment</text><path d="M 660 552 L 740 552" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="740" y="525" width="6" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="746" y="525" width="114" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="803" y="546" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Generate QR</text><text x="803" y="559.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send Email</text><path d="M 860 552 L 890 552" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><ellipse cx="930" cy="552.5" rx="40" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="930" y="556" font-size="11" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><rect x="980" y="440" width="150" height="100" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="1055" y="481" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LINKED:</text><text x="1055" y="494.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Same Table</text><text x="1055" y="507.4" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Assignment</text><path d="M 970 437 L 980 490" stroke="#6741d9" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-6741d9)"/><path d="M 970 552 L 980 490" stroke="#6741d9" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-6741d9)"/><text x="40" y="622" font-size="12" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Payment Method Options:</text><rect x="40" y="632" width="12" height="12" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><text x="60" y="642" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card (Stripe Checkout)</text><rect x="240" y="632" width="12" height="12" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="260" y="642" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank Transfer (manual approval)</text><text x="40" y="662" font-size="10" fill="#525252" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Primary can select DIFFERENT payment methods for own ticket vs partner ticket</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['guest-registration']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'vip-registration'" x-transition class="diagram-section" id="vip-registration">
          <div class="section-header">
            <span class="section-num">02</span>
            <h2 x-text="lang === 'hu' ? 'VIP RegisztrÃ¡ciÃ³s Folyamat' : 'VIP Registration Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'RÃ©szletes VIP vendÃ©g regisztrÃ¡ciÃ³s folyamat - a magic link kattintÃ¡stÃ³l az azonnali jegygenerÃ¡lÃ¡sig. A folyamatÃ¡bra bemutatja a dÃ¶ntÃ©si pontokat: (1) Magic link Ã©rvÃ©nyessÃ©g ellenÅ‘rzÃ©se - lejÃ¡rt/Ã©rvÃ©nytelen esetÃ©n hibaoldal; (2) MegerÅ‘sÃ­tÃ©s vagy elutasÃ­tÃ¡s vÃ¡lasztÃ¡sa - elutasÃ­tÃ¡snÃ¡l a vendÃ©g stÃ¡tusza declined lesz; (3) MegerÅ‘sÃ­tÃ©s esetÃ©n profil adatok megadÃ¡sa (telefon, cÃ©gnÃ©v, pozÃ­ciÃ³, Ã©trendi igÃ©nyek, Ã¼ltetÃ©si preferenciÃ¡k) Ã©s kÃ¶telezÅ‘ GDPR + lemondÃ¡si feltÃ©telek elfogadÃ¡sa. A sikeres regisztrÃ¡ciÃ³ utÃ¡n automatikusan generÃ¡lÃ³dik a PWA belÃ©pÃ©si kÃ³d Ã©s a QR jegy, majd a vendÃ©g a success oldalra kerÃ¼l.' : 'Detailed VIP guest registration flow from magic link click to instant ticket generation. The flowchart shows decision points: (1) Magic link validity check - expired/invalid shows error page; (2) Confirm or decline choice - decline sets guest status to declined; (3) On confirmation, profile data entry (phone, company, position, dietary requirements, seating preferences) and mandatory GDPR + cancellation terms acceptance. After successful registration, PWA login code and QR ticket are auto-generated, redirecting guest to success page.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 1520" width="100%" style="max-width:860px"><defs><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker></defs><rect x="0" y="0" width="860" height="1520" fill="#FAF8F5"/><text x="380" y="76" font-size="36" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VIP REGISTRATION FLOW</text><ellipse cx="380" cy="150" rx="60" ry="30" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="149" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><text x="380" y="165.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link</text><path d="M 380 180 L 380 220" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="280" y="240" width="200" height="60" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="380" y="267" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Landing Page</text><text x="380" y="281.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/register?code&amp;email</text><path d="M 380 300 L 380 340" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><polygon points="380,360 460,410 380,460 300,410" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="380" y="409" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="380" y="425.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link?</text><path d="M 300 410 L 180 410" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><text x="215" y="402" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">NO</text><rect x="40" y="380" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="407" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Error Page</text><text x="110" y="421.4" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Expired/Invalid</text><path d="M 380 460 L 380 500" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="405" y="482" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">YES</text><rect x="280" y="520" width="200" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="547" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Welcome Screen</text><text x="380" y="561.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Show guest info</text><text x="380" y="575.8" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm / Decline</text><path d="M 380 600 L 380 640" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><polygon points="380,660 460,710 380,760 300,710" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="380" y="709" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm or</text><text x="380" y="725.8" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Decline?</text><path d="M 300 710 L 180 710" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><text x="210" y="702" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DECLINE</text><rect x="40" y="680" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="707" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Declined Page</text><text x="110" y="721.4" font-size="12" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: declined</text><path d="M 110 740 L 110 780" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><ellipse cx="110" cy="830" rx="60" ry="30" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="110" y="834" font-size="14" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><path d="M 380 760 L 380 800" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="420" y="782" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CONFIRM</text><rect x="260" y="820" width="240" height="100" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="847" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VIP Confirmation Form</text><text x="380" y="861.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Phone, Company, Position</text><text x="380" y="875.8" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Dietary, Seating Prefs</text><text x="380" y="890.2" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GDPR + Cancellation Consent</text><path d="M 380 920 L 380 960" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="280" y="980" width="200" height="60" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="1007" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/registration</text><text x="380" y="1021.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/confirm</text><path d="M 380 1040 L 380 1080" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><rect x="260" y="1100" width="240" height="100" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="380" y="1126" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Database Transaction</text><text x="380" y="1139.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">1. Update Guest Profile</text><text x="380" y="1152.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">2. Create Registration</text><text x="380" y="1165.6" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">3. Generate PWA Code</text><text x="380" y="1178.8" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">4. Generate QR Hash</text><path d="M 380 1200 L 380 1240" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="280" y="1260" width="200" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="380" y="1287" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success Page</text><text x="380" y="1301.4" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: registered</text><path d="M 380 1320 L 380 1360" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><ellipse cx="380" cy="1410" rx="60" ry="30" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="380" y="1409" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><text x="380" y="1425.8" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket Issued</text><rect x="580" y="120" width="200" height="200" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="680" y="146" font-size="16" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LEGEND</text><ellipse cx="605" cy="175" rx="15" ry="10" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="1"/><text x="630" y="180" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Start/End</text><rect x="590" y="195" width="30" height="20" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="1"/><text x="630" y="210" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Process/Page</text><polygon points="605,225 620,237.5 605,250 590,237.5" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="1"/><text x="630" y="242" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Decision</text><rect x="590" y="260" width="30" height="20" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="1"/><text x="630" y="275" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Error/Decline</text><rect x="590" y="290" width="30" height="20" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="1"/><text x="630" y="305" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Success</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['vip-registration']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'admin-dashboard'" x-transition class="diagram-section" id="admin-dashboard">
          <div class="section-header">
            <span class="section-num">03</span>
            <h2 x-text="lang === 'hu' ? 'Admin Dashboard Folyamat' : 'Admin Dashboard Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Az adminisztrÃ¡tor munkamenete a dashboard felÃ¼leten - 7 fÅ‘ modul Ã¡ttekintÃ©se. VendÃ©g Lista: szÅ±rÃ©s kategÃ³ria/stÃ¡tusz szerint, adatok szerkesztÃ©se, meghÃ­vÃ³ kÃ¼ldÃ©s, fizetÃ©s jÃ³vÃ¡hagyÃ¡s. ÃœltetÃ©si Rend: drag-and-drop felÃ¼let, vendÃ©gek asztalhoz rendelÃ©se, teremtÃ©rkÃ©p vizualizÃ¡ciÃ³, CSV export. StatisztikÃ¡k: regisztrÃ¡ciÃ³k, fizetÃ©sek Ã©s check-in adatok valÃ³s idÅ‘ben. CSV Import: fÃ¡jl feltÃ¶ltÃ©s, elÅ‘nÃ©zet Ã©s validÃ¡lÃ¡s, oszlopok hozzÃ¡rendelÃ©se. Email Sablonok: magic link, jegykÃ¼ldÃ©s, megerÅ‘sÃ­tÃ©sek kezelÃ©se. Check-in Log: valÃ³s idejÅ± feed, szÅ±rÃ©s stÃ¡tusz szerint, felÃ¼lbÃ­rÃ¡lÃ¡sok naplÃ³ja. A felÃ¼let kÃ©tnyelvÅ± (HU/EN) Ã©s sÃ¶tÃ©t mÃ³dot is tÃ¡mogat.' : 'Administrator workflow through the dashboard interface - 7 core modules overview. Guest List: filter by category/status, edit details, send invitations, approve payments. Table Seating: drag-and-drop interface, assign guests to tables, visual floor plan, CSV export. Statistics: real-time registration, payment and check-in data. CSV Import: file upload, preview and validation, column mapping. Email Templates: manage magic link, ticket delivery, confirmation emails. Check-in Log: real-time feed, filter by status, override history. The interface supports bilingual (HU/EN) and dark mode.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 860 620" width="100%" style="max-width:860px"><defs></defs><rect x="0" y="0" width="860" height="620" fill="#FAF8F5"/><text x="410" y="72" font-size="32" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - Admin Dashboard Structure</text><text x="410" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Site Map â€¢ 7 Core Modules</text><rect x="310" y="125" width="200" height="50" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="410" y="156" font-size="16" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Dashboard</text><path d="M 410 175 L 410 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 125 200 L 695 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 125 200 L 125 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 315 200 L 315 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 505 200 L 505 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 695 200 L 695 220" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><rect x="40" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="40" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="65" cy="235" rx="5" ry="5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="65" cy="246" rx="9" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="83" cy="235" rx="5" ry="5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><ellipse cx="83" cy="246" rx="9" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><text x="60" y="274" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Guest List</text><text x="60" y="296" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ View &amp; filter</text><text x="60" y="309.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Edit details</text><text x="60" y="322.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Send magic links</text><text x="60" y="335.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Approve payments</text><rect x="230" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="230" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="250" y="238" width="20" height="14" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><rect x="250" y="228" width="20" height="10" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="1"/><path d="M 253 252 L 253 258" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 267 252 L 267 258" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="250" y="279" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Table Seating</text><text x="250" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Drag-and-drop</text><text x="250" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Assign guests</text><text x="250" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Visual floor plan</text><text x="250" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Export seating</text><rect x="420" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="420" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="440" y="242" width="6" height="16" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="450" y="234" width="6" height="24" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="460" y="228" width="6" height="30" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="440" y="279" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Statistics</text><text x="440" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Registration stats</text><text x="440" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Payment status</text><text x="440" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Check-in counts</text><text x="440" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Real-time data</text><rect x="610" y="220" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="610" y="220" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><path d="M 640 255 L 640 233" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><path d="M 640 233 L 632 241" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><path d="M 640 233 L 648 241" stroke="#c9a227" fill="none" opacity="1" stroke-width="3" /><text x="630" y="279" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CSV Import</text><text x="630" y="301" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Upload CSV files</text><text x="630" y="314.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Preview &amp; validate</text><text x="630" y="327.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Map columns</text><text x="630" y="340.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Bulk import</text><path d="M 220 380 L 600 380" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 220 380 L 220 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 410 360 L 410 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 600 380 L 600 400" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><rect x="135" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="135" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="155" y="415" width="24" height="16" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><path d="M 155 415 L 167 423" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 179 415 L 167 423" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="155" y="454" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Email Templates</text><text x="155" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Magic link template</text><text x="155" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Ticket delivery</text><text x="155" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Confirmations</text><text x="155" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Preview &amp; test</text><rect x="325" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="325" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="356" cy="421" rx="11" ry="11" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><path d="M 351 422 L 356 427" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><path d="M 356 427 L 364 417" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" /><text x="345" y="454" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Check-in Log</text><text x="345" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Real-time feed</text><text x="345" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Filter by status</text><text x="345" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Override history</text><text x="345" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Export data</text><rect x="515" y="400" width="170" height="140" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="515" y="400" width="5" height="140" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><ellipse cx="546" cy="421" rx="11" ry="11" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="547" y="427" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">?</text><text x="535" y="454" font-size="16" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Help &amp; Guide</text><text x="535" y="476" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ User guide</text><text x="535" y="489.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ FAQ section</text><text x="535" y="502.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Keyboard shortcuts</text><text x="535" y="515.6" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Contact support</text><text x="690" y="57" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">v1.0 MVP</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['admin-dashboard']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'paid-registration'" x-transition class="diagram-section" id="paid-registration">
          <div class="section-header">
            <span class="section-num">04</span>
            <h2 x-text="lang === 'hu' ? 'FizetÅ‘s RegisztrÃ¡ciÃ³s Folyamat' : 'Paid Registration Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Teljes 5-lÃ©pÃ©ses regisztrÃ¡ciÃ³s folyamat fizetÅ‘ vendÃ©geknek. LÃ©pÃ©s 1: Jegy tÃ­pus vÃ¡lasztÃ¡s (egyÃ©ni 100.000 Ft / pÃ¡ros 150.000 Ft). LÃ©pÃ©s 2: SzemÃ©lyes adatok (telefon, cÃ©gnÃ©v, pozÃ­ciÃ³, Ã©trendi igÃ©nyek). LÃ©pÃ©s 3: SzÃ¡mlÃ¡zÃ¡si adatok (nÃ©v, cÃ­m, adÃ³szÃ¡m - magyar ÃFA formÃ¡tum validÃ¡lÃ¡s). LÃ©pÃ©s 4: Partner adatok (csak pÃ¡ros jegynÃ©l - nÃ©v Ã©s email). LÃ©pÃ©s 5: GDPR Ã©s lemondÃ¡si feltÃ©telek elfogadÃ¡sa. A regisztrÃ¡ciÃ³ utÃ¡n a rendszer lÃ©trehozza a vendÃ©get, regisztrÃ¡ciÃ³t, szÃ¡mlÃ¡zÃ¡si adatokat, Ã©s pÃ¡ros jegynÃ©l a partner vendÃ©get is. FizetÃ©s: Stripe Checkout kÃ¡rtyÃ¡s fizetÃ©ssel, sikeres fizetÃ©s utÃ¡n automatikus QR jegy generÃ¡lÃ¡s Ã©s email kÃ¼ldÃ©s. Banki Ã¡tutalÃ¡snÃ¡l manuÃ¡lis admin jÃ³vÃ¡hagyÃ¡s szÃ¼ksÃ©ges.' : 'Complete 5-step registration flow for paying guests. Step 1: Ticket type selection (single 100,000 Ft / paired 150,000 Ft). Step 2: Personal data (phone, company, position, dietary requirements). Step 3: Billing details (name, address, tax ID - Hungarian VAT format validation). Step 4: Partner details (paired tickets only - name and email). Step 5: GDPR and cancellation terms acceptance. After registration, the system creates guest, registration, billing info, and for paired tickets the partner guest as well. Payment: Stripe Checkout card payment, successful payment triggers automatic QR ticket generation and email delivery. Bank transfer requires manual admin approval.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1510" width="100%" style="max-width:1200px"><defs><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-262626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#262626"/></marker><marker id="ah-C4A24D" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#C4A24D"/></marker><marker id="ah-6772e5" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6772e5"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker></defs><rect x="0" y="0" width="1200" height="1510" fill="#FAF8F5"/><text x="640" y="72" font-size="32" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PAID REGISTRATION FLOW (Single &amp; Paired)</text><ellipse cx="540" cy="125" rx="60" ry="25" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="129" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><rect x="440" y="180" width="200" height="50" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="540" y="203" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link Validation</text><text x="540" y="216.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/register/paid</text><polygon points="540,260 620,300 540,340 460,300" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="296" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Type</text><text x="540" y="309.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paying_paired?</text><rect x="200" y="270" width="140" height="60" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="270" y="296" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single Ticket</text><text x="270" y="309.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Only Option</text><rect x="720" y="270" width="160" height="60" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="800" y="291" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 1: Select</text><text x="800" y="304.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single or Paired</text><text x="800" y="317.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><rect x="420" y="380" width="240" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="406" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 2: Profile Fields</text><text x="540" y="419.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Phone, Company, Position</text><text x="540" y="432.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Dietary, Seating Prefs</text><rect x="420" y="490" width="240" height="80" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="516" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 3: Billing Info</text><text x="540" y="529.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Name, Address, City</text><text x="540" y="542.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Postal, Tax Number</text><polygon points="540,600 620,640 540,680 460,640" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="637" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Paired</text><text x="540" y="651.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Selected?</text><rect x="720" y="600" width="180" height="80" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="810" y="626" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 4: Partner Details</text><text x="810" y="639.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Partner Name</text><text x="810" y="652.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Partner Email</text><rect x="440" y="720" width="200" height="60" stroke="#262626" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="746" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Step 5: Consents</text><text x="540" y="759.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GDPR + Cancellation</text><rect x="440" y="810" width="200" height="50" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="540" y="833" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/registration</text><text x="540" y="846.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/submit</text><rect x="400" y="890" width="280" height="100" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="540" y="910" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Database Transaction</text><text x="540" y="922" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">1. Update Guest + PWA Code</text><text x="540" y="934" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">2. Create Registration</text><text x="540" y="946" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">3. Create BillingInfo</text><text x="540" y="958" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">4. If Paired: Create Partner Guest</text><rect x="440" y="1020" width="200" height="50" stroke="#6772e5" fill="#eff0ff" opacity="1" stroke-width="2"/><text x="540" y="1043" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Redirect to</text><text x="540" y="1056.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><polygon points="540,1100 620,1140 540,1180 460,1140" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="540" y="1137" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="540" y="1151.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success?</text><rect x="200" y="1110" width="140" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="270" y="1136" font-size="11" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Cancel Page</text><text x="270" y="1149.2" font-size="11" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Can Retry</text><rect x="720" y="1110" width="160" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="800" y="1136" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Webhook</text><text x="800" y="1149.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">checkout.completed</text><rect x="720" y="1200" width="160" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="800" y="1226" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Update Status</text><text x="800" y="1239.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paid â†’ approved</text><rect x="440" y="1290" width="200" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="540" y="1316" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success Page</text><text x="540" y="1329.2" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Ticket Generated</text><ellipse cx="540" cy="1405" rx="60" ry="25" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="540" y="1409" font-size="14" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><path d="M 540 150 L 540 180" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 230 L 540 260" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 460 300 L 340 300" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 620 300 L 720 300" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 270 330 L 420 330 L 420 390 L 540 390" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 800 330 L 640 330 L 640 390 L 540 390" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 460 L 540 490" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 570 L 540 600" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 620 640 L 720 640" stroke="#C4A24D" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-C4A24D)"/><path d="M 540 680 L 540 720" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 810 680 L 810 780 L 540 780" stroke="#C4A24D" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-C4A24D)"/><path d="M 540 780 L 540 810" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 860 L 540 890" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 540 990 L 540 1020" stroke="#6772e5" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6772e5)"/><path d="M 540 1070 L 540 1100" stroke="#6772e5" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6772e5)"/><path d="M 460 1140 L 340 1140" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><path d="M 620 1140 L 720 1140" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 800 1170 L 800 1200" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 720 1230 L 640 1230 L 640 1310" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 540 1350 L 540 1380" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="370" y="290" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paying_single</text><text x="630" y="290" font-size="10" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paying_paired</text><text x="640" y="630" font-size="10" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED</text><text x="550" y="695" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">SINGLE</text><text x="370" y="1130" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CANCEL</text><text x="640" y="1130" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">SUCCESS</text><rect x="40" y="420" width="180" height="120" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="130" y="444" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PRICING</text><text x="55" y="472" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Single: 20,000 HUF</text><text x="55" y="502" font-size="12" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paired: 40,000 HUF</text><text x="55" y="525" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">(2 persons, 1 ticket)</text><rect x="920" y="600" width="200" height="100" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="1"/><text x="1020" y="622" font-size="12" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PAIRED LOGIC</text><text x="930" y="645" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Create partner Guest</text><text x="930" y="657" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Link via paired_with_id</text><text x="930" y="669" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Both assigned to</text><text x="930" y="681" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">  same table later</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['paid-registration']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'checkin-staff'" x-transition class="diagram-section" id="checkin-staff">
          <div class="section-header">
            <span class="section-num">05</span>
            <h2 x-text="lang === 'hu' ? 'Check-in Staff Folyamat' : 'Check-in Staff Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Mobil check-in alkalmazÃ¡s munkafolyamata a szemÃ©lyzet szÃ¡mÃ¡ra (URL: /checkin). A QR kÃ³d beolvasÃ¡s utÃ¡n a rendszer JWT tokent validÃ¡l Ã©s szÃ­nkÃ³dolt eredmÃ©nykÃ¡rtya jelenik meg: ZÃ–LD - Ã©rvÃ©nyes jegy, vendÃ©g nÃ©v Ã©s kategÃ³ria lÃ¡thatÃ³, Check In gomb aktÃ­v; SÃRGA - vendÃ©g mÃ¡r belÃ©pett, eredeti belÃ©pÃ©si idÅ‘pont Ã©s staff neve lÃ¡thatÃ³, Admin Override gomb csak admin jogosultsÃ¡ggal aktÃ­v; PIROS - Ã©rvÃ©nytelen/lejÃ¡rt QR kÃ³d, hibaÃ¼zenet jelenik meg, Scan Again gomb. A sikeres check-in utÃ¡n a rendszer rÃ¶gzÃ­ti az esemÃ©nyt a Checkin tÃ¡blÃ¡ba (staff_id, timestamp, override flag). html5-qrcode kÃ¶nyvtÃ¡r hasznÃ¡lata mobil kamerÃ¡val.' : 'Mobile check-in application workflow for event staff (URL: /checkin). After QR code scan, system validates JWT token and displays color-coded result card: GREEN - valid ticket, shows guest name and category, Check In button active; YELLOW - guest already checked in, shows original check-in time and staff name, Admin Override button only active with admin role; RED - invalid/expired QR code, error message displayed, Scan Again button. Successful check-in records event to Checkin table (staff_id, timestamp, override flag). Uses html5-qrcode library with mobile camera.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1285 1005" width="100%" style="max-width:1285px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker></defs><rect x="0" y="0" width="1285" height="1005" fill="#FAF8F5"/><text x="590" y="72" font-size="32" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO GALA - Check-in Staff Flow</text><text x="590" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Mobile QR Scanner Workflow</text><ellipse cx="590" cy="145" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="149" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><rect x="480" y="210" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="480" y="210" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="241" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Scan QR Code</text><path d="M 590 175 L 590 205" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="480" y="300" width="220" height="55" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><rect x="480" y="300" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="590" y="331" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Validate JWT Token</text><path d="M 590 270 L 590 295" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="590,390 680,435 590,480 500,435" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="590" y="432" font-size="12" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><text x="590" y="446.4" font-size="12" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status?</text><path d="M 590 360 L 590 385" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="240" y="437" font-size="12" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="590" y="507" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Duplicate</text><text x="955" y="437" font-size="12" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Invalid</text><rect x="40" y="520" width="240" height="100" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="160" y="547" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GREEN CARD</text><text x="160" y="561.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="160" y="575.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid Ticket</text><text x="160" y="590.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Name &amp; Segment</text><path d="M 500 435 L 280 520" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="470" y="540" width="240" height="100" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="590" y="567" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">YELLOW CARD</text><text x="590" y="581.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="590" y="595.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Already Checked In</text><text x="590" y="610.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Original Time &amp; Staff</text><path d="M 590 485 L 590 535" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="900" y="520" width="240" height="100" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="1020" y="547" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">RED CARD</text><text x="1020" y="561.4" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle"></text><text x="1020" y="575.8" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Invalid/Expired QR</text><text x="1020" y="590.2" font-size="12" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Error Message</text><path d="M 680 435 L 900 520" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><rect x="80" y="660" width="160" height="45" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="160" y="686" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Check In</text><path d="M 160 625 L 160 655" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="510" y="680" width="160" height="45" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><rect x="510" y="680" width="5" height="45" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="590" y="706" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Override</text><path d="M 590 645 L 590 675" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="940" y="660" width="160" height="45" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><rect x="940" y="660" width="5" height="45" stroke="#e03131" fill="#e03131" opacity="1" stroke-width="2"/><text x="1020" y="686" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Scan Again</text><path d="M 1020 625 L 1020 655" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><rect x="270" y="780" width="220" height="55" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="780" width="5" height="55" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="380" y="811" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Record Check-in</text><path d="M 160 710 L 310 775" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 520 730 L 420 775" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="270" y="870" width="220" height="55" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><rect x="270" y="870" width="5" height="55" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="380" y="901" font-size="14" fill="#333333" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Success!</text><path d="M 380 840 L 380 865" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><path d="M 1105 682 L 1205 682" stroke="#e03131" fill="none" opacity="1" stroke-width="2" /><text x="1120" y="670" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â†’ Back to Scan</text><path d="M 270 897 L 170 897" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" /><text x="80" y="900" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">â† Next Guest</text><text x="770" y="57" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">v1.0</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['checkin-staff']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'pwa-app'" x-transition class="diagram-section" id="pwa-app">
          <div class="section-header">
            <span class="section-num">06</span>
            <h2 x-text="lang === 'hu' ? 'PWA AlkalmazÃ¡s Folyamat' : 'PWA App Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'ProgresszÃ­v webalkalmazÃ¡s (PWA) teljes kommunikÃ¡ciÃ³s folyamata vendÃ©geknek. BejelentkezÃ©s: QR kÃ³d scan vagy regisztrÃ¡ciÃ³s kÃ³d (CEOG-XXXXXX) megadÃ¡sa â†’ JWT session cookie lÃ©trehozÃ¡sa. Oldalak: /pwa/dashboard (jegy kÃ¡rtya, asztal info, profil Ã¶sszefoglalÃ³), /pwa/ticket (QR megjelenÃ­tÃ©s, PNG letÃ¶ltÃ©s, offline cache), /pwa/profile (telefon, Ã©trend, Ã¼ltetÃ©si preferencia szerkesztÃ©se). API vÃ©gpontok: POST /api/pwa/auth, GET /api/pwa/profile, GET /api/pwa/ticket, PATCH /api/pwa/profile, DELETE /api/pwa/auth (kijelentkezÃ©s). Offline mÃ³d: QR kÃ³d localStorage-ban cachelve, alapadatok elÃ©rhetÅ‘k, JWT soha nem kerÃ¼l cache-be. Service Worker biztosÃ­tja az offline mÅ±kÃ¶dÃ©st.' : 'Progressive Web App (PWA) complete communication flow for guests. Login: QR code scan or registration code (CEOG-XXXXXX) entry â†’ JWT session cookie creation. Pages: /pwa/dashboard (ticket card, table info, profile summary), /pwa/ticket (QR display, PNG download, offline cache), /pwa/profile (edit phone, dietary, seating preferences). API endpoints: POST /api/pwa/auth, GET /api/pwa/profile, GET /api/pwa/ticket, PATCH /api/pwa/profile, DELETE /api/pwa/auth (logout). Offline mode: QR code cached in localStorage, basic info available, JWT never cached. Service Worker ensures offline functionality.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1320 780" width="100%" style="max-width:1320px"><defs><marker id="ah-262626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#262626"/></marker><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-737373" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker><marker id="ah-C4A24D" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#C4A24D"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker></defs><rect x="0" y="0" width="1320" height="780" fill="#FAF8F5"/><text x="640" y="72" font-size="32" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PWA APP COMMUNICATION FLOW</text><ellipse cx="80" cy="160" rx="40" ry="40" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="80" y="162" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest</text><text x="80" y="176.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User</text><rect x="220" y="100" width="400" height="600" stroke="#00A0A0" fill="#f0fafa" opacity="1" stroke-width="3"/><text x="420" y="128" font-size="18" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PWA Frontend</text><rect x="720" y="100" width="300" height="600" stroke="#262626" fill="#fafafa" opacity="1" stroke-width="3"/><text x="870" y="128" font-size="18" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">API Backend</text><rect x="1120" y="220" width="120" height="400" stroke="#737373" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="1180" y="244" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Database</text><rect x="260" y="160" width="160" height="80" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="2"/><text x="340" y="186" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa</text><text x="340" y="199.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Login Page</text><text x="340" y="212.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Scan / Code</text><polygon points="520,160 590,200 520,240 450,200" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="520" y="196" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Auth</text><text x="520" y="209.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><rect x="760" y="160" width="180" height="80" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="850" y="180" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/pwa/auth</text><text x="850" y="192" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">{token: JWT}</text><text x="850" y="204" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">or</text><text x="850" y="216" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">{code: CEOG-XXXXXX}</text><text x="600" y="170" font-size="10" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">QR Token</text><text x="600" y="230" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Reg. Code</text><rect x="260" y="280" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="340" y="302" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Set Cookie</text><text x="340" y="314" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pwa_session (JWT)</text><rect x="260" y="360" width="160" height="80" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="2"/><text x="340" y="380" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa/dashboard</text><text x="340" y="392" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Ticket Card</text><text x="340" y="404" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Table Info</text><text x="340" y="416" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Profile Summary</text><rect x="760" y="280" width="180" height="60" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="850" y="302" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GET /api/pwa/profile</text><text x="850" y="314" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Returns: guest, reg,</text><text x="850" y="326" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">table_assignment</text><rect x="450" y="360" width="140" height="80" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="520" y="380" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa/ticket</text><text x="520" y="392" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ QR Display</text><text x="520" y="404" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Download PNG</text><text x="520" y="416" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Offline Cache</text><rect x="760" y="370" width="180" height="60" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="850" y="392" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GET /api/pwa/ticket</text><text x="850" y="404" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Returns: JWT token</text><text x="850" y="416" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">for QR generation</text><rect x="260" y="480" width="160" height="80" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="2"/><text x="340" y="500" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa/profile</text><text x="340" y="512" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ View/Edit Phone</text><text x="340" y="524" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Dietary Prefs</text><text x="340" y="536" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Seating Prefs</text><rect x="760" y="470" width="180" height="60" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="850" y="492" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PATCH /api/pwa/profile</text><text x="850" y="504" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Updates: phone,</text><text x="850" y="516" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">dietary, seating</text><rect x="450" y="480" width="140" height="80" stroke="#737373" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="520" y="500" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/pwa/offline</text><text x="520" y="512" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Offline Fallback</text><text x="520" y="524" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Cached QR</text><text x="520" y="536" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Basic Info</text><rect x="260" y="600" width="160" height="50" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="340" y="622" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Logout Button</text><text x="340" y="634" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Delete Cookie</text><rect x="760" y="560" width="180" height="50" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="850" y="582" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DELETE /api/pwa/auth</text><text x="850" y="594" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Clears session cookie</text><rect x="760" y="640" width="180" height="50" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="850" y="662" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GET /api/pwa/auth/session</text><text x="850" y="674" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Verify session valid</text><rect x="1135" y="270" width="90" height="40" stroke="#737373" fill="#ffffff" opacity="1" stroke-width="1"/><text x="1180" y="293" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">guests</text><rect x="1135" y="330" width="90" height="40" stroke="#737373" fill="#ffffff" opacity="1" stroke-width="1"/><text x="1180" y="353" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">registrations</text><rect x="1135" y="390" width="90" height="40" stroke="#737373" fill="#ffffff" opacity="1" stroke-width="1"/><text x="1180" y="413" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">table_assign</text><path d="M 120 160 L 260 160" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 420 200 L 450 200" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 590 200 L 760 200" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 940 200 L 1040 200 L 1040 290 L 1135 290" stroke="#737373" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-737373)"/><path d="M 760 220 L 340 220 L 340 310" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 420 400 L 760 400 L 760 310" stroke="#262626" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-262626)"/><path d="M 590 400 L 760 400" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 420 520 L 760 520 L 760 500" stroke="#C4A24D" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-C4A24D)"/><path d="M 420 625 L 760 625 L 760 585" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><path d="M 940 310 L 1135 310" stroke="#737373" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-737373)"/><rect x="40" y="270" width="160" height="180" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="120" y="294" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LEGEND</text><text x="55" y="321" font-size="11" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€” Auth Flow</text><text x="55" y="346" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€” Data Read</text><text x="55" y="371" font-size="11" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€” Data Update</text><text x="55" y="396" font-size="11" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€” Logout</text><text x="55" y="421" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">--- DB Query</text><rect x="40" y="490" width="160" height="100" stroke="#737373" fill="#f5f5f5" opacity="1" stroke-width="1"/><text x="120" y="512" font-size="12" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OFFLINE MODE</text><text x="50" y="535" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ QR cached in</text><text x="50" y="547" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">  localStorage</text><text x="50" y="559" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ Basic info stored</text><text x="50" y="571" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â€¢ JWT never cached</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['pwa-app']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'application'" x-transition class="diagram-section" id="application">
          <div class="section-header">
            <span class="section-num">07</span>
            <h2 x-text="lang === 'hu' ? 'JelentkezÃ©si Folyamat' : 'Application Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'NyilvÃ¡nos jelentkezÃ©si folyamat nem meghÃ­vott vendÃ©geknek (Epic 7). JelentkezÃ©si Å±rlap (URL: /apply) mezÅ‘i: nÃ©v, email, telefon, cÃ©gnÃ©v, pozÃ­ciÃ³, Ã©trendi igÃ©nyek, Ã¼ltetÃ©si preferenciÃ¡k, GDPR beleegyezÃ©s. API: POST /api/apply (rate limit: 5/Ã³ra/IP). JelentkezÅ‘ lÃ©trehozÃ¡sa: guest_type=applicant, status=pending_approval. Admin felÃ¼let (/admin/applicants): JÃ“VÃHAGYÃS â†’ stÃ¡tusz approved, magic link (24 Ã³rÃ¡s lejÃ¡rattal) kÃ¼ldÃ©se, vendÃ©g paying_single tÃ­pusra mÃ³dosÃ­tÃ¡sa, fizetÅ‘s regisztrÃ¡ciÃ³s folyamat indul; ELUTASÃTÃS â†’ status rejected, elutasÃ­tÃ³ email kÃ¼ldÃ©se indoklÃ¡ssal. A jÃ³vÃ¡hagyott jelentkezÅ‘ innentÅ‘l fizetÅ‘ vendÃ©gkÃ©nt folytatja.' : 'Public application flow for non-invited guests (Epic 7). Application form (URL: /apply) fields: name, email, phone, company, position, dietary requirements, seating preferences, GDPR consent. API: POST /api/apply (rate limit: 5/hour/IP). Applicant creation: guest_type=applicant, status=pending_approval. Admin panel (/admin/applicants): APPROVE â†’ status approved, magic link (24-hour expiry) sent, guest type changed to paying_single, paid registration flow begins; REJECT â†’ status rejected, rejection email sent with reason. Approved applicant continues as paying guest from this point.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1130 860" width="100%" style="max-width:1130px"><defs><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-262626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#262626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker><marker id="ah-dc2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker></defs><rect x="0" y="0" width="1130" height="860" fill="#FAF8F5"/><text x="590" y="72" font-size="32" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">APPLICATION FLOW (JelentkezÃ©si)</text><text x="590" y="99" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Non-invited guest application process</text><rect x="40" y="140" width="350" height="480" stroke="#00A0A0" fill="#f0fafa" opacity="1" stroke-width="3"/><text x="215" y="166" font-size="16" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PUBLIC USER</text><rect x="490" y="140" width="350" height="480" stroke="#262626" fill="#fafafa" opacity="1" stroke-width="3"/><text x="665" y="166" font-size="16" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ADMIN PANEL</text><ellipse cx="215" cy="215" rx="60" ry="25" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="215" y="219" font-size="14" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><rect x="100" y="270" width="230" height="100" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="2"/><text x="215" y="291" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/apply - Application Form</text><text x="215" y="304.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Name, Email, Phone</text><text x="215" y="317.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Company, Position</text><text x="215" y="330.6" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ Dietary, Seating Prefs</text><text x="215" y="343.8" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â€¢ GDPR Consent</text><rect x="120" y="400" width="190" height="50" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="215" y="422" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST /api/apply</text><text x="215" y="434" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Rate limit: 5/hour/IP</text><rect x="100" y="480" width="230" height="70" stroke="#262626" fill="#f5f5f5" opacity="1" stroke-width="2"/><text x="215" y="502" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Create Guest Record</text><text x="215" y="514" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">guest_type: 'applicant'</text><text x="215" y="526" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: 'pending_approval'</text><rect x="120" y="575" width="190" height="40" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="215" y="596" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">&quot;We'll review &amp; notify&quot;</text><rect x="530" y="200" width="270" height="80" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="2"/><text x="665" y="226" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/admin/applicants</text><text x="665" y="239.2" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GET /api/admin/applicants</text><text x="665" y="252.4" font-size="11" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Filter: pending_approval</text><polygon points="665,310 750,360 665,410 580,360" stroke="#262626" fill="#fff3e0" opacity="1" stroke-width="2"/><text x="665" y="357" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin</text><text x="665" y="371.4" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Decision?</text><rect x="530" y="450" width="130" height="70" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="595" y="472" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">APPROVE</text><text x="595" y="484" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST .../approve</text><text x="595" y="496" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send magic link</text><rect x="680" y="450" width="130" height="70" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="745" y="472" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">REJECT</text><text x="745" y="484" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">POST .../reject</text><text x="745" y="496" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Send rejection</text><rect x="510" y="550" width="170" height="60" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="595" y="572" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email: Approval</text><text x="595" y="584" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">+ Magic Link (72h)</text><text x="595" y="596" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">type â†’ paying_single</text><rect x="700" y="550" width="120" height="60" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="760" y="575" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email: Rejection</text><text x="760" y="587" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: rejected</text><rect x="60" y="700" width="280" height="80" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="200" y="727" font-size="12" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User clicks magic link</text><text x="200" y="741.4" font-size="12" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â†’ CONTINUES AS</text><text x="200" y="755.8" font-size="12" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PAID REGISTRATION FLOW</text><ellipse cx="760" cy="725" rx="60" ry="25" stroke="#dc2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="760" y="729" font-size="14" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">END</text><path d="M 215 240 L 215 270" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 215 370 L 215 400" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><path d="M 215 450 L 215 480" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 215 550 L 215 575" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 330 515 L 430 515 L 430 240 L 530 240" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 665 280 L 665 310" stroke="#262626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-262626)"/><path d="M 600 410 L 595 450" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 730 410 L 745 450" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><path d="M 595 520 L 595 550" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 760 520 L 760 550" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><path d="M 510 595 L 360 595 L 360 725 L 340 725" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 760 610 L 760 700" stroke="#dc2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-dc2626)"/><text x="550" y="400" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPROVE</text><text x="735" y="400" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">REJECT</text><text x="360" y="340" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Appears in list</text><rect x="890" y="200" width="160" height="180" stroke="#262626" fill="#ffffff" opacity="1" stroke-width="1"/><text x="970" y="222" font-size="12" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">STATUS FLOW</text><text x="970" y="250" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending_approval</text><text x="970" y="262" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">       â†“</text><text x="970" y="274" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">   APPROVE</text><text x="970" y="286" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">       â†“</text><text x="970" y="298" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">   invited</text><text x="970" y="310" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">       â†“</text><text x="970" y="322" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">  [Paid Flow]</text><text x="970" y="334" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">       â†“</text><text x="970" y="346" font-size="10" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">registered/paid</text><text x="970" y="410" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">REJECT â†’ rejected</text><text x="970" y="422" font-size="10" fill="#dc2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(no further action)</text><rect x="890" y="450" width="160" height="70" stroke="#C4A24D" fill="#fef9e7" opacity="1" stroke-width="1"/><text x="970" y="471" font-size="11" fill="#C4A24D" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">MAGIC LINK</text><text x="970" y="495" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid for 72 hours</text><text x="970" y="507" font-size="10" fill="#262626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(vs 5 min for normal)</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['application']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'state-machine'" x-transition class="diagram-section" id="state-machine">
          <div class="section-header">
            <span class="section-num">08</span>
            <h2 x-text="lang === 'hu' ? 'ÃllapotgÃ©p Diagram' : 'State Machine Diagram'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'ÃtfogÃ³ Ã¡llapotgÃ©p diagram az Ã¶sszes entitÃ¡s Ã¡llapotÃ¡tmenetÃ©rÅ‘l. PRIMARY GUEST: invited â†’ registered â†’ (VIP: approved | FizetÅ‘: pendingâ†’paid) â†’ approved â†’ ticket_issued â†’ checked_in. PARTNER (pÃ¡ros jegynÃ©l): linked â†’ pending_form â†’ form_submitted â†’ waiting_payment â†’ (primary fizet) â†’ ticket_issued â†’ checked_in. APPLICANT (Epic 7): apply â†’ pending_approval â†’ (approve|reject) â†’ approved â†’ magic_link â†’ registered â†’ folytatÃ¡s PRIMARY-kÃ©nt. PAYMENT: pending â†’ paid/failed/refunded. TICKET TYPES: vip_free (ingyenes, azonnali QR), paid_single (1 vendÃ©g, fizetÃ©s szÃ¼ksÃ©ges), paid_paired (2 vendÃ©g, partner is kap jegyet), partner (primary-hoz kapcsolva). TABLE STATUS: available/full/reserved. CHECK-IN: nincs belÃ©pve â†’ checked_in. A partner a primary fizetÃ©sÃ©tÅ‘l fÃ¼gg, a jÃ³vÃ¡hagyott jelentkezÅ‘ primary-kÃ©nt folytatja.' : 'Comprehensive state machine diagram of all entity state transitions. PRIMARY GUEST: invited â†’ registered â†’ (VIP: approved | Paying: pendingâ†’paid) â†’ approved â†’ ticket_issued â†’ checked_in. PARTNER (paired tickets): linked â†’ pending_form â†’ form_submitted â†’ waiting_payment â†’ (primary pays) â†’ ticket_issued â†’ checked_in. APPLICANT (Epic 7): apply â†’ pending_approval â†’ (approve|reject) â†’ approved â†’ magic_link â†’ registered â†’ continues as PRIMARY. PAYMENT: pending â†’ paid/failed/refunded. TICKET TYPES: vip_free (free, instant QR), paid_single (1 guest, payment required), paid_paired (2 guests, partner also gets ticket), partner (linked to primary). TABLE STATUS: available/full/reserved. CHECK-IN: not checked â†’ checked_in. Partner depends on primary payment, approved applicant continues as primary.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1136 876" width="100%" style="max-width:1136px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-e03131" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#e03131"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-1971c2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#1971c2"/></marker></defs><rect x="0" y="0" width="1136" height="876" fill="#FAF8F5"/><text x="580" y="68" font-size="28" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - State Machine Diagram</text><text x="580" y="89" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Including Partner + Applicant Guest States</text><text x="40" y="126" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY GUEST STATUS</text><ellipse cx="90" cy="175" rx="50" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="90" y="178" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">invited</text><path d="M 140 175 L 200 175" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="145" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="255" cy="175" rx="55" ry="25" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="255" y="178" font-size="13" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">registered</text><path d="M 310 175 L 370 175" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="312" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">VIP/pay</text><ellipse cx="425" cy="175" rx="55" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="425" y="178" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">approved</text><path d="M 480 175 L 540 175" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="485" y="165" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">issue QR</text><ellipse cx="600" cy="175" rx="60" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="600" y="178" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ticket_issued</text><ellipse cx="250" cy="245" rx="50" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="250" y="248" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">declined</text><path d="M 90 200 L 90 225 L 200 225" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="110" y="225" font-size="10" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">decline</text><text x="40" y="306" font-size="16" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PARTNER GUEST STATUS (Paired Tickets)</text><ellipse cx="90" cy="355" rx="50" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="90" y="358" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">linked</text><path d="M 140 355 L 190 355" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="138" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">send link</text><ellipse cx="250" cy="355" rx="60" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="250" y="357" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending_form</text><path d="M 310 355 L 360 355" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="313" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="425" cy="355" rx="65" ry="25" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="425" y="357" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">form_submitted</text><path d="M 490 355 L 540 355" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="488" y="345" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">wait pay</text><ellipse cx="605" cy="355" rx="65" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="605" y="357" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">waiting_payment</text><path d="M 670 355 L 720 355" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="668" y="345" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid</text><ellipse cx="780" cy="355" rx="60" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="780" y="357" font-size="12" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ticket_issued</text><path d="M 255 200 L 255 330" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="263" y="269" font-size="9" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY creates</text><text x="263" y="279.8" font-size="9" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paired ticket</text><path d="M 600 200 L 600 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="608" y="259" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY payment</text><text x="608" y="269.8" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">unlocks PARTNER</text><text x="40" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAYMENT STATUS</text><ellipse cx="90" cy="475" rx="50" ry="25" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="90" y="478" font-size="13" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending</text><path d="M 140 475 L 220 475" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="150" y="464" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Stripe/admin</text><ellipse cx="260" cy="475" rx="40" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="260" y="478" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">paid</text><ellipse cx="90" cy="555" rx="50" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="90" y="558" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">failed</text><path d="M 90 500 L 90 530" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="98" y="517" font-size="9" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">error</text><ellipse cx="270" cy="555" rx="50" ry="25" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="270" y="558" font-size="13" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">refunded</text><path d="M 260 500 L 260 530" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="268" y="517" font-size="9" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">refund</text><rect x="40" y="595" width="290" height="50" stroke="#f08c00" fill="none" opacity="1" stroke-width="1"/><text x="50" y="613" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED TICKET: Primary may have</text><text x="50" y="625" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1 or 2 payments (different methods)</text><text x="380" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">TICKET TYPES</text><rect x="380" y="450" width="6" height="35" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="386" y="450" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="472" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">vip_free</text><text x="505" y="470" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Free, instant QR</text><rect x="380" y="490" width="6" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="386" y="490" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="512" font-size="12" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid_single</text><text x="505" y="510" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1 guest, payment</text><rect x="380" y="530" width="6" height="35" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="386" y="530" width="110" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="398" y="552" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">paid_paired</text><text x="505" y="550" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">2 guests, +partner</text><rect x="380" y="570" width="6" height="35" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="386" y="570" width="110" height="35" stroke="#f08c00" fill="none" opacity="1" stroke-width="1"/><text x="398" y="592" font-size="12" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">partner</text><text x="505" y="590" font-size="10" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Linked to primary</text><text x="660" y="426" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">TABLE STATUS</text><rect x="660" y="450" width="90" height="40" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="705" y="473" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">available</text><rect x="760" y="450" width="60" height="40" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="790" y="473" font-size="11" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">full</text><rect x="830" y="450" width="80" height="40" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="870" y="473" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">reserved</text><text x="660" y="510" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PAIRED: Primary + Partner assigned</text><text x="660" y="522" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">to same table (2 seats together)</text><text x="660" y="566" font-size="16" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CHECK-IN EVENT</text><ellipse cx="715" cy="607.5" rx="55" ry="22.5" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="715" y="609" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Not checked</text><path d="M 770 607 L 820 607" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="775" y="597" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">QR scan</text><ellipse cx="870" cy="607.5" rx="50" ry="22.5" stroke="#2f9e44" fill="none" opacity="1" stroke-width="3"/><text x="870" y="609" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Checked in</text><text x="660" y="647" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Primary &amp; Partner checked in separately</text><text x="660" y="657.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">(each has own QR code)</text><text x="680" y="126" font-size="16" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICANT STATUS (Epic 7)</text><ellipse cx="720" cy="175" rx="40" ry="25" stroke="#525252" fill="none" opacity="1" stroke-width="2"/><text x="720" y="178" font-size="13" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">apply</text><path d="M 760 175 L 800 175" stroke="#1971c2" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-1971c2)"/><text x="762" y="164" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">submit</text><ellipse cx="865" cy="175" rx="65" ry="25" stroke="#1971c2" fill="none" opacity="1" stroke-width="2"/><text x="865" y="176" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">pending_approval</text><path d="M 865 200 L 865 225" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="873" y="214" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">approve</text><ellipse cx="865" cy="250" rx="65" ry="25" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2"/><text x="865" y="253" font-size="13" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">approved</text><text x="800" y="289" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â†’ magic link sent</text><text x="800" y="299.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â†’ 72h expiry</text><path d="M 930 175 L 960 175" stroke="#e03131" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-e03131)"/><text x="933" y="164" font-size="9" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">reject</text><ellipse cx="1005" cy="175" rx="45" ry="25" stroke="#e03131" fill="none" opacity="1" stroke-width="2"/><text x="1005" y="178" font-size="13" fill="#e03131" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">rejected</text><rect x="40" y="680" width="6" height="115" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="680" width="1010" height="115" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="60" y="700" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">COMPLETE GUEST JOURNEYS</text><text x="60" y="721" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PRIMARY: invited â†’ registered â†’ (VIP: approved | Paying: pending â†’ paid) â†’ approved â†’ ticket_issued â†’ checked_in</text><text x="60" y="746" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">PARTNER: linked â†’ pending_form â†’ form_submitted â†’ waiting_payment â†’ (primary pays) â†’ ticket_issued â†’ checked_in</text><text x="60" y="771" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICANT: apply â†’ pending_approval â†’ (admin: approve | reject) â†’ approved â†’ magic_link (72h) â†’ registered â†’ ... (as PRIMARY)</text><text x="60" y="791" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Partner depends on Primary payment â€¢ Applicant becomes Primary after admin approval</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['state-machine']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'payment-flow'" x-transition class="diagram-section" id="payment-flow">
          <div class="section-header">
            <span class="section-num">09</span>
            <h2 x-text="lang === 'hu' ? 'FizetÃ©si Folyamat' : 'Payment Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'KettÅ‘s fizetÃ©si Ãºtvonal egyÃ©ni Ã©s pÃ¡ros jegyekhez. EGYÃ‰NI JEGY: FizetÃ©si mÃ³d vÃ¡lasztÃ¡s (kÃ¡rtya/banki) â†’ 1 tranzakciÃ³ feldolgozÃ¡sa â†’ QR + email kÃ¼ldÃ©s. PÃROS JEGY: A primary vendÃ©g KÃœLÃ–N-KÃœLÃ–N vÃ¡laszthat fizetÃ©si mÃ³dot a sajÃ¡t Ã©s a partner jegyÃ©hez! Azonos mÃ³dszer (kÃ¡rtya+kÃ¡rtya vagy bank+bank) = 1 tranzakciÃ³, vegyes mÃ³dszer (kÃ¡rtya+bank) = 2 tranzakciÃ³. Stripe webhook (checkout.session.completed) automatikusan frissÃ­ti a stÃ¡tuszt Ã©s generÃ¡l jegyet. Banki Ã¡tutalÃ¡snÃ¡l admin manuÃ¡lis jÃ³vÃ¡hagyÃ¡s szÃ¼ksÃ©ges az /admin/payments oldalon. Sikeres fizetÃ©s utÃ¡n: PRIMARY azonnal kap QR jegyet Ã©s emailt, PARTNER sajÃ¡t email cÃ­mÃ©re kapja a jegyÃ©t. MindkÃ©t vendÃ©g automatikusan ugyanahhoz az asztalhoz kerÃ¼l hozzÃ¡rendelÃ©sre.' : 'Dual payment processing paths for single and paired tickets. SINGLE TICKET: Payment method selection (card/bank) â†’ 1 transaction processing â†’ QR + email delivery. PAIRED TICKET: Primary guest can select DIFFERENT payment methods for own and partner ticket! Same method (card+card or bank+bank) = 1 transaction, mixed method (card+bank) = 2 transactions. Stripe webhook (checkout.session.completed) automatically updates status and generates ticket. Bank transfer requires manual admin approval on /admin/payments page. After successful payment: PRIMARY immediately receives QR ticket and email, PARTNER receives ticket to their own email address. Both guests are automatically assigned to the same table.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1160 995" width="100%" style="max-width:1160px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-f08c00" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker></defs><rect x="0" y="0" width="1160" height="995" fill="#FAF8F5"/><text x="580" y="64" font-size="24" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - Payment Flow</text><text x="580" y="89" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Single &amp; Paired Ticket Processing</text><ellipse cx="580" cy="132.5" rx="60" ry="22.5" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="580" y="136" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><path d="M 580 155 L 580 185" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="580,185 660,225 580,265 500,225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="580" y="224" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ticket</text><text x="580" y="238.4" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type?</text><path d="M 500 225 L 280 275" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="320" y="236" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Single Ticket</text><path d="M 660 225 L 880 275" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="760" y="236" font-size="11" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Paired Ticket</text><text x="205" y="294" font-size="14" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â”€â”€â”€ SINGLE TICKET FLOW â”€â”€â”€</text><polygon points="280,310 355,345 280,380 205,345" stroke="#6741d9" fill="none" opacity="1" stroke-width="2"/><text x="280" y="342" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="280" y="354" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><path d="M 205 345 L 140 380" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><text x="125" y="349" font-size="9" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card</text><path d="M 355 345 L 420 380" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="385" y="349" font-size="9" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank</text><rect x="70" y="380" width="5" height="45" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="75" y="380" width="130" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="140" y="403" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><rect x="355" y="380" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="360" y="380" width="130" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="425" y="403" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank Transfer</text><path d="M 140 425 L 230 460" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 425 425 L 325 460" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="180" y="460" width="5" height="45" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="185" y="460" width="190" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="280" y="480" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Process Payment</text><text x="280" y="492" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(1 Transaction)</text><path d="M 280 505 L 280 535" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="180" y="535" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="185" y="535" width="190" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="280" y="558" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Generate QR + Email</text><text x="880" y="294" font-size="14" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">â”€â”€â”€ PAIRED TICKET FLOW â”€â”€â”€</text><text x="780" y="325" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SELECT FOR OWN TICKET</text><polygon points="780,335 855,365 780,395 705,365" stroke="#c9a227" fill="none" opacity="1" stroke-width="2"/><text x="780" y="362" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="780" y="374" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><rect x="635" y="405" width="5" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="640" y="405" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="677.5" y="425" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card</text><rect x="845" y="405" width="5" height="35" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="850" y="405" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="887.5" y="425" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank</text><path d="M 720 375 L 677 405" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><path d="M 840 375 L 887 405" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="780" y="425" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OR</text><path d="M 780 440 L 780 465" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><text x="780" y="480" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SELECT FOR PARTNER TICKET</text><polygon points="780,490 855,520 780,550 705,520" stroke="#f08c00" fill="none" opacity="1" stroke-width="2"/><text x="780" y="517" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="780" y="529" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><rect x="635" y="560" width="5" height="35" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="640" y="560" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="677.5" y="580" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card</text><rect x="845" y="560" width="5" height="35" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="850" y="560" width="75" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="887.5" y="580" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank</text><path d="M 720 530 L 677 560" stroke="#6741d9" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-6741d9)"/><path d="M 840 530 L 887 560" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><text x="780" y="580" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OR</text><path d="M 780 595 L 780 620" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="675" y="620" width="5" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="680" y="620" width="200" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="642" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Process Payments</text><text x="780" y="654" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(1 or 2 Transactions</text><text x="780" y="666" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">based on method mix)</text><rect x="900" y="615" width="180" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="910" y="629" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Same method = 1 tx</text><text x="910" y="639.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card+Card â†’ 1 Stripe</text><text x="910" y="650.6" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank+Bank â†’ 1 transfer</text><text x="910" y="661.4" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start"></text><text x="910" y="672.2" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Mixed = 2 tx</text><path d="M 780 685 L 780 710" stroke="#2f9e44" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2f9e44)"/><rect x="675" y="710" width="5" height="45" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="680" y="710" width="200" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="730" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PRIMARY: QR + Email</text><text x="780" y="742" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(immediately)</text><path d="M 780 755 L 780 780" stroke="#f08c00" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-f08c00)"/><rect x="675" y="780" width="5" height="45" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><rect x="680" y="780" width="200" height="45" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="780" y="800" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PARTNER: QR + Email</text><text x="780" y="812" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(to partner's email)</text><path d="M 280 580 L 480 880" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 780 825 L 480 880" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><ellipse cx="480" cy="892.5" rx="60" ry="22.5" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="480" y="897" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Done</text><rect x="40" y="630" width="200" height="180" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="140" y="652" font-size="12" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LEGEND</text><ellipse cx="61" cy="676" rx="6" ry="6" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><text x="75" y="678" font-size="10" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Card (Stripe)</text><ellipse cx="61" cy="696" rx="6" ry="6" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><text x="75" y="698" font-size="10" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank Transfer</text><ellipse cx="61" cy="716" rx="6" ry="6" stroke="#f08c00" fill="#f08c00" opacity="1" stroke-width="2"/><text x="75" y="718" font-size="10" fill="#f08c00" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Partner Flow</text><ellipse cx="61" cy="736" rx="6" ry="6" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="75" y="738" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Decision/Process</text><text x="50" y="769" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Primary guest can select</text><text x="50" y="779.8" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DIFFERENT payment methods</text><text x="50" y="790.6" font-size="9" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">for own + partner tickets</text><rect x="900" y="770" width="180" height="60" stroke="#c9a227" fill="none" opacity="1" stroke-width="1"/><text x="990" y="789" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Both PRIMARY + PARTNER</text><text x="990" y="799.8" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">assigned to SAME TABLE</text><text x="990" y="810.6" font-size="9" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(automatically linked)</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['payment-flow']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'system-architecture'" x-transition class="diagram-section" id="system-architecture">
          <div class="section-header">
            <span class="section-num">10</span>
            <h2 x-text="lang === 'hu' ? 'Rendszer ArchitektÃºra' : 'System Architecture'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Technikai architektÃºra nÃ©gy rÃ©tegben. CLIENT LAYER: Guest Browser (regisztrÃ¡ciÃ³, fizetÃ©si stÃ¡tusz), Admin Dashboard (vendÃ©gkezelÃ©s, Ã¼ltetÃ©s, riportok), Check-in Staff (mobil PWA, QR scanner), Email Client (magic linkek, e-jegyek), Stripe Checkout (hosted payment page), PWA Guest App (Service Worker, offline QR, push). APPLICATION LAYER (Next.js 14+): React Components (app/: (auth)/register, admin/, checkin/, pwa/, apply/), API Route Handlers (app/api/: registration/, stripe/webhook, checkin/, admin/), Business Logic (lib/services/: registration.ts, payment.ts, checkin.ts, seating.ts), Utilities & Auth (lib/: auth/magic-link, db/prisma, utils/qr-code, middleware.ts). DATA LAYER: Prisma ORM (type-safe queries, migrations), MySQL 8.0 Docker (11 Prisma modell: guests, registrations, payments, checkins, tables, users, billing_info, email_*). EXTERNAL SERVICES: Stripe API (Checkout, Webhooks), SMTP Nodemailer (magic links), QR libs (qrcode, html5-qrcode), Firebase FCM (push notifications - Epic 6). INFRASTRUCTURE: Vercel (Next.js), Docker (MySQL dev), PlanetScale (production MySQL), HTTPS auto.' : 'Technical architecture across four layers. CLIENT LAYER: Guest Browser (registration, payment status), Admin Dashboard (guest management, seating, reports), Check-in Staff (mobile PWA, QR scanner), Email Client (magic links, e-tickets), Stripe Checkout (hosted payment page), PWA Guest App (Service Worker, offline QR, push). APPLICATION LAYER (Next.js 14+): React Components (app/: (auth)/register, admin/, checkin/, pwa/, apply/), API Route Handlers (app/api/: registration/, stripe/webhook, checkin/, admin/), Business Logic (lib/services/: registration.ts, payment.ts, checkin.ts, seating.ts), Utilities & Auth (lib/: auth/magic-link, db/prisma, utils/qr-code, middleware.ts). DATA LAYER: Prisma ORM (type-safe queries, migrations), MySQL 8.0 Docker (11 Prisma models: guests, registrations, payments, checkins, tables, users, billing_info, email_*). EXTERNAL SERVICES: Stripe API (Checkout, Webhooks), SMTP Nodemailer (magic links), QR libs (qrcode, html5-qrcode), Firebase FCM (push notifications - Epic 6). INFRASTRUCTURE: Vercel (Next.js), Docker (MySQL dev), PlanetScale (production MySQL), HTTPS auto.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1060 730" width="100%" style="max-width:1060px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-2f9e44" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-6741d9" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker></defs><rect x="0" y="0" width="1060" height="730" fill="#FAF8F5"/><text x="530" y="64" font-size="24" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CEO Gala - System Architecture</text><text x="40" y="104" font-size="14" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CLIENT LAYER</text><rect x="40" y="110" width="940" height="2" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="40" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="113" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Browser</text><text x="113" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Registration</text><text x="113" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment Status</text><rect x="200" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="206" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="273" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Dashboard</text><text x="273" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest Management</text><text x="273" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Seating, Reports</text><rect x="360" y="125" width="6" height="65" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="366" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="433" y="146" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Check-in Staff</text><text x="433" y="159.2" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Mobile PWA</text><text x="433" y="172.4" font-size="11" fill="#a3a3a3" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Scanner</text><rect x="520" y="125" width="6" height="65" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="526" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="593" y="146" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email Client</text><text x="593" y="159.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Links</text><text x="593" y="172.4" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">E-Tickets</text><rect x="680" y="125" width="6" height="65" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="686" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="753" y="146" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><text x="753" y="159.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Hosted Page</text><text x="753" y="172.4" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card Payment</text><rect x="840" y="125" width="6" height="65" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><rect x="846" y="125" width="134" height="65" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="913" y="146" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PWA Guest App</text><text x="913" y="159.2" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Service Worker</text><text x="913" y="172.4" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Offline QR/Push</text><path d="M 113 190 L 113 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 273 190 L 273 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><path d="M 433 190 L 433 225" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><text x="40" y="249" font-size="14" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">APPLICATION LAYER (Next.js 14+)</text><rect x="40" y="255" width="940" height="2" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="40" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="46" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="55" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">React Components</text><text x="55" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">app/</text><text x="55" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ (auth)/register</text><text x="55" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ admin/</text><text x="55" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ checkin/</text><text x="55" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ pwa/ (Epic 6)</text><text x="55" y="365" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â””â”€â”€ apply/ (Epic 7)</text><rect x="240" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="246" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="255" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">API Route Handlers</text><text x="255" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">app/api/</text><text x="255" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ registration/</text><text x="255" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ stripe/webhook</text><text x="255" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ checkin/</text><text x="255" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â””â”€â”€ admin/</text><rect x="440" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="446" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="455" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Business Logic</text><text x="455" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">lib/services/</text><text x="455" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ registration.ts</text><text x="455" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ payment.ts</text><text x="455" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ checkin.ts</text><text x="455" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â””â”€â”€ seating.ts</text><rect x="640" y="270" width="6" height="120" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="646" y="270" width="174" height="120" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="655" y="288" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Utilities &amp; Auth</text><text x="655" y="305" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">lib/</text><text x="655" y="317" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ auth/magic-link</text><text x="655" y="329" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â”œâ”€â”€ db/prisma</text><text x="655" y="341" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">â””â”€â”€ utils/qr-code</text><text x="655" y="353" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start"></text><text x="655" y="365" font-size="10" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">middleware.ts</text><path d="M 220 330 L 440 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-2f9e44)"/><path d="M 420 330 L 440 330" stroke="#2f9e44" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-2f9e44)"/><text x="40" y="424" font-size="14" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DATA LAYER</text><rect x="40" y="430" width="380" height="2" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="40" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="46" y="445" width="134" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="113" y="466" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Prisma ORM</text><text x="113" y="479.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Type-safe queries</text><text x="113" y="492.4" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Migrations</text><rect x="200" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="206" y="445" width="214" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="313" y="460" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">MySQL 8.0 (Docker)</text><text x="313" y="472" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">11 Prisma Models</text><text x="313" y="484" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">guests, registrations, payments, checkins</text><text x="313" y="496" font-size="10" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">tables, users, billing_info, email_*</text><path d="M 180 482 L 200 482" stroke="#c9a227" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-c9a227)"/><text x="440" y="424" font-size="14" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">EXTERNAL SERVICES</text><rect x="440" y="430" width="540" height="2" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="440" y="445" width="6" height="75" stroke="#6741d9" fill="#6741d9" opacity="1" stroke-width="2"/><rect x="446" y="445" width="114" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="503" y="466" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe API</text><text x="503" y="479.2" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Checkout</text><text x="503" y="492.4" font-size="11" fill="#6741d9" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Webhooks</text><rect x="580" y="445" width="6" height="75" stroke="#2f9e44" fill="#2f9e44" opacity="1" stroke-width="2"/><rect x="586" y="445" width="114" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="643" y="466" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SMTP</text><text x="643" y="479.2" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Nodemailer</text><text x="643" y="492.4" font-size="11" fill="#2f9e44" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Links</text><rect x="720" y="445" width="6" height="75" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><rect x="726" y="445" width="94" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="773" y="466" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR Libs</text><text x="773" y="479.2" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">qrcode</text><text x="773" y="492.4" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">html5-qrcode</text><rect x="840" y="445" width="6" height="75" stroke="#1971c2" fill="#1971c2" opacity="1" stroke-width="2"/><rect x="846" y="445" width="134" height="75" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="913" y="466" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Firebase FCM</text><text x="913" y="479.2" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Push Notifications</text><text x="913" y="492.4" font-size="11" fill="#1971c2" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(Epic 6)</text><path d="M 533 390 L 113 445" stroke="#c9a227" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-c9a227)"/><path d="M 533 390 L 533 445" stroke="#6741d9" fill="none" opacity="1" stroke-width="1" marker-end="url(#ah-6741d9)"/><text x="40" y="554" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">INFRASTRUCTURE</text><rect x="40" y="560" width="940" height="2" stroke="#525252" fill="#525252" opacity="1" stroke-width="2"/><rect x="40" y="575" width="140" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="110" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Vercel (Next.js)</text><rect x="200" y="575" width="140" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="270" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Docker (MySQL dev)</text><rect x="360" y="575" width="150" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="435" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PlanetScale (MySQL)</text><rect x="530" y="575" width="100" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="580" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">HTTPS (auto)</text><rect x="650" y="575" width="170" height="35" stroke="#525252" fill="none" opacity="1" stroke-width="1"/><text x="735" y="594" font-size="11" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Environment (.env.local)</text><text x="510" y="641" font-size="11" fill="#525252" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Tech Stack: Next.js 14+ | TypeScript | Prisma ORM | MySQL 8.0 | Stripe | Nodemailer | Firebase FCM | Tailwind CSS | PWA</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['system-architecture']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>


        <section x-show="activeTab === 'email-logs'" x-transition class="diagram-section" id="email-logs">
          <div class="section-header">
            <span class="section-num">13</span>
            <h2 x-text="lang === 'hu' ? 'Email NaplÃ³ Admin Folyamat' : 'Email Logs Admin Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Email naplÃ³ kezelÃ©si munkafolyamat az admin oldalon (/admin/email-logs). Az EmailLog tÃ¡bla tartalmazza az Ã¶sszes kÃ¼ldÃ¶tt email rekordjÃ¡t: guest_id, email_type (magic_link, ticket, reminder), status (pending, sent, failed, bounced), error_message, sent_at, created_at. A felÃ¼let lehetÅ‘sÃ©gei: statisztikÃ¡k megtekintÃ©se (kÃ¼ldÃ¶tt/sikeres/sikertelen szÃ¡mlÃ¡lÃ³k), szÅ±rÃ©s stÃ¡tusz Ã©s tÃ­pus szerint, keresÃ©s vendÃ©g email vagy nÃ©v alapjÃ¡n, email tartalom rÃ©szletek modal ablakban (subject, body preview, cÃ­mzett adatok), ÃºjrakÃ¼ldÃ©s sikertelen emaileknÃ©l. Rate limit monitoring: 5 email/tÃ­pus/Ã³ra Ã©s 20 Ã¶sszesen/Ã³ra per vendÃ©g. HibakezelÃ©s: exponenciÃ¡lis retry (3 kÃ­sÃ©rlet: 1s, 2s, 4s), bounce kezelÃ©s, delivery tracking. API vÃ©gpont: GET /api/admin/email-logs (pagination, filters).' : 'Email log management workflow on admin page (/admin/email-logs). EmailLog table contains all sent email records: guest_id, email_type (magic_link, ticket, reminder), status (pending, sent, failed, bounced), error_message, sent_at, created_at. Interface features: view statistics (sent/success/failed counters), filter by status and type, search by guest email or name, email content details in modal (subject, body preview, recipient data), resend for failed emails. Rate limit monitoring: 5 emails/type/hour and 20 total/hour per guest. Error handling: exponential retry (3 attempts: 1s, 2s, 4s), bounce handling, delivery tracking. API endpoint: GET /api/admin/email-logs (pagination, filters).'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 770 810" width="100%" style="max-width:770px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-00A0A0" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#00A0A0"/></marker><marker id="ah-DC2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#DC2626"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker><marker id="ah-737373" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker></defs><rect x="0" y="0" width="770" height="810" fill="#FAF8F5"/><text x="350" y="68" font-size="28" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email Logs Admin Flow</text><text x="350" y="94" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin views, filters, and manages email delivery logs</text><ellipse cx="350" cy="145" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="350" y="151" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><path d="M 350 170 L 350 210" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="250" y="220" width="200" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="350" y="249" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Navigate to</text><text x="350" y="265.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email Logs page</text><path d="M 350 280 L 350 320" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="250" y="330" width="200" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="350" y="354" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">View email list</text><text x="350" y="370.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">with statistics</text><path d="M 350 390 L 350 430" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="250" y="440" width="200" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="350" y="464" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Filter by status,</text><text x="350" y="480.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">type, or search</text><path d="M 350 500 L 350 540" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="350,550 420,590 350,630 280,590" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="350" y="587" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Select</text><text x="350" y="601.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Action?</text><path d="M 420 590 L 500 590" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><text x="455" y="582" font-size="12" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">View</text><rect x="510" y="560" width="160" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="590" y="589" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">View email</text><text x="590" y="605.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">details modal</text><path d="M 280 590 L 200 590" stroke="#00A0A0" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-00A0A0)"/><text x="205" y="582" font-size="12" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Delete</text><rect x="40" y="560" width="160" height="60" stroke="#DC2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="120" y="589" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm</text><text x="120" y="605.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">deletion</text><path d="M 120 620 L 120 670" stroke="#DC2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-DC2626)"/><rect x="40" y="680" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="120" y="709" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email log deleted</text><path d="M 200 705 L 300 705" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><ellipse cx="350" cy="705" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="350" y="711" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">End</text><path d="M 590 620 L 590 680 L 350 680 L 350 645" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><rect x="510" y="120" width="180" height="120" stroke="#d4d4d4" fill="#fafafa" opacity="1" stroke-width="1"/><text x="520" y="144" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Legend</text><text x="520" y="166" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Gold = Start/End/Process</text><text x="520" y="186" font-size="11" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Teal = Decision point</text><text x="520" y="206" font-size="11" fill="#DC2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Red = Delete action</text><text x="520" y="226" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Green = Success</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['email-logs']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'user-management'" x-transition class="diagram-section" id="user-management">
          <div class="section-header">
            <span class="section-num">14</span>
            <h2 x-text="lang === 'hu' ? 'FelhasznÃ¡lÃ³ KezelÃ©s Folyamat' : 'User Management Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Admin Ã©s staff felhasznÃ¡lÃ³ kezelÃ©si munkafolyamat az /admin/users oldalon. A User tÃ¡bla tÃ¡rolja a rendszer felhasznÃ¡lÃ³it (email UNIQUE, password_hash bcrypt cost=12, role enum). MÅ±veletek: (1) Ãšj felhasznÃ¡lÃ³ - Add User gomb, kÃ¶telezÅ‘ mezÅ‘k: nÃ©v, email, jelszÃ³ (min. 8 karakter, szÃ¡m + nagybetÅ±), szerepkÃ¶r kivÃ¡lasztÃ¡sa; (2) SzerkesztÃ©s - ceruza ikon, adatok mÃ³dosÃ­tÃ¡sa, jelszÃ³ opcionÃ¡lis; (3) TÃ¶rlÃ©s - kuka ikon, megerÅ‘sÃ­tÅ‘ dialÃ³gus szÃ¼ksÃ©ges. SzerepkÃ¶rÃ¶k: ADMIN - teljes hozzÃ¡fÃ©rÃ©s minden funkciÃ³hoz; STAFF - check-in scanner Ã©s vendÃ©g lista megtekintÃ©s, de nincs tÃ¶rlÃ©si/jÃ³vÃ¡hagyÃ¡si jog. API vÃ©gpontok: GET/POST /api/admin/users, PATCH/DELETE /api/admin/users/{id}. BiztonsÃ¡gi szabÃ¡lyok: admin nem tÃ¶rÃ¶lheti sajÃ¡t magÃ¡t, jelszÃ³ soha nem jelenik meg visszaolvasÃ¡skor.' : 'Admin and staff user management workflow on /admin/users page. User table stores system users (email UNIQUE, password_hash bcrypt cost=12, role enum). Operations: (1) New user - Add User button, required fields: name, email, password (min. 8 chars, number + uppercase), role selection; (2) Edit - pencil icon, modify data, password optional; (3) Delete - trash icon, confirmation dialog required. Roles: ADMIN - full access to all functions; STAFF - check-in scanner and guest list view, but no delete/approval rights. API endpoints: GET/POST /api/admin/users, PATCH/DELETE /api/admin/users/{id}. Security rules: admin cannot delete themselves, password never shown on read.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 930 870" width="100%" style="max-width:930px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker><marker id="ah-2563EB" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2563EB"/></marker><marker id="ah-DC2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#DC2626"/></marker><marker id="ah-737373" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker></defs><rect x="0" y="0" width="930" height="870" fill="#FAF8F5"/><text x="380" y="68" font-size="28" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User Management Flow</text><text x="380" y="94" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin creates, edits, and deletes system users (Admin/Staff)</text><ellipse cx="380" cy="145" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="380" y="151" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><path d="M 380 170 L 380 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="280" y="210" width="200" height="50" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="380" y="237" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Navigate to Users page</text><path d="M 380 260 L 380 290" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="280" y="300" width="200" height="50" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="380" y="327" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">View user list</text><path d="M 380 350 L 380 390" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="380,400 450,440 380,480 310,440" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="380" y="437" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Select</text><text x="380" y="451.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Action?</text><path d="M 310 440 L 200 440" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="240" y="432" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Add</text><rect x="40" y="415" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="120" y="442" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Click + Add User</text><path d="M 120 465 L 120 500" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="40" y="510" width="160" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="120" y="532" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Fill form:</text><text x="120" y="546.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Name, Email, Pass, Role</text><path d="M 120 570 L 120 605" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="40" y="615" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="120" y="642" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User created</text><path d="M 380 480 L 380 530" stroke="#2563EB" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2563EB)"/><text x="390" y="507" font-size="12" fill="#2563EB" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Edit</text><rect x="280" y="540" width="200" height="60" stroke="#2563EB" fill="#eff6ff" opacity="1" stroke-width="2"/><text x="380" y="564" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Click pencil icon,</text><text x="380" y="580.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">edit user details</text><path d="M 380 600 L 380 635" stroke="#2563EB" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2563EB)"/><rect x="280" y="645" width="200" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="380" y="672" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User updated</text><path d="M 450 440 L 560 440" stroke="#DC2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-DC2626)"/><text x="515" y="432" font-size="12" fill="#DC2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Delete</text><rect x="560" y="415" width="160" height="50" stroke="#DC2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="640" y="442" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Click trash icon</text><path d="M 640 465 L 640 510" stroke="#DC2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-DC2626)"/><rect x="560" y="520" width="160" height="50" stroke="#DC2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="640" y="547" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm deletion</text><path d="M 640 570 L 640 615" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="560" y="625" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="640" y="652" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">User deleted</text><ellipse cx="380" cy="765" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="380" y="771" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">End</text><path d="M 120 665 L 120 765 L 330 765" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><path d="M 380 695 L 380 740" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><path d="M 640 675 L 640 765 L 430 765" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><rect x="560" y="120" width="180" height="140" stroke="#d4d4d4" fill="#fafafa" opacity="1" stroke-width="1"/><text x="570" y="144" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Legend</text><text x="570" y="166" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Gold = Start/End/Process</text><text x="570" y="186" font-size="11" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Teal = Decision point</text><text x="570" y="206" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Green = Create/Success</text><text x="570" y="226" font-size="11" fill="#2563EB" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Blue = Edit action</text><text x="570" y="246" font-size="11" fill="#DC2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Red = Delete action</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['user-management']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'payment-refund'" x-transition class="diagram-section" id="payment-refund">
          <div class="section-header">
            <span class="section-num">15</span>
            <h2 x-text="lang === 'hu' ? 'VisszatÃ©rÃ­tÃ©si Folyamat' : 'Payment Refund Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'VisszatÃ©rÃ­tÃ©si munkafolyamat Stripe kÃ¡rtyÃ¡s Ã©s banki Ã¡tutalÃ¡s fizetÃ©sekhez az /admin/payments oldalon. ElÅ‘feltÃ©tel: a fizetÃ©s payment_status = paid Ã¡llapotban van. LÃ©pÃ©sek: (1) FizetÃ©s keresÃ©se vendÃ©g nÃ©v vagy email alapjÃ¡n; (2) Refund gomb megnyomÃ¡sa; (3) MegerÅ‘sÃ­tÅ‘ dialÃ³gus elfogadÃ¡sa. KÃ¡rtyÃ¡s fizetÃ©snÃ©l: Stripe API automatikus refund hÃ­vÃ¡s (refunds.create), az Ã¶sszeg 3-10 munkanapon belÃ¼l visszakerÃ¼l a kÃ¡rtyÃ¡ra. Banki Ã¡tutalÃ¡snÃ¡l: manuÃ¡lis jelÃ¶lÃ©s (status = refunded), a tÃ©nyleges visszautalÃ¡st a pÃ©nzÃ¼gyi csapat vÃ©gzi. MindkÃ©t esetben: payment_status â†’ refunded, a vendÃ©g registration_status visszaÃ¡ll invited-ra, a QR jegy Ã©rvÃ©nytelenÃ­tÅ‘dik. NaplÃ³: minden refund mÅ±velet naplÃ³zva a PaymentLog tÃ¡blÃ¡ban (admin_id, timestamp, reason). Fontos: visszatÃ©rÃ­tÃ©s utÃ¡n a vendÃ©g Ãºj regisztrÃ¡ciÃ³t kezdhet.' : 'Payment refund workflow for Stripe card and bank transfer payments on /admin/payments page. Prerequisite: payment_status = paid. Steps: (1) Find payment by guest name or email; (2) Click Refund button; (3) Accept confirmation dialog. For card payments: Stripe API automatic refund call (refunds.create), amount returns to card within 3-10 business days. For bank transfer: manual marking (status = refunded), actual transfer done by finance team. Both cases: payment_status â†’ refunded, guest registration_status resets to invited, QR ticket invalidated. Logging: all refund operations logged in PaymentLog table (admin_id, timestamp, reason). Important: after refund, guest can start new registration.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 1010" width="100%" style="max-width:900px"><defs><marker id="ah-c9a227" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-059669" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#059669"/></marker><marker id="ah-DC2626" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#DC2626"/></marker><marker id="ah-D97706" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#D97706"/></marker><marker id="ah-2563EB" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2563EB"/></marker><marker id="ah-7C3AED" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#7C3AED"/></marker><marker id="ah-737373" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker></defs><rect x="0" y="0" width="900" height="1010" fill="#FAF8F5"/><text x="370" y="68" font-size="28" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment Refund Flow</text><text x="370" y="94" font-size="14" fill="#737373" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin processes payment refunds (Stripe or Bank Transfer)</text><ellipse cx="370" cy="145" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="370" y="151" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Start</text><path d="M 370 170 L 370 200" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="270" y="210" width="200" height="60" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="370" y="234" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Find payment in</text><text x="370" y="250.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment History</text><path d="M 370 270 L 370 310" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><polygon points="370,320 440,360 370,400 300,360" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="370" y="352" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status =</text><text x="370" y="366.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Paid?</text><path d="M 370 400 L 370 440" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><text x="380" y="422" font-size="12" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Yes</text><path d="M 440 360 L 520 360" stroke="#DC2626" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-DC2626)"/><text x="475" y="352" font-size="12" fill="#DC2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">No</text><rect x="530" y="335" width="160" height="50" stroke="#DC2626" fill="#fef2f2" opacity="1" stroke-width="2"/><text x="610" y="355" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Cannot refund</text><text x="610" y="369.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(not paid status)</text><rect x="270" y="450" width="200" height="50" stroke="#c9a227" fill="#fef9e7" opacity="1" stroke-width="2"/><text x="370" y="477" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Click &quot;Refund&quot; button</text><path d="M 370 500 L 370 540" stroke="#c9a227" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-c9a227)"/><rect x="270" y="550" width="200" height="50" stroke="#D97706" fill="#fffbeb" opacity="1" stroke-width="2"/><text x="370" y="577" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Confirm refund dialog</text><path d="M 370 600 L 370 640" stroke="#D97706" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-D97706)"/><polygon points="370,650 440,690 370,730 300,690" stroke="#00A0A0" fill="#e0f7f7" opacity="1" stroke-width="2"/><text x="370" y="682" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Payment</text><text x="370" y="696.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Method?</text><path d="M 300 690 L 200 690" stroke="#2563EB" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-2563EB)"/><text x="235" y="682" font-size="12" fill="#2563EB" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Card</text><path d="M 440 690 L 540 690" stroke="#7C3AED" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-7C3AED)"/><text x="510" y="680" font-size="10" fill="#7C3AED" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Bank Transfer</text><rect x="40" y="665" width="160" height="50" stroke="#2563EB" fill="#eff6ff" opacity="1" stroke-width="2"/><text x="120" y="687" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe API</text><text x="120" y="703.8" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">auto-refund</text><rect x="540" y="665" width="160" height="50" stroke="#7C3AED" fill="#f5f3ff" opacity="1" stroke-width="2"/><text x="620" y="685" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Mark as refunded</text><text x="620" y="699.4" font-size="12" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(manual transfer)</text><path d="M 120 715 L 120 770" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><path d="M 620 715 L 620 770" stroke="#059669" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-059669)"/><rect x="40" y="780" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="120" y="807" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status = Refunded</text><rect x="540" y="780" width="160" height="50" stroke="#059669" fill="#ecfdf5" opacity="1" stroke-width="2"/><text x="620" y="807" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Status = Refunded</text><ellipse cx="370" cy="905" rx="50" ry="25" stroke="#c9a227" fill="#c9a227" opacity="1" stroke-width="2"/><text x="370" y="911" font-size="16" fill="#ffffff" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">End</text><path d="M 120 830 L 120 905 L 320 905" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><path d="M 620 830 L 620 905 L 420 905" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><path d="M 610 385 L 710 385 L 710 905 L 370 905" stroke="#737373" fill="none" opacity="1" stroke-width="2" marker-end="url(#ah-737373)"/><rect x="540" y="120" width="180" height="160" stroke="#d4d4d4" fill="#fafafa" opacity="1" stroke-width="1"/><text x="550" y="144" font-size="14" fill="#1a1a2e" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Legend</text><text x="550" y="166" font-size="11" fill="#c9a227" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Gold = Start/End/Process</text><text x="550" y="186" font-size="11" fill="#00A0A0" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Teal = Decision point</text><text x="550" y="206" font-size="11" fill="#059669" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Green = Success</text><text x="550" y="226" font-size="11" fill="#2563EB" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Blue = Stripe card</text><text x="550" y="246" font-size="11" fill="#7C3AED" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Purple = Bank transfer</text><text x="550" y="266" font-size="11" fill="#DC2626" opacity="1" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Red = Cannot refund</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['payment-refund']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>


        <section x-show="activeTab === 'paired-registration-e2e'" x-transition class="diagram-section" id="paired-registration-e2e">
          <div class="section-header">
            <span class="section-num">14</span>
            <h2 x-text="lang === 'hu' ? 'PÃ¡ros RegisztrÃ¡ciÃ³ E2E Folyamat' : 'Paired Registration E2E Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Teljes end-to-end pÃ¡ros jegy regisztrÃ¡ciÃ³s folyamat 4 fÃ¡zisban. FÃZIS 1 (Admin): VendÃ©g hozzÃ¡adÃ¡sa manuÃ¡lisan vagy CSV importtal (guest_type = paying_paired), magic link generÃ¡lÃ¡s (SHA-256 hash, 24 Ã³rÃ¡s lejÃ¡rat), meghÃ­vÃ³ email kÃ¼ldÃ©s. FÃZIS 2 (Primary vendÃ©g regisztrÃ¡ciÃ³): 5 lÃ©pÃ©ses Å±rlap - (1) Jegy tÃ­pus: pÃ¡ros kivÃ¡lasztÃ¡sa (150.000 Ft), (2) SzemÃ©lyes adatok: telefon, cÃ©gnÃ©v, pozÃ­ciÃ³, Ã©trendi igÃ©nyek, (3) SzÃ¡mlÃ¡zÃ¡si adatok: nÃ©v, cÃ­m, adÃ³szÃ¡m (magyar ÃFA validÃ¡ciÃ³), (4) Partner adatok: partner neve Ã©s email cÃ­me, (5) GDPR Ã©s lemondÃ¡si feltÃ©telek elfogadÃ¡sa. FÃZIS 3 (FizetÃ©s): KÃ¡rtyÃ¡s fizetÃ©s Stripe Checkout-on keresztÃ¼l (teszt: 4242 4242 4242 4242) VAGY banki Ã¡tutalÃ¡s vÃ¡lasztÃ¡sa (admin jÃ³vÃ¡hagyÃ¡s szÃ¼ksÃ©ges az /admin/payments oldalon). FÃZIS 4 (Jegy kiÃ¡llÃ­tÃ¡s): Sikeres fizetÃ©s utÃ¡n mindkÃ©t vendÃ©g kap QR jegyet (JWT token, qr_code_hash), email Ã©rtesÃ­tÃ©st Ã©s PWA belÃ©pÃ©si kÃ³dot. A partner automatikusan meghÃ­vÃ³t kap sajÃ¡t regisztrÃ¡ciÃ³hoz. MindkÃ©t vendÃ©g ugyanahhoz az asztalhoz kerÃ¼l (linked_guest_id kapcsolat).' : 'Complete end-to-end paired ticket registration flow in 4 phases. PHASE 1 (Admin): Add guest manually or via CSV import (guest_type = paying_paired), magic link generation (SHA-256 hash, 24h expiry), invitation email sending. PHASE 2 (Primary guest registration): 5-step form - (1) Ticket type: select paired (150,000 Ft), (2) Personal data: phone, company, position, dietary requirements, (3) Billing details: name, address, tax ID (Hungarian VAT validation), (4) Partner details: partner name and email, (5) GDPR and cancellation terms acceptance. PHASE 3 (Payment): Card payment via Stripe Checkout (test: 4242 4242 4242 4242) OR bank transfer selection (admin approval required on /admin/payments). PHASE 4 (Ticket issuance): After successful payment, both guests receive QR tickets (JWT token, qr_code_hash), email notifications and PWA login codes. Partner automatically receives invitation for own registration. Both guests assigned to same table (linked_guest_id relation).'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" width="100%" style="max-width:1200px"><defs><marker id="ah-gold-25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-green-25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-purple-25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-red-25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-orange-25" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#f08c00"/></marker></defs><rect x="0" y="0" width="1200" height="900" fill="#FAF8F5"/><text x="600" y="50" font-size="24" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PÃ¡ros RegisztrÃ¡ciÃ³ - E2E Folyamat</text><text x="600" y="75" font-size="12" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin â†’ Magic Link â†’ RegisztrÃ¡ciÃ³ (5 lÃ©pÃ©s) â†’ FizetÃ©s â†’ QR Jegy</text><text x="60" y="115" font-size="14" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1. ADMIN FÃZIS</text><rect x="40" y="125" width="1120" height="2" fill="#c9a227"/><ellipse cx="100" cy="175" rx="50" ry="25" stroke="#c9a227" fill="#c9a227"/><text x="100" y="179" font-size="11" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><path d="M 150 175 L 200 175" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-25)"/><polygon points="280,145 350,175 280,205 210,175" stroke="#c9a227" fill="none" stroke-width="2"/><text x="280" y="173" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Import</text><text x="280" y="185" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">mÃ³d?</text><text x="360" y="155" font-size="9" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CSV</text><path d="M 350 160 L 400 160" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-25)"/><rect x="400" y="140" width="120" height="40" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="400" y="140" width="5" height="40" fill="#c9a227"/><text x="465" y="165" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CSV Import</text><text x="270" y="220" font-size="9" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">UI</text><path d="M 280 205 L 280 240" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-25)"/><rect x="220" y="240" width="120" height="40" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="220" y="240" width="5" height="40" fill="#c9a227"/><text x="285" y="265" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">ManuÃ¡lis Add</text><path d="M 340 260 L 400 190" stroke="#c9a227" fill="none" stroke-width="1" stroke-dasharray="4,2"/><path d="M 520 160 L 580 160" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-25)"/><rect x="580" y="140" width="140" height="40" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="580" y="140" width="5" height="40" fill="#c9a227"/><text x="655" y="158" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link</text><text x="655" y="172" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GenerÃ¡lÃ¡s + KÃ¼ldÃ©s</text><path d="M 720 160 L 780 160" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-25)"/><rect x="780" y="135" width="140" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="850" y="158" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email kÃ¼ldve</text><text x="850" y="172" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">24h lejÃ¡rat</text><text x="60" y="320" font-size="14" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">2. VENDÃ‰G REGISZTRÃCIÃ“ (5 lÃ©pÃ©s)</text><rect x="40" y="330" width="1120" height="2" fill="#6741d9"/><path d="M 850 185 L 850 350" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="60" y="360" width="100" height="50" stroke="#6741d9" fill="none" stroke-width="2"/><rect x="60" y="360" width="5" height="50" fill="#6741d9"/><text x="115" y="382" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link</text><text x="115" y="396" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">MegnyitÃ¡s</text><path d="M 160 385 L 200 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><polygon points="280,355 350,385 280,415 210,385" stroke="#6741d9" fill="#fff3e0" stroke-width="2"/><text x="280" y="383" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Valid</text><text x="280" y="395" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">link?</text><text x="280" y="430" font-size="9" fill="#dc2626" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">NEM</text><path d="M 280 415 L 280 455" stroke="#dc2626" fill="none" stroke-width="2" marker-end="url(#ah-red-25)"/><rect x="220" y="455" width="120" height="40" stroke="#dc2626" fill="#fef2f2" stroke-width="2"/><text x="280" y="480" font-size="10" fill="#dc2626" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Hiba: LejÃ¡rt</text><text x="355" y="375" font-size="9" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">IGEN</text><path d="M 350 385 L 390 385" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><rect x="390" y="355" width="100" height="60" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="440" y="378" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LÃ©pÃ©s 1</text><text x="440" y="392" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Jegy tÃ­pus</text><text x="440" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">PÃ¡ros kivÃ¡lasztÃ¡s</text><path d="M 490 385 L 520 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="520" y="355" width="100" height="60" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="570" y="378" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LÃ©pÃ©s 2</text><text x="570" y="392" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SzemÃ©lyes</text><text x="570" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Tel, CÃ©g, PozÃ­ciÃ³</text><path d="M 620 385 L 650 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="650" y="355" width="100" height="60" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="700" y="378" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LÃ©pÃ©s 3</text><text x="700" y="392" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SzÃ¡mlÃ¡zÃ¡s</text><text x="700" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">AdÃ³szÃ¡m, CÃ­m</text><path d="M 750 385 L 780 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="780" y="355" width="100" height="60" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="830" y="378" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LÃ©pÃ©s 4</text><text x="830" y="392" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Partner</text><text x="830" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">NÃ©v + Email</text><path d="M 880 385 L 910 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="910" y="355" width="100" height="60" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="960" y="378" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LÃ©pÃ©s 5</text><text x="960" y="392" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">GDPR</text><text x="960" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">BeleegyezÃ©sek</text><path d="M 1010 385 L 1060 385" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="1060" y="355" width="100" height="60" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="1110" y="378" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Sikeres</text><text x="1110" y="392" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">RegisztrÃ¡ciÃ³</text><text x="1110" y="406" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/success oldal</text><text x="60" y="520" font-size="14" fill="#f08c00" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">3. FIZETÃ‰S (180,000 Ft)</text><rect x="40" y="530" width="1120" height="2" fill="#f08c00"/><path d="M 1110 415 L 1110 555" stroke="#f08c00" fill="none" stroke-width="2" marker-end="url(#ah-orange-25)"/><polygon points="600,545 680,580 600,615 520,580" stroke="#f08c00" fill="#fff3e0" stroke-width="2"/><text x="600" y="578" font-size="10" fill="#f08c00" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">FizetÃ©si</text><text x="600" y="592" font-size="10" fill="#f08c00" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">mÃ³d?</text><path d="M 1050 580 L 680 580" stroke="#f08c00" fill="none" stroke-width="2"/><text x="440" y="565" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">KÃ¡rtya (Stripe)</text><path d="M 520 565 L 400 565" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="250" y="545" width="150" height="50" stroke="#6741d9" fill="none" stroke-width="2"/><rect x="250" y="545" width="5" height="50" fill="#6741d9"/><text x="330" y="567" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Stripe Checkout</text><text x="330" y="582" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">4242 4242 4242 4242</text><path d="M 250 570 L 180 570" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-25)"/><rect x="60" y="545" width="120" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="120" y="567" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Webhook</text><text x="120" y="582" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">payment_success</text><text x="760" y="600" font-size="9" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Bank Ã¡tutalÃ¡s</text><path d="M 680 595 L 800 650" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><rect x="800" y="630" width="150" height="50" stroke="#2f9e44" fill="none" stroke-width="2"/><rect x="800" y="630" width="5" height="50" fill="#2f9e44"/><text x="880" y="652" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin JÃ³vÃ¡hagyÃ¡s</text><text x="880" y="667" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/admin/payments</text><path d="M 950 655 L 1020 655" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><rect x="1020" y="630" width="120" height="50" stroke="#f08c00" fill="#fff7ed" stroke-width="2"/><text x="1080" y="652" font-size="10" fill="#f08c00" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">StÃ¡tusz: Paid</text><text x="1080" y="667" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">payment_status</text><text x="60" y="730" font-size="14" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">4. QR JEGY KIÃLLÃTÃS</text><rect x="40" y="740" width="1120" height="2" fill="#2f9e44"/><path d="M 120 595 L 120 770" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><path d="M 1080 680 L 1080 730 L 500 730 L 500 770" stroke="#2f9e44" fill="none" stroke-width="2"/><rect x="400" y="770" width="200" height="55" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="500" y="793" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR KÃ³d GenerÃ¡lÃ¡s</text><text x="500" y="808" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">JWT token (qr_code_hash)</text><path d="M 600 797 L 700 797" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><rect x="700" y="770" width="200" height="55" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="800" y="793" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email KÃ¼ldÃ©s</text><text x="800" y="808" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">QR jegy + EventLog</text><path d="M 900 797 L 980 797" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-25)"/><ellipse cx="1050" cy="797" rx="60" ry="30" stroke="#2f9e44" fill="#2f9e44"/><text x="1050" y="793" font-size="11" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DONE</text><text x="1050" y="808" font-size="9" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Jegy kiÃ¡llÃ­tva</text><rect x="60" y="850" width="200" height="30" stroke="#737373" fill="#f5f5f5" stroke-width="1"/><text x="70" y="869" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DokumentÃ¡ciÃ³: MANUAL-PAIRED-REGISTRATION-FLOW.md</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['paired-registration-e2e']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <section x-show="activeTab === 'guest-import-invitation'" x-transition class="diagram-section" id="guest-import-invitation">
          <div class="section-header">
            <span class="section-num">15</span>
            <h2 x-text="lang === 'hu' ? 'VendÃ©g Import + MeghÃ­vÃ³ Folyamat' : 'Guest Import + Invitation Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'VendÃ©g hozzÃ¡adÃ¡si Ã©s meghÃ­vÃ³ kÃ¼ldÃ©si munkafolyamat az admin /admin/guests oldalon. VENDÃ‰G HOZZÃADÃS: (1) ManuÃ¡lis - Ãšj vendÃ©g gomb, kÃ¶telezÅ‘ mezÅ‘k: email (UNIQUE), nÃ©v, guest_type (vip/paying_single/paying_paired), opcionÃ¡lis: telefon, cÃ©gnÃ©v, pozÃ­ciÃ³; (2) CSV Import - fÃ¡jl feltÃ¶ltÃ©s, oszlop megfeleltetÃ©s, validÃ¡ciÃ³ (duplikÃ¡lt email ellenÅ‘rzÃ©s, formÃ¡tum validÃ¡lÃ¡s), elÅ‘nÃ©zet Ã©s import. A vendÃ©g invited stÃ¡tusszal jÃ¶n lÃ©tre. MAGIC LINK GENERÃLÃS: SHA-256 hash = email + APP_SECRET + timestamp, 24 Ã³rÃ¡s lejÃ¡rat, egyszer hasznÃ¡latos. MEGHÃVÃ“ KÃœLDÃ‰S: Egyedi kÃ¼ldÃ©s (borÃ­tÃ©k ikon) vagy tÃ¶meges kÃ¼ldÃ©s (checkbox kijelÃ¶lÃ©s + Bulk action). Email szolgÃ¡ltatÃ¡s: Nodemailer SMTP, exponenciÃ¡lis retry (3 kÃ­sÃ©rlet: 1s, 2s, 4s), rate limit vÃ©delem (5 email/tÃ­pus/Ã³ra, 20 Ã¶sszesen/Ã³ra per vendÃ©g). NAPLÃ“ZÃS: Minden email mÅ±velet az EmailLog tÃ¡blÃ¡ba kerÃ¼l (guest_id, email_type, status, sent_at). Az /admin/email-logs oldalon megtekinthetÅ‘k a kÃ¼ldÃ©si statisztikÃ¡k Ã©s sikertelen emailek ÃºjrakÃ¼ldhetÅ‘k.' : 'Guest addition and invitation workflow on admin /admin/guests page. GUEST ADDITION: (1) Manual - New guest button, required fields: email (UNIQUE), name, guest_type (vip/paying_single/paying_paired), optional: phone, company, position; (2) CSV Import - file upload, column mapping, validation (duplicate email check, format validation), preview and import. Guest created with invited status. MAGIC LINK GENERATION: SHA-256 hash = email + APP_SECRET + timestamp, 24-hour expiry, single-use. INVITATION SENDING: Single send (envelope icon) or bulk send (checkbox selection + Bulk action). Email service: Nodemailer SMTP, exponential retry (3 attempts: 1s, 2s, 4s), rate limit protection (5 emails/type/hour, 20 total/hour per guest). LOGGING: All email operations logged to EmailLog table (guest_id, email_type, status, sent_at). On /admin/email-logs page, view delivery statistics and resend failed emails.'"></p>
          </div>
          <div class="diagram-area"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 750" width="100%" style="max-width:1100px"><defs><marker id="ah-gold-26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#c9a227"/></marker><marker id="ah-green-26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#2f9e44"/></marker><marker id="ah-purple-26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#6741d9"/></marker><marker id="ah-red-26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#dc2626"/></marker><marker id="ah-gray-26" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><polygon points="0 0, 10 3, 0 6" fill="#737373"/></marker></defs><rect x="0" y="0" width="1100" height="750" fill="#FAF8F5"/><text x="550" y="45" font-size="22" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VendÃ©g Import + MeghÃ­vÃ³ KÃ¼ldÃ©s Folyamat</text><text x="550" y="70" font-size="12" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin vendÃ©g kezelÃ©s â†’ Magic link â†’ Email kÃ¼ldÃ©s â†’ NaplÃ³</text><text x="60" y="110" font-size="14" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">1. ADMIN BEJELENTKEZÃ‰S</text><rect x="40" y="120" width="1020" height="2" fill="#c9a227"/><ellipse cx="100" cy="165" rx="50" ry="25" stroke="#c9a227" fill="#c9a227"/><text x="100" y="169" font-size="11" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">START</text><path d="M 150 165 L 210 165" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-26)"/><rect x="210" y="140" width="150" height="50" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="210" y="140" width="5" height="50" fill="#c9a227"/><text x="290" y="162" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Admin Login</text><text x="290" y="177" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/admin (admin@ceogala.test)</text><path d="M 360 165 L 420 165" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-26)"/><rect x="420" y="140" width="150" height="50" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="420" y="140" width="5" height="50" fill="#c9a227"/><text x="500" y="162" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VendÃ©gek Oldal</text><text x="500" y="177" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/admin/guests</text><text x="60" y="230" font-size="14" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">2. VENDÃ‰G HOZZÃADÃS</text><rect x="40" y="240" width="1020" height="2" fill="#6741d9"/><path d="M 500 190 L 500 270" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-26)"/><polygon points="500,270 580,305 500,340 420,305" stroke="#6741d9" fill="#fff3e0" stroke-width="2"/><text x="500" y="303" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">HozzÃ¡adÃ¡si</text><text x="500" y="317" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">mÃ³d?</text><text x="340" y="290" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="end">ManuÃ¡lis (UI)</text><path d="M 420 290 L 300 290" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-26)"/><rect x="140" y="265" width="160" height="55" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="220" y="288" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Ãšj vendÃ©g form</text><text x="220" y="303" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">email, nÃ©v, guest_type</text><text x="220" y="316" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">(vip, paying_single, paying_paired)</text><text x="660" y="290" font-size="9" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">CSV Import</text><path d="M 580 290 L 700 290" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-26)"/><rect x="700" y="265" width="160" height="55" stroke="#6741d9" fill="#f3e8ff" stroke-width="2"/><text x="780" y="288" font-size="10" fill="#6741d9" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">CSV FeltÃ¶ltÃ©s</text><text x="780" y="303" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">KÃ¶telezÅ‘: email, name, guest_type</text><text x="780" y="316" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">OpcionÃ¡lis: phone, company, position</text><path d="M 220 320 L 220 360 L 500 360" stroke="#6741d9" fill="none" stroke-width="1" stroke-dasharray="4,2"/><path d="M 780 320 L 780 360 L 500 360" stroke="#6741d9" fill="none" stroke-width="1" stroke-dasharray="4,2"/><path d="M 500 360 L 500 400" stroke="#6741d9" fill="none" stroke-width="2" marker-end="url(#ah-purple-26)"/><rect x="400" y="400" width="200" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="500" y="422" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">VendÃ©g lÃ©trehozva</text><text x="500" y="437" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">status: invited</text><text x="60" y="490" font-size="14" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">3. MAGIC LINK GENERÃLÃS + KÃœLDÃ‰S</text><rect x="40" y="500" width="1020" height="2" fill="#2f9e44"/><path d="M 500 450 L 500 520" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-26)"/><rect x="140" y="520" width="200" height="60" stroke="#c9a227" fill="none" stroke-width="2"/><rect x="140" y="520" width="5" height="60" fill="#c9a227"/><text x="245" y="543" font-size="10" fill="#c9a227" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Magic Link Hash</text><text x="245" y="558" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">SHA-256(email + APP_SECRET)</text><text x="245" y="571" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">LejÃ¡rat: 24 Ã³ra</text><path d="M 340 550 L 400 550" stroke="#c9a227" fill="none" stroke-width="2" marker-end="url(#ah-gold-26)"/><polygon points="500,510 580,550 500,590 420,550" stroke="#2f9e44" fill="#fff3e0" stroke-width="2"/><text x="500" y="548" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">KÃ¼ldÃ©si</text><text x="500" y="562" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">mÃ³d?</text><text x="640" y="535" font-size="9" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">Egyedi</text><path d="M 580 535 L 700 535" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-26)"/><rect x="700" y="510" width="160" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="780" y="533" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">MeghÃ­vÃ³ kÃ¼ldÃ©se</text><text x="780" y="548" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">1 vendÃ©g (borÃ­tÃ©k ikon)</text><text x="640" y="575" font-size="9" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">TÃ¶meges</text><path d="M 580 565 L 700 590" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-26)"/><rect x="700" y="570" width="160" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="780" y="593" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">KijelÃ¶ltek meghÃ­vÃ¡sa</text><text x="780" y="608" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Checkbox + Bulk action</text><path d="M 860 535 L 920 535 L 920 620 L 500 620" stroke="#2f9e44" fill="none" stroke-width="1" stroke-dasharray="4,2"/><path d="M 860 595 L 920 595" stroke="#2f9e44" fill="none" stroke-width="1" stroke-dasharray="4,2"/><path d="M 500 620 L 500 660" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-26)"/><rect x="350" y="660" width="300" height="50" stroke="#2f9e44" fill="#ecfdf5" stroke-width="2"/><text x="500" y="682" font-size="10" fill="#2f9e44" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email kÃ¼ldve (SMTP)</text><text x="500" y="697" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Retry: 3x exponential backoff | Rate limit: 5/tÃ­pus/Ã³ra</text><path d="M 650 685 L 750 685" stroke="#737373" fill="none" stroke-width="2" marker-end="url(#ah-gray-26)"/><rect x="750" y="660" width="180" height="50" stroke="#737373" fill="#f5f5f5" stroke-width="2"/><text x="840" y="682" font-size="10" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Email NaplÃ³</text><text x="840" y="697" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">/admin/email | EmailLog tÃ¡bla</text><path d="M 930 685 L 1000 685" stroke="#2f9e44" fill="none" stroke-width="2" marker-end="url(#ah-green-26)"/><ellipse cx="1040" cy="685" rx="40" ry="25" stroke="#2f9e44" fill="#2f9e44"/><text x="1040" y="683" font-size="10" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">DONE</text><text x="1040" y="696" font-size="8" fill="#1a1a2e" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">KÃ©sz</text><rect x="60" y="400" width="80" height="50" stroke="#737373" fill="#f5f5f5" stroke-width="1"/><text x="100" y="423" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">Guest</text><text x="100" y="438" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">tÃ¡bla</text><rect x="880" y="400" width="100" height="50" stroke="#737373" fill="#f5f5f5" stroke-width="1"/><text x="930" y="423" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">EmailLog</text><text x="930" y="438" font-size="8" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="middle">tÃ¡bla</text><text x="60" y="735" font-size="9" fill="#737373" font-family="'Open Sans', system-ui, sans-serif" text-anchor="start">DokumentÃ¡ciÃ³: MANUAL-GUEST-IMPORT-INVITATION.md</text></svg></div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['guest-import-invitation']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- 16. Admin vs Staff Roles -->
        <section x-show="activeTab === 'admin-staff-roles'" x-transition class="diagram-section" id="admin-staff-roles">
          <div class="section-header">
            <span class="section-num">16</span>
            <h2 x-text="lang === 'hu' ? 'Admin vs Staff SzerepkÃ¶rÃ¶k' : 'Admin vs Staff Roles'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'A rendszer kÃ©t szerepkÃ¶rt tÃ¡mogat: Admin (teljes hozzÃ¡fÃ©rÃ©s) Ã©s Staff (csak check-in). A Staff felhasznÃ¡lÃ³k automatikusan a /checkin oldalra irÃ¡nyÃ­tÃ³dnak bejelentkezÃ©s utÃ¡n, Ã©s nem fÃ©rhetnek hozzÃ¡ az admin funkciÃ³khoz.' : 'The system supports two roles: Admin (full access) and Staff (check-in only). Staff users are automatically redirected to /checkin after login and cannot access admin functions.'"></p>
          </div>
          <div class="diagram-area">
            <svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg" style="max-width:800px;font-family:'Open Sans',sans-serif;">
              <!-- Title -->
              <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#1A1F35">Admin vs Staff Role Flow</text>

              <!-- Login Box -->
              <rect x="320" y="60" width="160" height="50" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
              <text x="400" y="90" text-anchor="middle" font-size="13" fill="#1A1F35">/admin/login</text>

              <!-- Decision Diamond -->
              <polygon points="400,140 470,180 400,220 330,180" fill="#fff3e0" stroke="#f08c00" stroke-width="2"/>
              <text x="400" y="185" text-anchor="middle" font-size="11" fill="#1A1F35">role?</text>

              <!-- Admin Path -->
              <rect x="100" y="260" width="180" height="50" rx="8" fill="#e8f5e9" stroke="#2f9e44" stroke-width="2"/>
              <text x="190" y="290" text-anchor="middle" font-size="12" font-weight="600" fill="#1A1F35">ADMIN</text>

              <!-- Admin Features -->
              <rect x="50" y="340" width="280" height="140" rx="8" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="190" y="365" text-anchor="middle" font-size="11" font-weight="600" fill="#2f9e44">Teljes HozzÃ¡fÃ©rÃ©s</text>
              <text x="70" y="390" font-size="10" fill="#1A1F35">âœ“ VendÃ©gkezelÃ©s (CRUD)</text>
              <text x="70" y="410" font-size="10" fill="#1A1F35">âœ“ AsztalkezelÃ©s + ÃœlÃ©srend</text>
              <text x="70" y="430" font-size="10" fill="#1A1F35">âœ“ FizetÃ©sek jÃ³vÃ¡hagyÃ¡sa</text>
              <text x="70" y="450" font-size="10" fill="#1A1F35">âœ“ Email kÃ¼ldÃ©s</text>
              <text x="70" y="470" font-size="10" fill="#1A1F35">âœ“ Check-in + Override</text>

              <!-- Staff Path -->
              <rect x="520" y="260" width="180" height="50" rx="8" fill="#ffccbc" stroke="#e65100" stroke-width="2"/>
              <text x="610" y="290" text-anchor="middle" font-size="12" font-weight="600" fill="#1A1F35">STAFF</text>

              <!-- Staff Features -->
              <rect x="470" y="340" width="280" height="140" rx="8" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="610" y="365" text-anchor="middle" font-size="11" font-weight="600" fill="#e65100">KorlÃ¡tozott HozzÃ¡fÃ©rÃ©s</text>
              <text x="490" y="390" font-size="10" fill="#1A1F35">âœ“ QR Scanner (/checkin)</text>
              <text x="490" y="410" font-size="10" fill="#1A1F35">âœ“ Check-in naplÃ³ megtekintÃ©s</text>
              <text x="490" y="430" font-size="10" fill="#c62828">âœ— VendÃ©gkezelÃ©s</text>
              <text x="490" y="450" font-size="10" fill="#c62828">âœ— Admin override</text>
              <text x="490" y="470" font-size="10" fill="#c62828">âœ— Email, fizetÃ©s, asztal</text>

              <!-- Arrows -->
              <path d="M400 110 L400 140" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              <path d="M330 180 L190 180 L190 260" stroke="#2f9e44" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              <path d="M470 180 L610 180 L610 260" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              <path d="M190 310 L190 340" stroke="#2f9e44" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
              <path d="M610 310 L610 340" stroke="#e65100" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>

              <!-- Labels -->
              <text x="250" y="175" font-size="10" fill="#2f9e44">admin</text>
              <text x="520" y="175" font-size="10" fill="#e65100">staff</text>

              <!-- Arrow marker -->
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#1A1F35"/>
                </marker>
              </defs>
            </svg>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['admin-staff-roles']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- 17. Check-in Override Flow -->
        <section x-show="activeTab === 'checkin-override'" x-transition class="diagram-section" id="checkin-override">
          <div class="section-header">
            <span class="section-num">17</span>
            <h2 x-text="lang === 'hu' ? 'Check-in Override Folyamat' : 'Check-in Override Flow'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Ha egy vendÃ©g mÃ¡r be van lÃ©ptetve Ã©s Ãºjra szkenneli a QR kÃ³djÃ¡t, a rendszer szÃ­nkÃ³dolt kÃ¡rtyÃ¡t jelenÃ­t meg. Staff felhasznÃ¡lÃ³k NEM engedhetik be Ãºjra, csak Admin override-dal lehetsÃ©ges.' : 'If a guest is already checked in and scans their QR code again, the system displays a color-coded card. Staff users CANNOT re-admit, only Admin override is possible.'"></p>
          </div>
          <div class="diagram-area">
            <svg viewBox="0 0 850 520" xmlns="http://www.w3.org/2000/svg" style="max-width:850px;font-family:'Open Sans',sans-serif;">
              <!-- Title -->
              <text x="425" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#1A1F35">Check-in Override Flow</text>

              <!-- QR Scan -->
              <rect x="335" y="55" width="180" height="45" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
              <text x="425" y="83" text-anchor="middle" font-size="12" fill="#1A1F35">QR KÃ³d SzkennelÃ©s</text>

              <!-- API Call -->
              <rect x="335" y="120" width="180" height="40" rx="6" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="425" y="145" text-anchor="middle" font-size="11" fill="#1A1F35">POST /api/checkin/validate</text>

              <!-- Decision: Already Checked In? -->
              <polygon points="425,190 510,230 425,270 340,230" fill="#fff3e0" stroke="#f08c00" stroke-width="2"/>
              <text x="425" y="225" text-anchor="middle" font-size="10" fill="#1A1F35">MÃ¡r belÃ©pett?</text>
              <text x="425" y="240" text-anchor="middle" font-size="10" fill="#1A1F35">(alreadyCheckedIn)</text>

              <!-- GREEN Card - First Check-in -->
              <rect x="80" y="290" width="160" height="80" rx="10" fill="#c8e6c9" stroke="#2e7d32" stroke-width="3"/>
              <text x="160" y="320" text-anchor="middle" font-size="12" font-weight="600" fill="#1b5e20">ðŸŸ¢ ZÃ–LD KÃRTYA</text>
              <text x="160" y="340" text-anchor="middle" font-size="10" fill="#1A1F35">Ã‰rvÃ©nyes jegy</text>
              <text x="160" y="358" text-anchor="middle" font-size="10" fill="#1A1F35">[Check In] gomb</text>

              <!-- YELLOW Card - Already In -->
              <rect x="345" y="290" width="160" height="80" rx="10" fill="#fff9c4" stroke="#f9a825" stroke-width="3"/>
              <text x="425" y="320" text-anchor="middle" font-size="12" font-weight="600" fill="#f57f17">ðŸŸ¡ SÃRGA KÃRTYA</text>
              <text x="425" y="340" text-anchor="middle" font-size="10" fill="#1A1F35">MÃ¡r belÃ©pett</text>
              <text x="425" y="358" text-anchor="middle" font-size="10" fill="#1A1F35">ElÅ‘zÅ‘: timestamp, staff</text>

              <!-- RED Card -->
              <rect x="610" y="290" width="160" height="80" rx="10" fill="#ffcdd2" stroke="#c62828" stroke-width="3"/>
              <text x="690" y="320" text-anchor="middle" font-size="12" font-weight="600" fill="#b71c1c">ðŸ”´ PIROS KÃRTYA</text>
              <text x="690" y="340" text-anchor="middle" font-size="10" fill="#1A1F35">Ã‰rvÃ©nytelen/lejÃ¡rt</text>
              <text x="690" y="358" text-anchor="middle" font-size="10" fill="#1A1F35">[Ãšjra Szken] gomb</text>

              <!-- Role Decision for Yellow -->
              <polygon points="425,400 490,435 425,470 360,435" fill="#e1bee7" stroke="#7b1fa2" stroke-width="2"/>
              <text x="425" y="440" text-anchor="middle" font-size="10" fill="#1A1F35">role?</text>

              <!-- Staff Block -->
              <rect x="260" y="490" width="140" height="50" rx="8" fill="#ffcdd2" stroke="#c62828" stroke-width="2"/>
              <text x="330" y="510" text-anchor="middle" font-size="10" font-weight="600" fill="#c62828">STAFF</text>
              <text x="330" y="527" text-anchor="middle" font-size="9" fill="#1A1F35">Override TILTVA</text>

              <!-- Admin Override -->
              <rect x="450" y="490" width="140" height="50" rx="8" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
              <text x="520" y="510" text-anchor="middle" font-size="10" font-weight="600" fill="#2e7d32">ADMIN</text>
              <text x="520" y="527" text-anchor="middle" font-size="9" fill="#1A1F35">[Override] gomb</text>

              <!-- Arrows -->
              <path d="M425 100 L425 120" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M425 160 L425 190" stroke="#616161" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M340 230 L160 230 L160 290" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M425 270 L425 290" stroke="#f9a825" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M510 230 L690 230 L690 290" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M425 370 L425 400" stroke="#f9a825" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M360 435 L330 435 L330 490" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arr2)"/>
              <path d="M490 435 L520 435 L520 490" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arr2)"/>

              <!-- Labels -->
              <text x="240" y="225" font-size="9" fill="#2e7d32">NEM</text>
              <text x="580" y="225" font-size="9" fill="#c62828">INVALID</text>
              <text x="445" y="285" font-size="9" fill="#f9a825">IGEN</text>
              <text x="295" y="430" font-size="9" fill="#7b1fa2">staff</text>
              <text x="530" y="430" font-size="9" fill="#7b1fa2">admin</text>

              <defs>
                <marker id="arr2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#1A1F35"/>
                </marker>
              </defs>
            </svg>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['checkin-override']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- 18. Email Rate Limiting -->
        <section x-show="activeTab === 'email-rate-limit'" x-transition class="diagram-section" id="email-rate-limit">
          <div class="section-header">
            <span class="section-num">18</span>
            <h2 x-text="lang === 'hu' ? 'Email Rate Limiting' : 'Email Rate Limiting'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Az email kÃ¼ldÃ©s rate limitÃ¡lt: max 5 email tÃ­pusonkÃ©nt/Ã³ra Ã©s max 20 email/Ã³ra vendÃ©genkÃ©nt. 3 ÃºjraprÃ³bÃ¡lkozÃ¡s exponenciÃ¡lis backoff-fal (1s, 2s, 4s).' : 'Email sending is rate limited: max 5 emails per type/hour and max 20 emails/hour per guest. 3 retries with exponential backoff (1s, 2s, 4s).'"></p>
          </div>
          <div class="diagram-area">
            <svg viewBox="0 0 800 450" xmlns="http://www.w3.org/2000/svg" style="max-width:800px;font-family:'Open Sans',sans-serif;">
              <!-- Title -->
              <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#1A1F35">Email Rate Limiting Flow</text>

              <!-- Email Request -->
              <rect x="300" y="50" width="200" height="45" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
              <text x="400" y="78" text-anchor="middle" font-size="12" fill="#1A1F35">Email KÃ¼ldÃ©s KÃ©rÃ©s</text>

              <!-- Check Type Limit -->
              <polygon points="400,120 490,160 400,200 310,160" fill="#fff3e0" stroke="#f08c00" stroke-width="2"/>
              <text x="400" y="155" text-anchor="middle" font-size="10" fill="#1A1F35">TÃ­pus limit?</text>
              <text x="400" y="170" text-anchor="middle" font-size="9" fill="#737373">(5/tÃ­pus/Ã³ra)</text>

              <!-- Type Limit Exceeded -->
              <rect x="550" y="135" width="150" height="50" rx="8" fill="#ffcdd2" stroke="#c62828" stroke-width="2"/>
              <text x="625" y="155" text-anchor="middle" font-size="10" font-weight="600" fill="#c62828">TÃPUS LIMIT</text>
              <text x="625" y="172" text-anchor="middle" font-size="9" fill="#1A1F35">429 - TÃºl sok kÃ©rÃ©s</text>

              <!-- Check Global Limit -->
              <polygon points="400,230 490,270 400,310 310,270" fill="#e1bee7" stroke="#7b1fa2" stroke-width="2"/>
              <text x="400" y="265" text-anchor="middle" font-size="10" fill="#1A1F35">GlobÃ¡lis limit?</text>
              <text x="400" y="280" text-anchor="middle" font-size="9" fill="#737373">(20/Ã³ra/vendÃ©g)</text>

              <!-- Global Limit Exceeded -->
              <rect x="550" y="245" width="150" height="50" rx="8" fill="#ffcdd2" stroke="#c62828" stroke-width="2"/>
              <text x="625" y="265" text-anchor="middle" font-size="10" font-weight="600" fill="#c62828">GLOBÃLIS LIMIT</text>
              <text x="625" y="282" text-anchor="middle" font-size="9" fill="#1A1F35">429 - TÃºl sok kÃ©rÃ©s</text>

              <!-- Send Email -->
              <rect x="300" y="340" width="200" height="45" rx="8" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
              <text x="400" y="368" text-anchor="middle" font-size="12" fill="#1A1F35">Email KÃ¼ldÃ©s (SMTP)</text>

              <!-- Retry Logic -->
              <rect x="100" y="340" width="160" height="70" rx="8" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="180" y="360" text-anchor="middle" font-size="10" font-weight="600" fill="#1A1F35">Retry Logic</text>
              <text x="180" y="378" text-anchor="middle" font-size="9" fill="#737373">Attempt 1: 0s</text>
              <text x="180" y="393" text-anchor="middle" font-size="9" fill="#737373">Attempt 2: +1s</text>
              <text x="180" y="408" text-anchor="middle" font-size="9" fill="#737373">Attempt 3: +2s (+4s)</text>

              <!-- Log to DB -->
              <rect x="540" y="340" width="160" height="45" rx="8" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2"/>
              <text x="620" y="360" text-anchor="middle" font-size="10" fill="#1A1F35">EmailLog tÃ¡blÃ¡ba</text>
              <text x="620" y="377" text-anchor="middle" font-size="9" fill="#737373">sent/failed/pending</text>

              <!-- RateLimitEntry -->
              <rect x="100" y="220" width="160" height="60" rx="8" fill="#fff9c4" stroke="#f9a825" stroke-width="1"/>
              <text x="180" y="245" text-anchor="middle" font-size="10" font-weight="600" fill="#f9a825">RateLimitEntry</text>
              <text x="180" y="263" text-anchor="middle" font-size="9" fill="#737373">key, attempts, expires_at</text>

              <!-- Arrows -->
              <path d="M400 95 L400 120" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M490 160 L550 160" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M400 200 L400 230" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M490 270 L550 270" stroke="#c62828" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M400 310 L400 340" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M300 362 L260 362" stroke="#616161" stroke-width="1.5" fill="none" marker-end="url(#arr3)"/>
              <path d="M500 362 L540 362" stroke="#2e7d32" stroke-width="2" fill="none" marker-end="url(#arr3)"/>
              <path d="M310 160 L260 160 L260 220" stroke="#f9a825" stroke-width="1.5" fill="none" marker-end="url(#arr3)"/>

              <!-- Labels -->
              <text x="520" y="153" font-size="9" fill="#c62828">>5</text>
              <text x="350" y="215" font-size="9" fill="#2e7d32">OK</text>
              <text x="520" y="263" font-size="9" fill="#c62828">>20</text>
              <text x="350" y="330" font-size="9" fill="#2e7d32">OK</text>

              <defs>
                <marker id="arr3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#1A1F35"/>
                </marker>
              </defs>
            </svg>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['email-rate-limit']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- 19. Component Architecture -->
        <section x-show="activeTab === 'component-architecture'" x-transition class="diagram-section" id="component-architecture">
          <div class="section-header">
            <span class="section-num">19</span>
            <h2 x-text="lang === 'hu' ? 'Komponens ArchitektÃºra' : 'Component Architecture'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="t.overview"></h3>
            <p x-text="lang === 'hu' ? 'Next.js App Router alapÃº komponens struktÃºra. FÅ‘bb komponensek: AdminHeader (navigÃ¡ciÃ³ + szerepkÃ¶r), MobileTabBar (mobil admin), MobileFooter (MyForge Labs branding), Footer (desktop).' : 'Next.js App Router based component structure. Main components: AdminHeader (navigation + roles), MobileTabBar (mobile admin), MobileFooter (MyForge Labs branding), Footer (desktop).'"></p>
          </div>
          <div class="diagram-area">
            <svg viewBox="0 0 850 550" xmlns="http://www.w3.org/2000/svg" style="max-width:850px;font-family:'Open Sans',sans-serif;">
              <!-- Title -->
              <text x="425" y="30" text-anchor="middle" font-size="18" font-weight="600" fill="#1A1F35">Component Architecture</text>

              <!-- Root Layout -->
              <rect x="275" y="50" width="300" height="50" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
              <text x="425" y="80" text-anchor="middle" font-size="13" font-weight="600" fill="#1A1F35">RootLayout (app/layout.tsx)</text>

              <!-- GlobalProviders -->
              <rect x="295" y="120" width="260" height="35" rx="6" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="425" y="143" text-anchor="middle" font-size="11" fill="#1A1F35">GlobalProviders (Theme, Session)</text>

              <!-- Children split -->
              <rect x="50" y="180" width="200" height="40" rx="6" fill="#fff3e0" stroke="#f08c00" stroke-width="2"/>
              <text x="150" y="205" text-anchor="middle" font-size="11" fill="#1A1F35">Public Pages (/, /help, /apply)</text>

              <rect x="325" y="180" width="200" height="40" rx="6" fill="#e1bee7" stroke="#7b1fa2" stroke-width="2"/>
              <text x="425" y="205" text-anchor="middle" font-size="11" fill="#1A1F35">Admin Layout</text>

              <rect x="600" y="180" width="200" height="40" rx="6" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2"/>
              <text x="700" y="205" text-anchor="middle" font-size="11" fill="#1A1F35">PWA Layout</text>

              <!-- Admin Components -->
              <rect x="280" y="250" width="290" height="200" rx="8" fill="#fafafa" stroke="#7b1fa2" stroke-width="1" stroke-dasharray="4"/>
              <text x="425" y="275" text-anchor="middle" font-size="11" font-weight="600" fill="#7b1fa2">Admin Components</text>

              <rect x="300" y="290" width="250" height="35" rx="6" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1"/>
              <text x="425" y="313" text-anchor="middle" font-size="10" fill="#1A1F35">AdminHeader (role-based nav)</text>

              <rect x="300" y="335" width="120" height="30" rx="6" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1"/>
              <text x="360" y="355" text-anchor="middle" font-size="9" fill="#1A1F35">Providers</text>

              <rect x="430" y="335" width="120" height="30" rx="6" fill="#e1bee7" stroke="#7b1fa2" stroke-width="1"/>
              <text x="490" y="355" text-anchor="middle" font-size="9" fill="#1A1F35">{children}</text>

              <rect x="300" y="375" width="250" height="35" rx="6" fill="#ffccbc" stroke="#e65100" stroke-width="1"/>
              <text x="425" y="398" text-anchor="middle" font-size="10" fill="#1A1F35">MobileFooter (z-50, bottomOffset)</text>

              <rect x="300" y="420" width="250" height="35" rx="6" fill="#c5cae9" stroke="#3f51b5" stroke-width="1"/>
              <text x="425" y="443" text-anchor="middle" font-size="10" fill="#1A1F35">MobileTabBar (z-40, md:hidden)</text>

              <!-- Footer Components Box -->
              <rect x="50" y="250" width="200" height="130" rx="8" fill="#fafafa" stroke="#f08c00" stroke-width="1" stroke-dasharray="4"/>
              <text x="150" y="275" text-anchor="middle" font-size="11" font-weight="600" fill="#f08c00">Footer Components</text>

              <rect x="70" y="295" width="160" height="35" rx="6" fill="#fff3e0" stroke="#f08c00" stroke-width="1"/>
              <text x="150" y="318" text-anchor="middle" font-size="10" fill="#1A1F35">MobileFooter (z-30)</text>

              <rect x="70" y="340" width="160" height="35" rx="6" fill="#fff3e0" stroke="#f08c00" stroke-width="1"/>
              <text x="150" y="363" text-anchor="middle" font-size="10" fill="#1A1F35">Footer (z-40, md:block)</text>

              <!-- MobileFooter details -->
              <rect x="50" y="420" width="200" height="80" rx="6" fill="#f5f5f5" stroke="#616161" stroke-width="1"/>
              <text x="150" y="440" text-anchor="middle" font-size="9" font-weight="600" fill="#1A1F35">MobileFooter Props</text>
              <text x="60" y="458" font-size="8" fill="#737373">bottomOffset: string (default: 0)</text>
              <text x="60" y="473" font-size="8" fill="#737373">zIndex: number (default: 30)</text>
              <text x="60" y="488" font-size="8" fill="#737373">className: string (optional)</text>

              <!-- PWA Components -->
              <rect x="600" y="250" width="200" height="100" rx="8" fill="#fafafa" stroke="#2e7d32" stroke-width="1" stroke-dasharray="4"/>
              <text x="700" y="275" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">PWA Components</text>

              <rect x="620" y="295" width="160" height="30" rx="6" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1"/>
              <text x="700" y="315" text-anchor="middle" font-size="9" fill="#1A1F35">PWAHeader</text>

              <rect x="620" y="330" width="160" height="30" rx="6" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1"/>
              <text x="700" y="350" text-anchor="middle" font-size="9" fill="#1A1F35">PWABottomNav</text>

              <!-- Branding Note -->
              <rect x="600" y="420" width="200" height="60" rx="6" fill="#fff9c4" stroke="#f9a825" stroke-width="1"/>
              <text x="700" y="445" text-anchor="middle" font-size="9" font-weight="600" fill="#f9a825">MyForge Labs Branding</text>
              <text x="700" y="465" text-anchor="middle" font-size="8" fill="#737373">Footer + MobileFooter</text>

              <!-- Arrows -->
              <path d="M425 100 L425 120" stroke="#1976d2" stroke-width="2" fill="none" marker-end="url(#arr4)"/>
              <path d="M375 155 L150 155 L150 180" stroke="#f08c00" stroke-width="1.5" fill="none" marker-end="url(#arr4)"/>
              <path d="M425 155 L425 180" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arr4)"/>
              <path d="M475 155 L700 155 L700 180" stroke="#2e7d32" stroke-width="1.5" fill="none" marker-end="url(#arr4)"/>
              <path d="M150 220 L150 250" stroke="#f08c00" stroke-width="1.5" fill="none" marker-end="url(#arr4)"/>
              <path d="M425 220 L425 250" stroke="#7b1fa2" stroke-width="2" fill="none" marker-end="url(#arr4)"/>
              <path d="M700 220 L700 250" stroke="#2e7d32" stroke-width="1.5" fill="none" marker-end="url(#arr4)"/>

              <defs>
                <marker id="arr4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#1A1F35"/>
                </marker>
              </defs>
            </svg>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['component-architecture']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- FUNCTIONAL TESTS SECTIONS -->

        <!-- Test Overview -->
        <section x-show="activeTab === 'test-overview'" x-transition class="diagram-section" id="test-overview">
          <div class="section-header" style="border-left-color:#2f9e44;">
            <span class="section-num" style="color:#2f9e44;">T0</span>
            <h2 x-text="lang === 'hu' ? 'FunkcionÃ¡lis Teszt ÃttekintÃ©s' : 'Functional Test Overview'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'Teszt KÃ¶rnyezet' : 'Test Environment'"></h3>
            <p x-text="lang === 'hu' ? 'A CEO Gala rendszer funkcionÃ¡lis tesztelÃ©si ÃºtmutatÃ³ja nem-technikai felhasznÃ¡lÃ³k szÃ¡mÃ¡ra. 10 teszteset tartalmaz lÃ©pÃ©srÅ‘l lÃ©pÃ©sre utasÃ­tÃ¡sokat, teszt adatokat Ã©s elfogadÃ¡si feltÃ©tel checklistet. 6 KRITIKUS teszt (TC-01 VIP, TC-02 FizetÅ‘, TC-03 PÃ¡ros, TC-06 PWA, TC-07 QR, TC-08 Check-in) - ezeknek MIND Ã¡t kell mennie. 4 FONTOS teszt (TC-04 JelentkezÅ‘, TC-05 Banki, TC-09 ÃœltetÃ©s, TC-10 Email) - 3/4-nek Ã¡t kell mennie. Teszt emailek formÃ¡tuma: teszt-[tipus]-[datum]@ceogala.hu. Minden teszt elÅ‘tt frissÃ­tsd az oldalt Ã©s gyÅ‘zÅ‘dj meg rÃ³la, hogy be vagy jelentkezve (admin vagy staff).' : 'Functional testing guide for CEO Gala system for non-technical users. 10 test cases include step-by-step instructions, test data, and acceptance criteria checklists. 6 CRITICAL tests (TC-01 VIP, TC-02 Paying, TC-03 Paired, TC-06 PWA, TC-07 QR, TC-08 Check-in) - ALL must pass. 4 IMPORTANT tests (TC-04 Applicant, TC-05 Bank, TC-09 Seating, TC-10 Email) - 3/4 must pass. Test email format: test-[type]-[date]@ceogala.hu. Before each test, refresh the page and ensure you are logged in (admin or staff).'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;">
              <!-- Environment Info -->
              <div class="tc-box tc-box-green" style="padding:1.25rem;">
                <h4 class="tc-title-green" style="font-size:0.9rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'HozzÃ¡fÃ©rÃ©si adatok' : 'Access Information'"></h4>
                <table style="width:100%;font-size:0.8rem;">
                  <tr><td style="padding:0.25rem 0;color:#737373;">URL:</td><td style="padding:0.25rem 0;"><code style="background:#f5f5f5;padding:0.15rem 0.4rem;">https://ceogala.mflevents.space</code></td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;">Admin:</td><td style="padding:0.25rem 0;"><code style="background:#f5f5f5;padding:0.15rem 0.4rem;">admin@ceogala.test / Admin123!</code></td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;">Staff:</td><td style="padding:0.25rem 0;"><code style="background:#f5f5f5;padding:0.15rem 0.4rem;">staff@ceogala.test / Staff123!</code></td></tr>
                </table>
              </div>
              <!-- Test Summary -->
              <div class="tc-box tc-box-orange" style="padding:1.25rem;">
                <h4 class="tc-title-orange" style="font-size:0.9rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Ã–sszesÃ­tÃ©s' : 'Test Summary'"></h4>
                <table style="width:100%;font-size:0.8rem;">
                  <tr><td style="padding:0.25rem 0;color:#737373;" x-text="lang === 'hu' ? 'Ã–sszes teszt:' : 'Total tests:'"></td><td style="padding:0.25rem 0;font-weight:600;">10</td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;" x-text="lang === 'hu' ? 'Kritikus:' : 'Critical:'"></td><td style="padding:0.25rem 0;font-weight:600;">6</td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;" x-text="lang === 'hu' ? 'Fontos:' : 'Important:'"></td><td style="padding:0.25rem 0;font-weight:600;">4</td></tr>
                </table>
              </div>
              <!-- Ticket Types -->
              <div class="tc-box tc-box-purple" style="padding:1.25rem;">
                <h4 class="tc-title-purple" style="font-size:0.9rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Jegy tÃ­pusok' : 'Ticket Types'"></h4>
                <table style="width:100%;font-size:0.8rem;">
                  <tr><td style="padding:0.25rem 0;color:#737373;">VIP:</td><td style="padding:0.25rem 0;" x-text="lang === 'hu' ? 'Ingyenes' : 'Free'"></td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;" x-text="lang === 'hu' ? 'EgyÃ©ni:' : 'Single:'"></td><td style="padding:0.25rem 0;">100,000 Ft</td></tr>
                  <tr><td style="padding:0.25rem 0;color:#737373;" x-text="lang === 'hu' ? 'PÃ¡ros:' : 'Paired:'"></td><td style="padding:0.25rem 0;">150,000 Ft</td></tr>
                </table>
              </div>
            </div>
            <!-- Acceptance Criteria Summary -->
            <div style="margin-top:2rem;background:white;border:1px solid rgba(92,99,112,0.2);padding:1.5rem;">
              <h4 style="font-size:0.9rem;margin-bottom:1rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si KritÃ©rium' : 'Acceptance Criteria'"></h4>
              <div style="display:flex;gap:2rem;flex-wrap:wrap;font-size:0.85rem;">
                <div><span style="color:#2f9e44;font-weight:600;">âœ…</span> <span x-text="lang === 'hu' ? 'SIKERES: Mind a 6 kritikus + 3/4 fontos teszt Ã¡tmegy' : 'PASS: All 6 critical + 3/4 important tests pass'"></span></div>
                <div><span style="color:#dc2626;font-weight:600;">âŒ</span> <span x-text="lang === 'hu' ? 'SIKERTELEN: BÃ¡rmelyik kritikus teszt hibÃ¡s' : 'FAIL: Any critical test fails'"></span></div>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['test-overview']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-01: VIP Registration -->
        <section x-show="activeTab === 'tc-01-vip'" x-transition class="diagram-section" id="tc-01-vip">
          <div class="section-header" style="border-left-color:#2f9e44;">
            <span class="section-num" style="color:#2f9e44;">T1</span>
            <h2 x-text="lang === 'hu' ? 'TC-01: VIP VendÃ©g RegisztrÃ¡ciÃ³' : 'TC-01: VIP Guest Registration'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'VIP vendÃ©g sikeres regisztrÃ¡ciÃ³ja meghÃ­vÃ³ linkkel. KRITIKUS teszt - kÃ¶telezÅ‘ Ã¡tmenni. A VIP vendÃ©gek ingyenes rÃ©szvÃ©telt kapnak, nem szÃ¼ksÃ©ges fizetÃ©s. A magic link 24 Ã³rÃ¡ig Ã©rvÃ©nyes. A regisztrÃ¡ciÃ³ utÃ¡n azonnali QR jegy generÃ¡lÃ¡s tÃ¶rtÃ©nik Ã©s a vendÃ©g megkapja a PWA belÃ©pÃ©si kÃ³djÃ¡t (CEOG-XXXXXX formÃ¡tum). Fontos ellenÅ‘rizni: VIP badge megjelenik, GDPR Ã©s lemondÃ¡si feltÃ©telek kÃ¶telezÅ‘ek, profil adatok mentÅ‘dnek (telefon, cÃ©gnÃ©v, pozÃ­ciÃ³).' : 'Successful VIP guest registration via invitation link. CRITICAL test - must pass. VIP guests receive complimentary attendance, no payment required. Magic link valid for 24 hours. After registration, instant QR ticket generation and guest receives PWA login code (CEOG-XXXXXX format). Important to verify: VIP badge appears, GDPR and cancellation terms required, profile data saved (phone, company, position).'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-cyan" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-cyan" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <table style="font-size:0.8rem;">
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;" x-text="lang === 'hu' ? 'NÃ©v:' : 'Name:'"></td><td>VIP Teszt 2025</td></tr>
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;">Email:</td><td><code style="background:#f5f5f5;padding:0.1rem 0.3rem;">vip-test-[mai dÃ¡tum]@ceogala.hu</code></td></tr>
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;" x-text="lang === 'hu' ? 'TÃ­pus:' : 'Type:'"></td><td>VIP</td></tr>
              </table>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin bejelentkezÃ©s' : 'Admin login'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Dashboard megjelenik' : 'Dashboard appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'VendÃ©gek â†’ Ãšj vendÃ©g' : 'Guests â†’ New guest'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Å°rlap megjelenik' : 'Form appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'KitÃ¶ltÃ©s VIP tÃ­pussal' : 'Fill with VIP type'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'MentÃ©s sikeres' : 'Save successful'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'MeghÃ­vÃ³ kÃ¼ldÃ©se' : 'Send invitation'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Email elkÃ¼ldve' : 'Email sent'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Magic link megnyitÃ¡sa' : 'Open magic link'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'VIP badge lÃ¡thatÃ³' : 'VIP badge visible'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'GDPR + feltÃ©telek elfogadÃ¡sa' : 'Accept GDPR + terms'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Checkboxok bepipÃ¡lva' : 'Checkboxes checked'"></td></tr>
                <tr><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'RegisztrÃ¡ciÃ³ gomb' : 'Register button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Success oldal + QR generÃ¡lva' : 'Success page + QR generated'"></td></tr>
              </table>
            </div>
            <!-- Acceptance Criteria Checklist -->
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'VIP vendÃ©g lÃ©trejÃ¶tt' : 'VIP guest created'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'MeghÃ­vÃ³ email megÃ©rkezett' : 'Invitation email received'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Magic link mÅ±kÃ¶dik' : 'Magic link works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'VIP badge megjelenik' : 'VIP badge appears'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'GDPR checkbox kÃ¶telezÅ‘' : 'GDPR checkbox required'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'QR kÃ³d automatikusan generÃ¡lÃ³dott' : 'QR code auto-generated'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-01-vip']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-02: Paying Registration -->
        <section x-show="activeTab === 'tc-02-paying'" x-transition class="diagram-section" id="tc-02-paying">
          <div class="section-header" style="border-left-color:#6741d9;">
            <span class="section-num" style="color:#6741d9;">T2</span>
            <h2 x-text="lang === 'hu' ? 'TC-02: FizetÅ‘ VendÃ©g RegisztrÃ¡ciÃ³' : 'TC-02: Paying Guest Registration'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'EgyÃ©ni jegyes vendÃ©g regisztrÃ¡ciÃ³ja szÃ¡mlÃ¡zÃ¡si adatokkal. KRITIKUS teszt. 5-lÃ©pÃ©ses regisztrÃ¡ciÃ³: Jegy vÃ¡lasztÃ¡s (100.000 Ft) â†’ SzemÃ©lyes adatok (telefon, cÃ©gnÃ©v, pozÃ­ciÃ³, Ã©trendi igÃ©nyek) â†’ SzÃ¡mlÃ¡zÃ¡si adatok (nÃ©v, adÃ³szÃ¡m, cÃ­m - magyar ÃFA formÃ¡tum validÃ¡lÃ¡s) â†’ GDPR/lemondÃ¡si elfogadÃ¡sa â†’ FizetÃ©si mÃ³d vÃ¡lasztÃ¡s. Stripe fizetÃ©snÃ©l Ã¡tirÃ¡nyÃ­tÃ¡s a Checkout oldalra, sikeres fizetÃ©s utÃ¡n automatikus jegy. Banki Ã¡tutalÃ¡snÃ¡l manuÃ¡lis admin jÃ³vÃ¡hagyÃ¡s szÃ¼ksÃ©ges. EllenÅ‘rizd: jegy Ã¡r 100.000 Ft, szÃ¡mlÃ¡zÃ¡si adatok mentÅ‘dnek, email kÃ¼ldÃ©s mÅ±kÃ¶dik.' : 'Single ticket guest registration with billing details. CRITICAL test. 5-step registration: Ticket selection (100,000 Ft) â†’ Personal data (phone, company, position, dietary requirements) â†’ Billing details (name, tax ID, address - Hungarian VAT format validation) â†’ GDPR/cancellation acceptance â†’ Payment method selection. Stripe payment redirects to Checkout page, automatic ticket after successful payment. Bank transfer requires manual admin approval. Verify: ticket price 100,000 Ft, billing data saved, email delivery works.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <div class="tc-box tc-box-purple" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-purple" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'SzemÃ©lyes:' : 'Personal:'"></strong><br>
                  <span style="color:#737373;">Email: fizeto-test-[dÃ¡tum]@ceogala.hu<br>Tel: +36 30 123 4567<br>CÃ©g: FizetÅ‘ Kft.<br>PozÃ­ciÃ³: CEO</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'SzÃ¡mlÃ¡zÃ¡si:' : 'Billing:'"></strong><br>
                  <span style="color:#737373;">AdÃ³szÃ¡m: 12345678-2-42<br>CÃ­m: VÃ¡ci Ãºt 1., Budapest, 1138<br>SzÃ¡mlÃ¡zÃ¡si nÃ©v: FizetÅ‘ Kft.</span>
                </div>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin â†’ VendÃ©g hozzÃ¡adÃ¡s (paying_single)' : 'Admin â†’ Add guest (paying_single)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'VendÃ©g lÃ©trehozva' : 'Guest created'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'MeghÃ­vÃ³ kÃ¼ldÃ©se' : 'Send invitation'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Email elkÃ¼ldve' : 'Email sent'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Magic link megnyitÃ¡sa' : 'Open magic link'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Jegy vÃ¡lasztÃ³ jelenik meg' : 'Ticket selector appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 1: EgyÃ©ni jegy kivÃ¡lasztÃ¡sa (100,000 Ft)' : 'Step 1: Select single ticket (100,000 Ft)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'TovÃ¡bb gomb aktÃ­v' : 'Next button active'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 2: SzemÃ©lyes adatok kitÃ¶ltÃ©se' : 'Step 2: Fill personal data'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Tel, CÃ©g, PozÃ­ciÃ³' : 'Tel, Company, Position'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 3: SzÃ¡mlÃ¡zÃ¡si adatok' : 'Step 3: Billing data'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'AdÃ³szÃ¡m, CÃ­m validÃ¡l' : 'Tax ID, Address validates'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 4: GDPR + feltÃ©telek' : 'Step 4: GDPR + terms'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Checkboxok kÃ¶telezÅ‘k' : 'Checkboxes required'"></td></tr>
                <tr><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'FizetÃ©s (Stripe/ÃtutalÃ¡s)' : 'Payment (Stripe/Transfer)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'QR jegy generÃ¡lÃ³dik' : 'QR ticket generated'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Jegy vÃ¡lasztÃ³ megjelenik' : 'Ticket selector appears'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'EgyÃ©ni jegy Ã¡ra: 100,000 Ft' : 'Single ticket price: 100,000 Ft'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'SzemÃ©lyes adatok validÃ¡lnak' : 'Personal data validates'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'SzÃ¡mlÃ¡zÃ¡si adatok validÃ¡lnak' : 'Billing data validates'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'FizetÃ©si mÃ³d vÃ¡laszthatÃ³' : 'Payment method selectable'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Stripe/ÃtutalÃ¡s mÅ±kÃ¶dik' : 'Stripe/Transfer works'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-02-paying']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-03: Paired Ticket -->
        <section x-show="activeTab === 'tc-03-paired'" x-transition class="diagram-section" id="tc-03-paired">
          <div class="section-header" style="border-left-color:#6741d9;">
            <span class="section-num" style="color:#6741d9;">T3</span>
            <h2 x-text="lang === 'hu' ? 'TC-03: PÃ¡ros Jegy RegisztrÃ¡ciÃ³' : 'TC-03: Paired Ticket Registration'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'PÃ¡ros jegy vÃ¡sÃ¡rlÃ¡sa partner adatokkal. KRITIKUS teszt - mindkÃ©t vendÃ©gnek lÃ©tre kell jÃ¶nnie. Az 5. lÃ©pÃ©sben partner adatok (nÃ©v Ã©s email) megadÃ¡sa szÃ¼ksÃ©ges. A primary vendÃ©g vÃ¡laszthat KÃœLÃ–NBÃ–ZÅ fizetÃ©si mÃ³dot a sajÃ¡t Ã©s partner jegyÃ©hez! 150.000 Ft a teljes Ã¡r. A sikeres fizetÃ©s utÃ¡n mindkÃ©t vendÃ©g kap QR jegyet Ã©s PWA kÃ³dot, automatikusan ugyanahhoz az asztalhoz kerÃ¼lnek. EllenÅ‘rizd: partner email megÃ©rkezik, 2 Guest rekord jÃ¶n lÃ©tre, a linked_guest_id mezÅ‘ helyesen beÃ¡llÃ­tÃ³dik.' : 'Paired ticket purchase with partner details. CRITICAL test - both guests must be created. In step 5, partner details (name and email) required. Primary guest can select DIFFERENT payment methods for own and partner ticket! 150,000 Ft total price. After successful payment, both guests receive QR tickets and PWA codes, automatically assigned to same table. Verify: partner email arrives, 2 Guest records created, linked_guest_id field correctly set.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-purple" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-purple" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'FÅ‘ vendÃ©g:' : 'Main guest:'"></strong><br>
                  <span style="color:#737373;">Email: paros-test-[dÃ¡tum]@ceogala.hu<br>NÃ©v: Demo VIP VendÃ©g<br>CÃ©g: VIP Industries Kft.</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'Partner:' : 'Partner:'"></strong><br>
                  <span style="color:#737373;">NÃ©v: VIP Partner Anna<br>Email: anna.partner@vipindustries.hu<br>Jegy Ã¡r: 150,000 Ft</span>
                </div>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek (5 lÃ©pÃ©ses regisztrÃ¡ciÃ³)' : 'Steps (5-step registration)'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin â†’ VendÃ©g hozzÃ¡adÃ¡s (paying_paired)' : 'Admin â†’ Add guest (paying_paired)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'VendÃ©g lÃ©trehozva' : 'Guest created'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 1: PÃ¡ros jegy kivÃ¡lasztÃ¡sa' : 'Step 1: Select paired ticket'"></td><td style="padding:0.5rem;color:#737373;">150,000 Ft</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 2: SzemÃ©lyes adatok' : 'Step 2: Personal data'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Tel, CÃ©g, PozÃ­ciÃ³, Ã‰trend' : 'Tel, Company, Position, Diet'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 3: SzÃ¡mlÃ¡zÃ¡si adatok' : 'Step 3: Billing data'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'AdÃ³szÃ¡m, CÃ­m' : 'Tax ID, Address'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 4: Partner adatok' : 'Step 4: Partner data'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Partner nÃ©v + email' : 'Partner name + email'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©s 5: GDPR + feltÃ©telek' : 'Step 5: GDPR + terms'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'MindkÃ©t checkbox' : 'Both checkboxes'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'FizetÃ©s (Stripe/ÃtutalÃ¡s)' : 'Payment (Stripe/Transfer)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'KÃ¡rtya: 4242...' : 'Card: 4242...'"></td></tr>
                <tr><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'EllenÅ‘rzÃ©s: MindkÃ©t vendÃ©g' : 'Verify: Both guests'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'DB-ben 2 rekord' : '2 records in DB'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'PÃ¡ros jegy Ã¡ra: 150,000 Ft' : 'Paired ticket: 150,000 Ft'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Partner adatok lÃ©pÃ©s megjelenik' : 'Partner data step appears'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Partner nÃ©v kÃ¶telezÅ‘' : 'Partner name required'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Partner email kÃ¶telezÅ‘' : 'Partner email required'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'MindkÃ©t vendÃ©g lÃ©trejÃ¶n' : 'Both guests created'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Azonos asztalhoz rendelve' : 'Assigned to same table'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-03-paired']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-04: Applicant Approval -->
        <section x-show="activeTab === 'tc-04-applicant'" x-transition class="diagram-section" id="tc-04-applicant">
          <div class="section-header" style="border-left-color:#f08c00;">
            <span class="section-num" style="color:#f08c00;">T4</span>
            <h2 x-text="lang === 'hu' ? 'TC-04: JelentkezÅ‘ JÃ³vÃ¡hagyÃ¡s' : 'TC-04: Applicant Approval'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'NyilvÃ¡nos jelentkezÃ©si folyamat nem meghÃ­vott vendÃ©gek szÃ¡mÃ¡ra Ã©s admin jÃ³vÃ¡hagyÃ¡s munkafolyamata. FONTOS teszt - a meghÃ­vÃ¡s nÃ©lkÃ¼li rÃ©szvÃ©tel kezelÃ©se. A jelentkezÅ‘ kitÃ¶lti az Å±rlapot a /apply oldalon (nÃ©v, email, telefon, cÃ©gnÃ©v + GDPR beleegyezÃ©s). Sikeres kÃ¼ldÃ©s utÃ¡n a Guest tÃ¡blÃ¡ba kerÃ¼l pending_approval stÃ¡tusszal Ã©s applicant guest_type-pal. Az admin a /admin/applicants oldalon lÃ¡tja a fÃ¼ggÅ‘ jelentkezÃ©seket, ahol JÃ³vÃ¡hagyÃ¡s (approve) vagy ElutasÃ­tÃ¡s (reject) dÃ¶ntÃ©st hozhat. JÃ³vÃ¡hagyÃ¡skor automatikus magic link generÃ¡lÃ¡s Ã©s email kÃ¼ldÃ©s tÃ¶rtÃ©nik (24 Ã³rÃ¡s Ã©rvÃ©nyessÃ©g). ElutasÃ­tÃ¡skor indok megadhatÃ³ (rejection_reason mezÅ‘). StÃ¡tusz Ã¡tmenetek: pending_approval â†’ approved/rejected. EllenÅ‘rizendÅ‘: Å±rlap validÃ¡ciÃ³, duplikÃ¡lt email kezelÃ©s, magic link kÃ¼ldÃ©s, elutasÃ­tÃ¡si indok mentÃ©se.' : 'Public application process for non-invited guests and admin approval workflow. IMPORTANT test - handling attendance requests without invitation. Applicant fills form on /apply page (name, email, phone, company + GDPR consent). After successful submission, record created in Guest table with pending_approval status and applicant guest_type. Admin sees pending applications on /admin/applicants page, where they can Approve or Reject. On approval, automatic magic link generation and email sending occurs (24h validity). On rejection, reason can be provided (rejection_reason field). Status transitions: pending_approval â†’ approved/rejected. Verify: form validation, duplicate email handling, magic link sending, rejection reason saving.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-orange" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-orange" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'JelentkezÅ‘:' : 'Applicant:'"></strong><br>
                  <span style="color:#737373;">Email: jelentkezo-[dÃ¡tum]@ceogala.hu<br>NÃ©v: Teszt JelentkezÅ‘<br>Telefon: +36 30 999 8888<br>CÃ©g: JelentkezÅ‘ Kft.</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'URL-ek:' : 'URLs:'"></strong><br>
                  <span style="color:#737373;">JelentkezÃ©s: /apply<br>Admin: /admin/applicants</span>
                </div>
              </div>
            </div>
            <!-- Process Flow -->
            <div class="tc-box tc-box-purple" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-purple" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Folyamat' : 'Process'"></h4>
              <div style="font-size:0.8rem;display:flex;gap:1rem;flex-wrap:wrap;align-items:center;">
                <span style="background:#f08c00;color:white;padding:0.25rem 0.75rem;">1. /apply</span>
                <span>â†’</span>
                <span style="background:#f5f5f5;padding:0.25rem 0.75rem;" x-text="lang === 'hu' ? 'Å°rlap kitÃ¶ltÃ©se' : 'Fill form'"></span>
                <span>â†’</span>
                <span style="background:#f5f5f5;padding:0.25rem 0.75rem;" x-text="lang === 'hu' ? 'Admin jÃ³vÃ¡hagyÃ¡s' : 'Admin approval'"></span>
                <span>â†’</span>
                <span style="background:#2f9e44;color:white;padding:0.25rem 0.75rem;" x-text="lang === 'hu' ? 'Magic link kÃ¼ldÃ©s' : 'Magic link sent'"></span>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? '/apply oldal megnyitÃ¡sa' : 'Open /apply page'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'JelentkezÃ©si Å±rlap jelenik meg' : 'Application form appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'NÃ©v, email, telefon, cÃ©g kitÃ¶ltÃ©se' : 'Fill name, email, phone, company'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Minden mezÅ‘ kÃ¶telezÅ‘' : 'All fields required'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'GDPR beleegyezÃ©s pipÃ¡lÃ¡sa' : 'Check GDPR consent'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Checkbox kÃ¶telezÅ‘' : 'Checkbox required'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'KÃ¼ldÃ©s gomb kattintÃ¡s' : 'Click submit button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Sikeres Ã¼zenet jelenik meg' : 'Success message appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin bejelentkezÃ©s' : 'Admin login'"></td><td style="padding:0.5rem;color:#737373;">admin@ceogala.test / Admin123!</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'JelentkezÅ‘k oldal megnyitÃ¡sa' : 'Open applicants page'"></td><td style="padding:0.5rem;color:#737373;">/admin/applicants</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Teszt jelentkezÅ‘ megkeresÃ©se' : 'Find test applicant'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'StÃ¡tusz: pending_approval' : 'Status: pending_approval'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'JÃ³vÃ¡hagyÃ¡s gomb kattintÃ¡s' : 'Click approve button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Magic link kÃ¼ldÃ©s' : 'Magic link sent'"></td></tr>
                <tr><td style="padding:0.5rem;">9</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'ElutasÃ­tÃ¡s teszt (mÃ¡sik jelentkezÅ‘)' : 'Test reject (another applicant)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Indok megadhatÃ³' : 'Reason can be given'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? '/apply oldal elÃ©rhetÅ‘' : '/apply page accessible'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'GDPR beleegyezÃ©s kÃ¶telezÅ‘' : 'GDPR consent required'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Admin lÃ¡tja a jelentkezÅ‘t' : 'Admin sees applicant'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'JÃ³vÃ¡hagyÃ¡s gomb mÅ±kÃ¶dik' : 'Approve button works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Magic link email megy ki' : 'Magic link email sent'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'ElutasÃ­tÃ¡s is mÅ±kÃ¶dik' : 'Reject also works'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-04-applicant']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-05: Bank Transfer Approval -->
        <section x-show="activeTab === 'tc-05-bank'" x-transition class="diagram-section" id="tc-05-bank">
          <div class="section-header" style="border-left-color:#f08c00;">
            <span class="section-num" style="color:#f08c00;">T5</span>
            <h2 x-text="lang === 'hu' ? 'TC-05: Banki ÃtutalÃ¡s JÃ³vÃ¡hagyÃ¡s' : 'TC-05: Bank Transfer Approval'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'Admin jÃ³vÃ¡hagyja a banki Ã¡tutalÃ¡ssal fizetÅ‘ vendÃ©get. FONTOS teszt. Az Admin FizetÃ©sek (/admin/payments) oldalon lÃ¡thatÃ³ az Ã¶sszes pending stÃ¡tuszÃº Ã¡tutalÃ¡s. JÃ³vÃ¡hagyÃ¡s gombra kattintva: payment_status â†’ paid, guest registration_status â†’ registered, automatikus QR generÃ¡lÃ¡s Ã©s jegy email kÃ¼ldÃ©s. EllenÅ‘rizd: fizetÃ©s Ã¶sszeg (100k/150k), dÃ¡tum, a jÃ³vÃ¡hagyÃ¡s utÃ¡n a vendÃ©g kapjon emailt Ã©s lÃ¡thatÃ³ legyen a QR jegye a PWA-ban. A mÅ±velet nem visszavonhatÃ³!' : 'Admin approves guest who paid via bank transfer. IMPORTANT test. Admin Payments (/admin/payments) page shows all pending transfers. On approve button click: payment_status â†’ paid, guest registration_status â†’ registered, automatic QR generation and ticket email delivery. Verify: payment amount (100k/150k), date, after approval guest receives email and QR ticket visible in PWA. Operation is irreversible!'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-orange" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-orange" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElÅ‘feltÃ©tel' : 'Prerequisite'"></h4>
              <p style="font-size:0.8rem;color:#737373;" x-text="lang === 'hu' ? 'Egy vendÃ©g regisztrÃ¡lt banki Ã¡tutalÃ¡ssal Ã©s pending stÃ¡tuszban van.' : 'A guest registered with bank transfer and is in pending status.'"></p>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin bejelentkezÃ©s' : 'Admin login'"></td><td style="padding:0.5rem;color:#737373;">admin@ceogala.test</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'FizetÃ©sek oldal megnyitÃ¡sa' : 'Open payments page'"></td><td style="padding:0.5rem;color:#737373;">/admin/payments</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'SzÅ±rÃ©s: FÃ¼ggÅ‘ben (pending)' : 'Filter: Pending'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Lista szÅ±kÃ¼l' : 'List filtered'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Teszt vendÃ©g megkeresÃ©se' : 'Find test guest'"></td><td style="padding:0.5rem;color:#737373;">test-*@ceogala.hu</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'JÃ³vÃ¡hagyÃ¡s gomb kattintÃ¡s' : 'Click approve button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'StÃ¡tusz: Paid' : 'Status: Paid'"></td></tr>
                <tr><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'EllenÅ‘rzÃ©s: QR + Email' : 'Verify: QR + Email'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Email naplÃ³' : 'Email log'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'FizetÃ©sek oldal mutatja' : 'Payments page shows'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'SzÅ±rÃ©s mÅ±kÃ¶dik' : 'Filtering works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'JÃ³vÃ¡hagyÃ¡s â†’ paid stÃ¡tusz' : 'Approve â†’ paid status'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'QR kÃ³d generÃ¡lÃ³dik' : 'QR code generated'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Ã‰rtesÃ­tÅ‘ email megy' : 'Notification email sent'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-05-bank']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-06: PWA Login -->
        <section x-show="activeTab === 'tc-06-pwa'" x-transition class="diagram-section" id="tc-06-pwa">
          <div class="section-header" style="border-left-color:#2f9e44;">
            <span class="section-num" style="color:#2f9e44;">T6</span>
            <h2 x-text="lang === 'hu' ? 'TC-06: PWA BejelentkezÃ©s' : 'TC-06: PWA Login'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'VendÃ©g bejelentkezÃ©s a PWA alkalmazÃ¡sba CEOG-XXXXXX kÃ³ddal. KRITIKUS teszt. A PWA (/pwa) oldal hÃ¡rom funkciÃ³t biztosÃ­t: Dashboard (vendÃ©g adatok Ã©s jegy), Ticket (QR kÃ³d megjelenÃ­tÃ©s), Profile (adatok szerkesztÃ©se). A bejelentkezÃ©si kÃ³d a regisztrÃ¡ciÃ³ utÃ¡n automatikusan generÃ¡lÃ³dik Ã©s a jegykÃ¼ldÅ‘ emailben Ã©rkezik. Offline mÃ³d: a QR kÃ³d cache-elÅ‘dik, nincs szÃ¼ksÃ©g internetre a belÃ©ptetÃ©shez. EllenÅ‘rizd: kÃ³d validÃ¡lÃ¡s mÅ±kÃ¶dik, Ã©rvÃ©nytelen kÃ³d hibaÃ¼zenetet ad, kijelentkezÃ©s tÃ¶rli a session-t.' : 'Guest login to PWA app with CEOG-XXXXXX code. CRITICAL test. PWA (/pwa) page provides three functions: Dashboard (guest data and ticket), Ticket (QR code display), Profile (edit details). Login code auto-generated after registration and arrives in ticket delivery email. Offline mode: QR code is cached, no internet required for check-in. Verify: code validation works, invalid code shows error message, logout clears session.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-cyan" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-cyan" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <table style="font-size:0.8rem;">
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;">PWA URL:</td><td><code style="background:#f5f5f5;padding:0.1rem 0.3rem;">https://ceogala.mflevents.space/pwa</code></td></tr>
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;" x-text="lang === 'hu' ? 'KÃ³d formÃ¡tum:' : 'Code format:'"></td><td><code style="background:#f5f5f5;padding:0.1rem 0.3rem;">CEOG-XXXXXX</code> (6 nagybetÅ±)</td></tr>
                <tr><td style="padding:0.2rem 1rem 0.2rem 0;color:#737373;" x-text="lang === 'hu' ? 'HibÃ¡s kÃ³d (teszt):' : 'Wrong code (test):'"></td><td><code style="background:#f5f5f5;padding:0.1rem 0.3rem;">CEOG-HIBAS1</code></td></tr>
              </table>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'PWA URL megnyitÃ¡sa' : 'Open PWA URL'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Welcome screen' : 'Welcome screen'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'KÃ³d megadÃ¡sa gomb' : 'Enter code button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'KÃ³d beviteli mezÅ‘' : 'Code input field'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'HibÃ¡s kÃ³d beÃ­rÃ¡sa' : 'Enter wrong code'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'HibaÃ¼zenet jelenik meg' : 'Error message appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Helyes kÃ³d beÃ­rÃ¡sa' : 'Enter correct code'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'BelÃ©pÃ©s gomb aktÃ­v' : 'Login button active'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'BelÃ©pÃ©s kattintÃ¡s' : 'Click login'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Dashboard megjelenik' : 'Dashboard appears'"></td></tr>
                <tr><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'MenÃ¼ navigÃ¡ciÃ³ teszt' : 'Test menu navigation'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Jegy, Profil, Asztal' : 'Ticket, Profile, Table'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'PWA fÅ‘oldal betÃ¶lt' : 'PWA homepage loads'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'KÃ³d bevitel mÅ±kÃ¶dik' : 'Code input works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'HibÃ¡s kÃ³d â†’ hibaÃ¼zenet' : 'Wrong code â†’ error'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Sikeres â†’ dashboard' : 'Success â†’ dashboard'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'VendÃ©g neve megjelenik' : 'Guest name appears'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'MenÃ¼ navigÃ¡ciÃ³ mÅ±kÃ¶dik' : 'Menu navigation works'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-06-pwa']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-07: QR Ticket -->
        <section x-show="activeTab === 'tc-07-qr'" x-transition class="diagram-section" id="tc-07-qr">
          <div class="section-header" style="border-left-color:#2f9e44;">
            <span class="section-num" style="color:#2f9e44;">T7</span>
            <h2 x-text="lang === 'hu' ? 'TC-07: QR Jegy MegjelenÃ­tÃ©s' : 'TC-07: QR Ticket Display'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'QR jegy megtekintÃ©se Ã©s beolvashatÃ³sÃ¡ga a PWA-ban. KRITIKUS teszt. A QR kÃ³d JWT tokent tartalmaz (HS256, 48 Ã³rÃ¡s lejÃ¡rat): {registration_id, guest_id, ticket_type, iat, exp}. A /pwa/ticket oldalon megjelenik a QR, letÃ¶lthetÅ‘ PNG-kÃ©nt, Ã©s offline is mÅ±kÃ¶dik (localStorage cache). A jegy tartalmazza: vendÃ©g nÃ©v, jegy tÃ­pus (VIP/EgyÃ©ni/PÃ¡ros), esemÃ©ny dÃ¡tum. EllenÅ‘rizd: QR olvashatÃ³ mobil kamerÃ¡val, a check-in scanner fel tudja dolgozni, a JWT Ã©rvÃ©nyessÃ©gi idÅ‘ helyes.' : 'QR ticket viewing and scannability in PWA. CRITICAL test. QR code contains JWT token (HS256, 48-hour expiry): {registration_id, guest_id, ticket_type, iat, exp}. On /pwa/ticket page the QR appears, downloadable as PNG, works offline (localStorage cache). Ticket shows: guest name, ticket type (VIP/Single/Paired), event date. Verify: QR readable by mobile camera, check-in scanner can process it, JWT expiry time correct.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-cyan" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-cyan" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElÅ‘feltÃ©tel' : 'Prerequisite'"></h4>
              <p style="font-size:0.8rem;color:#737373;" x-text="lang === 'hu' ? 'Bejelentkezett vendÃ©g a PWA-ban, akinek van QR jegye (registered stÃ¡tusz).' : 'Logged in guest in PWA with a QR ticket (registered status).'"></p>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'PWA Dashboard-rÃ³l' : 'From PWA Dashboard'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Bejelentkezett Ã¡llapot' : 'Logged in state'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Jegy menÃ¼pont kattintÃ¡s' : 'Click Ticket menu'"></td><td style="padding:0.5rem;color:#737373;">/pwa/ticket</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'QR kÃ³d megjelenÃ©s ellenÅ‘rzÃ©se' : 'Verify QR code appears'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Canvas/SVG elem' : 'Canvas/SVG element'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'VendÃ©g nÃ©v ellenÅ‘rzÃ©se' : 'Verify guest name'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Helyes nÃ©v lÃ¡thatÃ³' : 'Correct name visible'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Jegy tÃ­pus ellenÅ‘rzÃ©se' : 'Verify ticket type'"></td><td style="padding:0.5rem;color:#737373;">VIP / Paid / Paired</td></tr>
                <tr><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'QR beolvasÃ¡s teszt (opcionÃ¡lis)' : 'QR scan test (optional)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Check-in app-pal' : 'With check-in app'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Jegy oldal betÃ¶lt' : 'Ticket page loads'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'QR kÃ³d megjelenik' : 'QR code appears'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'QR kÃ³d beolvashatÃ³' : 'QR code scannable'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'VendÃ©g neve lÃ¡thatÃ³' : 'Guest name visible'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Jegy tÃ­pusa helyes' : 'Ticket type correct'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Offline is mÅ±kÃ¶dik (PWA cache)' : 'Works offline (PWA cache)'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-07-qr']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-08: Check-in -->
        <section x-show="activeTab === 'tc-08-checkin'" x-transition class="diagram-section" id="tc-08-checkin">
          <div class="section-header" style="border-left-color:#2f9e44;">
            <span class="section-num" style="color:#2f9e44;">T8</span>
            <h2 x-text="lang === 'hu' ? 'TC-08: Check-in Folyamat' : 'TC-08: Check-in Process'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'VendÃ©g belÃ©ptetÅ‘ QR kÃ³d leolvasÃ¡sa Ã©s validÃ¡lÃ¡sa. KRITIKUS teszt. A Check-in felÃ¼let (/checkin) mobil kamerÃ¡val mÅ±kÃ¶dik (html5-qrcode kÃ¶nyvtÃ¡r). SzÃ­nkÃ³dolt eredmÃ©nyek: ZÃ–LD - Ã©rvÃ©nyes jegy, vendÃ©g nÃ©v Ã©s kategÃ³ria lÃ¡thatÃ³, Check In gomb; SÃRGA - mÃ¡r belÃ©pett, eredeti idÅ‘pont, staff nÃ©v, Admin Override gomb (admin-only); PIROS - Ã©rvÃ©nytelen/lejÃ¡rt QR, hibaÃ¼zenet, Scan Again gomb. A belÃ©ptetÃ©s utÃ¡n Checkin rekord jÃ¶n lÃ©tre (staff_id, timestamp, is_override flag). EllenÅ‘rizd: dupla belÃ©ptetÃ©s tiltva, override mÅ±kÃ¶dik, naplÃ³zÃ¡s helyes.' : 'Guest check-in QR code scanning and validation. CRITICAL test. Check-in interface (/checkin) works with mobile camera (html5-qrcode library). Color-coded results: GREEN - valid ticket, guest name and category visible, Check In button; YELLOW - already checked in, original timestamp, staff name, Admin Override button (admin-only); RED - invalid/expired QR, error message, Scan Again button. After check-in, Checkin record created (staff_id, timestamp, is_override flag). Verify: duplicate check-in blocked, override works, logging correct.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-cyan" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-cyan" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'Staff belÃ©pÃ©s:' : 'Staff login:'"></strong><br>
                  <span style="color:#737373;">URL: /checkin<br>Email: staff@ceogala.test<br>JelszÃ³: Staff123!</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'ElÅ‘feltÃ©tel:' : 'Prerequisite:'"></strong><br>
                  <span style="color:#737373;" x-text="lang === 'hu' ? 'RegisztrÃ¡lt vendÃ©g QR jeggyel' : 'Registered guest with QR ticket'"></span>
                </div>
              </div>
            </div>
            <!-- Color codes -->
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:1.5rem;">
              <div style="background:#ecfdf5;border:2px solid #2f9e44;padding:1rem;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:0.5rem;">ðŸŸ¢</div>
                <strong style="color:#2f9e44;" x-text="lang === 'hu' ? 'ZÃ–LD' : 'GREEN'"></strong>
                <div style="font-size:0.8rem;color:#737373;" x-text="lang === 'hu' ? 'Ã‰rvÃ©nyes jegy' : 'Valid ticket'"></div>
              </div>
              <div style="background:#fff3e0;border:2px solid #f08c00;padding:1rem;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:0.5rem;">ðŸŸ¡</div>
                <strong style="color:#f08c00;" x-text="lang === 'hu' ? 'SÃRGA' : 'YELLOW'"></strong>
                <div style="font-size:0.8rem;color:#737373;" x-text="lang === 'hu' ? 'MÃ¡r belÃ©pett' : 'Already checked in'"></div>
              </div>
              <div style="background:#fef2f2;border:2px solid #dc2626;padding:1rem;text-align:center;">
                <div style="font-size:1.5rem;margin-bottom:0.5rem;">ðŸ”´</div>
                <strong style="color:#dc2626;" x-text="lang === 'hu' ? 'PIROS' : 'RED'"></strong>
                <div style="font-size:0.8rem;color:#737373;" x-text="lang === 'hu' ? 'Ã‰rvÃ©nytelen' : 'Invalid'"></div>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? '/checkin oldal megnyitÃ¡sa' : 'Open /checkin page'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Staff bejelentkezÃ©si Å±rlap' : 'Staff login form'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Staff bejelentkezÃ©s' : 'Staff login'"></td><td style="padding:0.5rem;color:#737373;">staff@ceogala.test / Staff123!</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Kamera engedÃ©lyezÃ©se' : 'Allow camera access'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'BÃ¶ngÃ©szÅ‘ engedÃ©ly popup' : 'Browser permission popup'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'QR kÃ³d elÃ© tartÃ¡sa' : 'Hold QR code in front'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'PWA jegyrÅ‘l' : 'From PWA ticket'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Ã‰rvÃ©nyes jegy â†’ ZÃ–LD kÃ¡rtya' : 'Valid ticket â†’ GREEN card'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'VendÃ©g adatai + BelÃ©ptetÃ©s gomb' : 'Guest data + Check-in button'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'BelÃ©ptetÃ©s gomb kattintÃ¡s' : 'Click check-in button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Sikeres belÃ©ptetÃ©s' : 'Successful check-in'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Ugyanaz a QR Ãºjra â†’ SÃRGA' : 'Same QR again â†’ YELLOW'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'MÃ¡r belÃ©pett figyelmeztetÃ©s' : 'Already checked in warning'"></td></tr>
                <tr><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin override teszt (admin belÃ©pÃ©ssel)' : 'Test admin override (admin login)'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Ãšjra belÃ©ptetÃ©s lehetsÃ©ges' : 'Re-check-in possible'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Staff bejelentkezÃ©s mÅ±kÃ¶dik' : 'Staff login works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Kamera engedÃ©lykÃ©rÃ©s' : 'Camera permission request'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'QR beolvasÃ¡s mÅ±kÃ¶dik' : 'QR scanning works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'ZÃ¶ld = belÃ©ptetÃ©s gomb' : 'Green = check-in button'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'SÃ¡rga = figyelmeztetÃ©s' : 'Yellow = warning'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Admin override mÅ±kÃ¶dik' : 'Admin override works'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-08-checkin']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-09: Seating -->
        <section x-show="activeTab === 'tc-09-seating'" x-transition class="diagram-section" id="tc-09-seating">
          <div class="section-header" style="border-left-color:#f08c00;">
            <span class="section-num" style="color:#f08c00;">T9</span>
            <h2 x-text="lang === 'hu' ? 'TC-09: ÃœltetÃ©si Rend KezelÃ©s' : 'TC-09: Seating Management'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'Asztalok lÃ©trehozÃ¡sa Ã©s vendÃ©gek hozzÃ¡rendelÃ©se drag & drop-pal. FONTOS teszt. Az Admin ÃœltetÃ©si Rend (/admin/seating) oldalon React-Konva canvas vizualizÃ¡ciÃ³ van. Asztal mÅ±veletek: Ãšj asztal gomb (nÃ©v, kapacitÃ¡s, tÃ­pus, pozÃ­ciÃ³), szerkesztÃ©s, tÃ¶rlÃ©s (Ã¼res asztal). VendÃ©g hozzÃ¡rendelÃ©s: drag & drop az asztalra, seat_number automatikus sorszÃ¡mozÃ¡s. PÃ¡ros jegynÃ©l mindkÃ©t vendÃ©g ugyanarra az asztalra kerÃ¼l. StÃ¡tuszok: available (zÃ¶ld), full (piros), reserved (sÃ¡rga). CSV export elÃ©rhetÅ‘. EllenÅ‘rizd: kapacitÃ¡s tÃºllÃ©pÃ©s tiltott, hozzÃ¡rendelÃ©s mentÅ‘dik, asztal pozÃ­ciÃ³k perzisztÃ¡lnak.' : 'Table creation and guest assignment via drag & drop. IMPORTANT test. Admin Seating (/admin/seating) page has React-Konva canvas visualization. Table operations: New table button (name, capacity, type, position), edit, delete (empty table only). Guest assignment: drag & drop to table, seat_number auto-incremented. Paired tickets both go to same table. Statuses: available (green), full (red), reserved (yellow). CSV export available. Verify: capacity overflow blocked, assignment saves, table positions persist.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-orange" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-orange" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'Ãšj asztal:' : 'New table:'"></strong><br>
                  <span style="color:#737373;">NÃ©v: Teszt Asztal 1<br>KapacitÃ¡s: 8 fÅ‘<br>TÃ­pus: round</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'URL-ek:' : 'URLs:'"></strong><br>
                  <span style="color:#737373;">Asztalok: /admin/tables<br>TÃ©rkÃ©p: /admin/seating</span>
                </div>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin bejelentkezÃ©s' : 'Admin login'"></td><td style="padding:0.5rem;color:#737373;">admin@ceogala.test / Admin123!</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Asztalok oldal megnyitÃ¡sa' : 'Open tables page'"></td><td style="padding:0.5rem;color:#737373;">/admin/tables</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Ãšj asztal gomb kattintÃ¡s' : 'Click new table button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Å°rlap megjelenik' : 'Form appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'NÃ©v, kapacitÃ¡s, tÃ­pus kitÃ¶ltÃ©se' : 'Fill name, capacity, type'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'MentÃ©s sikeres' : 'Save successful'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Dupla nÃ©v teszt' : 'Test duplicate name'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'HibaÃ¼zenet jelenik meg' : 'Error message appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'ÃœltetÃ©si tÃ©rkÃ©p megnyitÃ¡sa' : 'Open seating map'"></td><td style="padding:0.5rem;color:#737373;">/admin/seating</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'VendÃ©g asztalra hÃºzÃ¡sa' : 'Drag guest to table'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'HozzÃ¡rendelÃ©s sikeres' : 'Assignment successful'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Teli asztal teszt' : 'Test full table'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'KapacitÃ¡s hiba' : 'Capacity error'"></td></tr>
                <tr><td style="padding:0.5rem;">9</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'PÃ¡ros vendÃ©g teszt' : 'Test paired guest'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Mindketten ugyanoda kerÃ¼lnek' : 'Both assigned together'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Asztal lÃ©trehozÃ¡s mÅ±kÃ¶dik' : 'Table creation works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Egyedi nÃ©v validÃ¡ciÃ³' : 'Unique name validation'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'ÃœltetÃ©si tÃ©rkÃ©p betÃ¶lt' : 'Seating map loads'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Drag & drop mÅ±kÃ¶dik' : 'Drag & drop works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'KapacitÃ¡s ellenÅ‘rzÃ©s' : 'Capacity check'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'PÃ¡ros vendÃ©gek egyÃ¼tt' : 'Paired guests together'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-09-seating']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

        <!-- TC-10: Email -->
        <section x-show="activeTab === 'tc-10-email'" x-transition class="diagram-section" id="tc-10-email">
          <div class="section-header" style="border-left-color:#f08c00;">
            <span class="section-num" style="color:#f08c00;">T10</span>
            <h2 x-text="lang === 'hu' ? 'TC-10: Email KÃ¼ldÃ©s' : 'TC-10: Email Sending'"></h2>
          </div>
          <div class="description-box">
            <h3 x-text="lang === 'hu' ? 'CÃ©l' : 'Objective'"></h3>
            <p x-text="lang === 'hu' ? 'Email sablon kivÃ¡lasztÃ¡sa Ã©s kÃ¼ldÃ©s vendÃ©geknek az Admin Email oldalon (/admin/email). FONTOS teszt - az esemÃ©ny kommunikÃ¡ciÃ³ alapja. Email tÃ­pusok: Magic Link (meghÃ­vÃ³, 24 Ã³rÃ¡s Ã©rvÃ©nyessÃ©g), Ticket (QR jegy kÃ©zbesÃ­tÃ©s CID mellÃ©klettel), Reminder (esemÃ©ny emlÃ©keztetÅ‘). Az email rendszer Nodemailer + SMTP-t hasznÃ¡l exponenciÃ¡lis ÃºjraprÃ³bÃ¡lkozÃ¡ssal (3 kÃ­sÃ©rlet: 1s, 2s, 4s). Rate limiting: 5 email/tÃ­pus/Ã³ra Ã©s 20 Ã¶sszesen/Ã³ra vendÃ©genkÃ©nt. Minden kÃ¼ldÃ©s az EmailLog tÃ¡blÃ¡ba kerÃ¼l (guest_id, email_type, status, error_message). Sablonok: EmailTemplate tÃ¡bla (slug, subject, html_body, variables) + hardcoded fallback. EllenÅ‘rizendÅ‘: sablon helyes megjelenÃ©se, vÃ¡ltozÃ³k behelyettesÃ­tÃ©se ({name}, {link}, {qr}), kÃ¼ldÃ©si naplÃ³ frissÃ¼lÃ©se, hibakezelÃ©s mÅ±kÃ¶dÃ©se.' : 'Email template selection and sending to guests via Admin Email page (/admin/email). IMPORTANT test - foundation of event communication. Email types: Magic Link (invitation, 24h validity), Ticket (QR delivery with CID attachment), Reminder (event reminder). System uses Nodemailer + SMTP with exponential retry (3 attempts: 1s, 2s, 4s). Rate limiting: 5 emails/type/hour and 20 total/hour per guest. All sends logged to EmailLog table (guest_id, email_type, status, error_message). Templates: EmailTemplate table (slug, subject, html_body, variables) + hardcoded fallback. Verify: correct template rendering, variable substitution ({name}, {link}, {qr}), send log updates, error handling.'"></p>
          </div>
          <div class="diagram-area" style="padding:2rem;">
            <!-- Test Data -->
            <div class="tc-box tc-box-purple" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 class="tc-title-purple" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'Teszt Adatok' : 'Test Data'"></h4>
              <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;font-size:0.8rem;">
                <div>
                  <strong x-text="lang === 'hu' ? 'Email tÃ­pusok:' : 'Email types:'"></strong><br>
                  <span style="color:#737373;">Magic Link (meghÃ­vÃ³)<br>Ticket (jegy email)<br>Reminder (emlÃ©keztetÅ‘)</span>
                </div>
                <div>
                  <strong x-text="lang === 'hu' ? 'URL:' : 'URL:'"></strong><br>
                  <span style="color:#737373;">/admin/email</span>
                </div>
              </div>
            </div>
            <!-- Steps Table -->
            <div class="tc-box tc-box-white" style="padding:1.25rem;margin-bottom:1.5rem;">
              <h4 style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'LÃ©pÃ©sek' : 'Steps'"></h4>
              <table style="width:100%;font-size:0.8rem;border-collapse:collapse;">
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;width:30px;">1</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Admin bejelentkezÃ©s' : 'Admin login'"></td><td style="padding:0.5rem;color:#737373;">admin@ceogala.test / Admin123!</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">2</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Email menÃ¼pont megnyitÃ¡sa' : 'Open email menu'"></td><td style="padding:0.5rem;color:#737373;">/admin/email</td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">3</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Sablon kivÃ¡lasztÃ¡sa' : 'Select template'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'pl. MeghÃ­vÃ³' : 'e.g. Invitation'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">4</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'ElÅ‘nÃ©zet gomb kattintÃ¡s' : 'Click preview button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'HTML elÅ‘nÃ©zet megjelenik' : 'HTML preview appears'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">5</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'CÃ­mzettek kivÃ¡lasztÃ¡sa' : 'Select recipients'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'SzÅ±rÃ©s stÃ¡tusz alapjÃ¡n' : 'Filter by status'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">6</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'KÃ¼ldÃ©s gomb kattintÃ¡s' : 'Click send button'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'MegerÅ‘sÃ­tÃ©s popup' : 'Confirmation popup'"></td></tr>
                <tr style="border-bottom:1px solid #eee;"><td style="padding:0.5rem;">7</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'KÃ¼ldÃ©s megerÅ‘sÃ­tÃ©se' : 'Confirm sending'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'Sikeres kÃ¼ldÃ©s Ã¼zenet' : 'Success message'"></td></tr>
                <tr><td style="padding:0.5rem;">8</td><td style="padding:0.5rem;" x-text="lang === 'hu' ? 'Email naplÃ³ ellenÅ‘rzÃ©se' : 'Check email log'"></td><td style="padding:0.5rem;color:#737373;" x-text="lang === 'hu' ? 'BejegyzÃ©s lÃ¡thatÃ³' : 'Entry visible'"></td></tr>
              </table>
            </div>
            <div class="tc-box tc-box-green" style="padding:1.25rem;">
              <h4 class="tc-title-green" style="font-size:0.85rem;margin-bottom:0.75rem;" x-text="lang === 'hu' ? 'ElfogadÃ¡si FeltÃ©telek' : 'Acceptance Criteria'"></h4>
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:0.5rem;font-size:0.8rem;">
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Email sablonok elÃ©rhetÅ‘k' : 'Email templates available'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Sablon elÅ‘nÃ©zet mÅ±kÃ¶dik' : 'Template preview works'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'CÃ­mzett kivÃ¡laszthatÃ³' : 'Recipient selectable'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Email kÃ¼ldÃ©s sikeres' : 'Email sending successful'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Email naplÃ³ frissÃ¼l' : 'Email log updates'"></span></label>
                <label style="display:flex;align-items:center;gap:0.5rem;"><input type="checkbox"> <span x-text="lang === 'hu' ? 'Hiba esetÃ©n ÃºjraprÃ³bÃ¡lkozÃ¡s' : 'Retry on failure'"></span></label>
              </div>
            </div>
          </div>
          <div class="notes-section">
            <label x-text="t.notes"></label>
            <textarea x-model="notes['tc-10-email']" @input="saveNotes()" rows="3" :placeholder="t.notesPlaceholder"></textarea>
            <span class="notes-hint" x-text="t.notesHint"></span>
          </div>
        </section>

    </main>
  </div>

  <footer class="no-print">
    <span>CEO Gala 2026</span> &nbsp;|&nbsp; <span x-text="t.footerText"></span> &nbsp;|&nbsp; <span x-text="t.footerGenerated"></span>: Dec 17, 2025
  </footer>

  <script>
    const texts = {"en":{"pageTitle":"CEO Gala 2026","pageSubtitle":"System Architecture Documentation","sidebarTitle":"Diagrams","overview":"Overview","notes":"Notes","notesPlaceholder":"Add your notes about this diagram...","notesHint":"Notes are saved automatically in your browser","btnDark":"Dark","btnLight":"Light","btnExport":"Export CSV","btnImport":"Import CSV","btnPrint":"Print","backButton":"â† Back","footerText":"Event Registration System","footerGenerated":"Generated","importSuccess":"Notes imported successfully!","importError":"Import error"},"hu":{"pageTitle":"CEO Gala 2026","pageSubtitle":"Rendszer ArchitektÃºra DokumentÃ¡ciÃ³","sidebarTitle":"Diagramok","overview":"ÃttekintÃ©s","notes":"MegjegyzÃ©sek","notesPlaceholder":"Ãrja ide a megjegyzÃ©seit errÅ‘l a diagramrÃ³l...","notesHint":"A megjegyzÃ©sek automatikusan mentÅ‘dnek a bÃ¶ngÃ©szÅ‘ben","btnDark":"SÃ¶tÃ©t","btnLight":"VilÃ¡gos","btnExport":"CSV Export","btnImport":"CSV Import","btnPrint":"NyomtatÃ¡s","backButton":"â† Vissza","footerText":"EsemÃ©ny RegisztrÃ¡ciÃ³s Rendszer","footerGenerated":"GenerÃ¡lva","importSuccess":"MegjegyzÃ©sek sikeresen importÃ¡lva!","importError":"ImportÃ¡lÃ¡si hiba"}};
    function appData() {
      return {
        darkMode: false,
        lang: 'hu',
        activeTab: 'guest-registration',
        notes: JSON.parse(localStorage.getItem('ceogala-diagram-notes') || '{}'),
        get t() { return texts[this.lang]; },
        init() {
          // Sync with admin theme (localStorage 'theme' key from AdminThemeToggle)
          const adminTheme = localStorage.getItem('theme');
          if (adminTheme) {
            this.darkMode = adminTheme === 'dark';
          } else {
            // Fallback to legacy key
            const dm = localStorage.getItem('ceogala-darkMode');
            if (dm) this.darkMode = dm === 'true';
          }
          // Sync with admin language (localStorage 'admin-language' key from LanguageToggle)
          const adminLang = localStorage.getItem('admin-language');
          if (adminLang && (adminLang === 'hu' || adminLang === 'en')) {
            this.lang = adminLang;
          }
          // Handle URL hash to switch to correct tab
          const hash = window.location.hash.substring(1);
          if (hash) {
            // Valid tab IDs for diagrams and test cases
            const validTabs = [
              'guest-registration', 'vip-registration', 'admin-dashboard', 'paid-registration',
              'checkin-staff', 'pwa-app', 'application', 'state-machine', 'payment-flow',
              'system-architecture', 'pwa-guest-app', 'applicant', 'email-logs', 'user-management',
              'payment-refund', 'wf-guest-registration', 'wf-pwa-guest-app', 'wf-admin-applicant',
              'wf-admin-core', 'wf-admin-guest-mgmt', 'wf-admin-event-ops', 'wf-admin-reports',
              'wf-admin-seating', 'wf-seating-dragdrop', 'paired-registration-e2e', 'guest-import-invitation',
              'admin-staff-roles', 'checkin-override', 'email-rate-limit', 'component-architecture',
              'test-overview', 'tc-01-vip', 'tc-02-paying', 'tc-03-paired', 'tc-04-applicant',
              'tc-05-bank', 'tc-06-pwa', 'tc-07-qr', 'tc-08-checkin', 'tc-09-seating', 'tc-10-email'
            ];
            if (validTabs.includes(hash)) {
              this.activeTab = hash;
            }
          }
          // Listen for hash changes
          window.addEventListener('hashchange', () => {
            const newHash = window.location.hash.substring(1);
            if (newHash) {
              this.activeTab = newHash;
              this.scrollToTop();
            }
          });
          // Apply initial dark mode state
          if (this.darkMode) document.body.classList.add('dark');
          // Watch and sync with admin theme
          this.$watch('darkMode', v => {
            localStorage.setItem('theme', v ? 'dark' : 'light');
            document.body.classList.toggle('dark', v);
          });
          this.$watch('lang', v => localStorage.setItem('admin-language', v));
          // Listen for storage changes from parent (admin header toggles)
          const self = this;
          window.addEventListener('storage', (e) => {
            if (e.key === 'theme') {
              self.darkMode = e.newValue === 'dark';
              document.body.classList.toggle('dark', self.darkMode);
            }
            if (e.key === 'admin-language' && (e.newValue === 'hu' || e.newValue === 'en')) {
              self.lang = e.newValue;
            }
          });
          // Poll as fallback (same-origin iframe may not receive storage events)
          setInterval(() => {
            const newTheme = localStorage.getItem('theme');
            const newDarkMode = newTheme === 'dark';
            if (self.darkMode !== newDarkMode) {
              self.darkMode = newDarkMode;
              document.body.classList.toggle('dark', newDarkMode);
            }
            const newLang = localStorage.getItem('admin-language') || 'hu';
            if (self.lang !== newLang) self.lang = newLang;
          }, 500);
        },
        saveNotes() { localStorage.setItem('ceogala-diagram-notes', JSON.stringify(this.notes)); },
        scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); },
        exportNotes() {
          const rows = [['Diagram ID', 'Title', 'Notes']];
          const titles = {'guest-registration':this.lang==='hu'?'VendÃ©g RegisztrÃ¡ciÃ³s Folyamat':'Guest Registration Flow','vip-registration':this.lang==='hu'?'VIP RegisztrÃ¡ciÃ³s Folyamat':'VIP Registration Flow','admin-dashboard':this.lang==='hu'?'Admin Dashboard Folyamat':'Admin Dashboard Flow','paid-registration':this.lang==='hu'?'FizetÅ‘s RegisztrÃ¡ciÃ³s Folyamat':'Paid Registration Flow','checkin-staff':this.lang==='hu'?'Check-in Staff Folyamat':'Check-in Staff Flow','pwa-app':this.lang==='hu'?'PWA AlkalmazÃ¡s Folyamat':'PWA App Flow','application':this.lang==='hu'?'JelentkezÃ©si Folyamat':'Application Flow','state-machine':this.lang==='hu'?'ÃllapotgÃ©p Diagram':'State Machine Diagram','payment-flow':this.lang==='hu'?'FizetÃ©si Folyamat':'Payment Flow','system-architecture':this.lang==='hu'?'Rendszer ArchitektÃºra':'System Architecture','pwa-guest-app':this.lang==='hu'?'PWA VendÃ©g App Folyamat':'PWA Guest App Flow','applicant':this.lang==='hu'?'JelentkezÅ‘ Folyamat':'Applicant Flow','email-logs':this.lang==='hu'?'Email NaplÃ³ Admin Folyamat':'Email Logs Admin Flow','user-management':this.lang==='hu'?'FelhasznÃ¡lÃ³ KezelÃ©s Folyamat':'User Management Flow','payment-refund':this.lang==='hu'?'VisszatÃ©rÃ­tÃ©si Folyamat':'Payment Refund Flow','wf-guest-registration':this.lang==='hu'?'VendÃ©g RegisztrÃ¡ciÃ³ UI':'Guest Registration UI','wf-pwa-guest-app':this.lang==='hu'?'PWA VendÃ©g App UI':'PWA Guest App UI','wf-admin-applicant':this.lang==='hu'?'Admin JelentkezÅ‘ UI':'Admin Applicant UI','wf-admin-core':this.lang==='hu'?'Admin Core UI':'Admin Core UI','wf-admin-guest-mgmt':this.lang==='hu'?'Admin VendÃ©gkezelÃ©s UI':'Admin Guest Management UI','wf-admin-event-ops':this.lang==='hu'?'Admin EsemÃ©ny MÅ±veletek UI':'Admin Event Operations UI','wf-admin-reports':this.lang==='hu'?'Admin Riportok UI':'Admin Reports UI','wf-admin-seating':this.lang==='hu'?'Admin ÃœlÃ©srend SzerkesztÅ‘ UI':'Admin Seating Floorplan UI','wf-seating-dragdrop':this.lang==='hu'?'ÃœltetÃ©s Drag & Drop RÃ©szletek':'Seating Drag & Drop Detail','paired-registration-e2e':this.lang==='hu'?'PÃ¡ros RegisztrÃ¡ciÃ³ E2E':'Paired Registration E2E','guest-import-invitation':this.lang==='hu'?'VendÃ©g Import + MeghÃ­vÃ³':'Guest Import + Invitation','admin-staff-roles':this.lang==='hu'?'Admin vs Staff SzerepkÃ¶rÃ¶k':'Admin vs Staff Roles','checkin-override':this.lang==='hu'?'Check-in Override Folyamat':'Check-in Override Flow','email-rate-limit':this.lang==='hu'?'Email Rate Limiting':'Email Rate Limiting','component-architecture':this.lang==='hu'?'Komponens ArchitektÃºra':'Component Architecture'};
          Object.entries(this.notes).forEach(([id, note]) => {
            if (note && note.trim()) rows.push([id, titles[id] || id, note.replace(/"/g, '""')]);
          });
          const csv = rows.map(r => r.map(c => `"${c}"`).join(',')).join('\n');
          const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
          const link = document.createElement('a');
          link.href = URL.createObjectURL(blob);
          link.download = 'ceogala-diagram-notes.csv';
          link.click();
        },
        importNotes(event) {
          const file = event.target.files[0];
          if (!file) return;
          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const lines = e.target.result.split('\n');
              for (let i = 1; i < lines.length; i++) {
                const line = lines[i].trim();
                if (!line) continue;
                const match = line.match(/^"([^"]+)","[^"]*","(.*)"$/);
                if (match) this.notes[match[1]] = match[2].replace(/""/g, '"');
              }
              this.saveNotes();
              alert(this.t.importSuccess);
            } catch (err) { alert(this.t.importError + ': ' + err.message); }
          };
          reader.readAsText(file);
          event.target.value = '';
        }
      };
    }
  </script>
</body>
</html>